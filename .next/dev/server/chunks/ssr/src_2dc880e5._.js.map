{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Lenovo/Documents/BilliardOS/app/src/components/CheckoutModal.tsx"],"sourcesContent":["'use client';\r\nimport { useState, useEffect, useMemo, useCallback } from 'react';\r\nimport {\r\n    X, Clock, Coffee, Plus, Minus, Banknote, QrCode, CreditCard,\r\n    Printer, Trash2, Tag, Star, FileText, Loader2\r\n} from 'lucide-react';\r\n\r\ninterface CheckoutModalProps {\r\n    table: any;\r\n    onClose: () => void;\r\n    onConfirm: (method: string, cash: number, total: number, items: any[], pointsRedeemed: number) => void;\r\n}\r\n\r\nexport const CheckoutModal = ({ table, onClose, onConfirm }: CheckoutModalProps) => {\r\n    // State Management\r\n    const [splitMode, setSplitMode] = useState<'none' | 'item' | 'person'>('none');\r\n    const [splitCount, setSplitCount] = useState(2);\r\n    const [paymentMethods, setPaymentMethods] = useState<{ method: string, amount: number }[]>([\r\n        { method: 'CASH', amount: 0 }\r\n    ]);\r\n    const [selectedItems, setSelectedItems] = useState<Set<string>>(new Set());\r\n    const [pointsRedeemed, setPointsRedeemed] = useState<number>(0);\r\n    const [discountType, setDiscountType] = useState<'percent' | 'fixed'>('percent');\r\n    const [discountValue, setDiscountValue] = useState<number>(0);\r\n    const [showPrintPreview, setShowPrintPreview] = useState(false);\r\n    const [receiptNo] = useState(`INV-${Date.now().toString(36).toUpperCase()}`);\r\n    const [isProcessing, setIsProcessing] = useState(false);\r\n\r\n    // Member Info - memoized\r\n    const member = useMemo(() => table.activeSession?.member, [table.activeSession?.member]);\r\n    const maxPoints = useMemo(() => member?.pointsBalance || 0, [member?.pointsBalance]);\r\n    const pointsDiscount = useMemo(() => pointsRedeemed * 1000, [pointsRedeemed]);\r\n\r\n    // Memoize duration calculations - only recalculate when table changes\r\n    const durationData = useMemo(() => {\r\n        const startTime = table.activeSession?.startTime ? new Date(table.activeSession.startTime).getTime() : Date.now();\r\n        const elapsedSeconds = Math.floor((Date.now() - startTime) / 1000);\r\n        const durationCost = Math.ceil((elapsedSeconds / 3600) * table.hourlyRate);\r\n        const durationMinutes = Math.floor(elapsedSeconds / 60);\r\n        const durationHours = Math.floor(durationMinutes / 60);\r\n        const durationMins = durationMinutes % 60;\r\n        return { startTime, elapsedSeconds, durationCost, durationMinutes, durationHours, durationMins };\r\n    }, [table.activeSession?.startTime, table.hourlyRate]);\r\n\r\n    const { durationCost, durationHours, durationMins } = durationData;\r\n\r\n    // Memoize F&B items - only recompute when orders change\r\n    const fnbItems = useMemo(() => {\r\n        const fnbOrders = table.activeSession?.orders || [];\r\n        return fnbOrders.flatMap((o: any) => o.items.map((i: any) => ({ ...i, orderId: o.id })));\r\n    }, [table.activeSession?.orders]);\r\n\r\n    // Initialize selection\r\n    useEffect(() => {\r\n        const allIds = new Set(['duration']);\r\n        fnbItems.forEach((i: any) => allIds.add(`item-${i.id}`));\r\n        setSelectedItems(allIds);\r\n    }, [fnbItems]);\r\n\r\n    // Memoize subtotal calculation\r\n    const subtotal = useMemo(() => {\r\n        let sub = 0;\r\n        if (splitMode === 'none' || selectedItems.has('duration')) sub += durationCost;\r\n        fnbItems.forEach((i: any) => {\r\n            if (splitMode === 'none' || selectedItems.has(`item-${i.id}`)) sub += (Number(i.unitPrice) * i.quantity);\r\n        });\r\n        return sub;\r\n    }, [splitMode, selectedItems, durationCost, fnbItems]);\r\n\r\n    // Memoize other calculations\r\n    const discountAmount = useMemo(() =>\r\n        discountType === 'percent' ? Math.floor(subtotal * (discountValue / 100)) : discountValue,\r\n        [discountType, subtotal, discountValue]\r\n    );\r\n\r\n    const afterDiscount = useMemo(() =>\r\n        Math.max(0, subtotal - discountAmount - pointsDiscount),\r\n        [subtotal, discountAmount, pointsDiscount]\r\n    );\r\n\r\n    const tax = useMemo(() => Math.floor(afterDiscount * 0.1), [afterDiscount]);\r\n    const grandTotal = useMemo(() => afterDiscount + tax, [afterDiscount, tax]);\r\n    const perPersonAmount = useMemo(() =>\r\n        splitMode === 'person' ? Math.ceil(grandTotal / splitCount) : grandTotal,\r\n        [splitMode, grandTotal, splitCount]\r\n    );\r\n\r\n    const totalPaid = useMemo(() => paymentMethods.reduce((sum, p) => sum + p.amount, 0), [paymentMethods]);\r\n    const remainingAmount = useMemo(() => grandTotal - totalPaid, [grandTotal, totalPaid]);\r\n    const change = useMemo(() => Math.max(0, totalPaid - grandTotal), [totalPaid, grandTotal]);\r\n\r\n    const toggleItem = useCallback((id: string) => {\r\n        setSelectedItems(prev => {\r\n            const newSet = new Set(prev);\r\n            if (newSet.has(id)) newSet.delete(id);\r\n            else newSet.add(id);\r\n            return newSet;\r\n        });\r\n    }, []);\r\n\r\n    const addPaymentMethod = useCallback(() => {\r\n        setPaymentMethods(prev => [...prev, { method: 'QRIS', amount: 0 }]);\r\n    }, []);\r\n\r\n    const updatePayment = useCallback((index: number, field: 'method' | 'amount', value: string | number) => {\r\n        setPaymentMethods(prev => {\r\n            const updated = [...prev];\r\n            if (field === 'method') updated[index].method = value as string;\r\n            else updated[index].amount = Number(value);\r\n            return updated;\r\n        });\r\n    }, []);\r\n\r\n    const removePayment = useCallback((index: number) => {\r\n        setPaymentMethods(prev => prev.length > 1 ? prev.filter((_, i) => i !== index) : prev);\r\n    }, []);\r\n\r\n    const handlePrint = () => {\r\n        const printContent = document.getElementById('receipt-print-area')?.innerHTML;\r\n        const win = window.open('', '', 'width=400,height=600');\r\n        if (win && printContent) {\r\n            win.document.write(`\r\n                <html>\r\n                <head>\r\n                    <title>INV-${receiptNo}</title>\r\n                    <style>\r\n                        @page { margin: 0; }\r\n                        body { \r\n                            font-family: 'Courier New', Courier, monospace; \r\n                            width: 58mm; \r\n                            margin: 0; \r\n                            padding: 5px 5px 20px 5px; \r\n                            font-size: 10px; \r\n                            line-height: 1.2;\r\n                            color: black;\r\n                        }\r\n                        .header { text-align: center; margin-bottom: 10px; }\r\n                        .title { font-size: 14px; font-weight: bold; margin-bottom: 2px; text-transform: uppercase; }\r\n                        .address { font-size: 9px; margin-bottom: 2px; }\r\n                        .meta { font-size: 9px; margin-bottom: 5px; text-align: left; }\r\n                        .divider { border-bottom: 1px dashed #000; margin: 5px 0; width: 100%; }\r\n                        .double-divider { border-bottom: 3px double #000; margin: 5px 0; width: 100%; }\r\n                        .item-row { margin-bottom: 2px; }\r\n                        .item-name { font-weight: bold; display: block; }\r\n                        .item-details { display: flex; justify-content: space-between; padding-left: 0; }\r\n                        .flex-between { display: flex; justify-content: space-between; }\r\n                        .font-bold { font-weight: bold; }\r\n                        .text-lg { font-size: 12px; }\r\n                        .footer { text-align: center; margin-top: 15px; font-size: 9px; }\r\n                        .text-right { text-align: right; }\r\n                        .print-hidden { display: none; }\r\n                        \r\n                        /* Layout adjustments */\r\n                        table { width: 100%; border-collapse: collapse; }\r\n                        td { vertical-align: top; }\r\n                        td.price { text-align: right; white-space: nowrap; }\r\n                    </style>\r\n                </head>\r\n                <body>\r\n                    ${printContent}\r\n                    <script>\r\n                        window.onload = function() { window.print(); window.close(); }\r\n                    </script>\r\n                </body>\r\n                </html>\r\n            `);\r\n            win.document.close();\r\n        }\r\n    };\r\n\r\n    const handleConfirm = useCallback(() => {\r\n        if (isProcessing) return;\r\n        setIsProcessing(true);\r\n\r\n        const itemsToPay: any[] = [];\r\n        if (splitMode === 'none' || selectedItems.has('duration')) {\r\n            itemsToPay.push({ type: 'TABLE_BILL', name: 'Table Duration', price: Number(durationCost), qty: 1 });\r\n        }\r\n        fnbItems.forEach((i: any) => {\r\n            if (splitMode === 'none' || selectedItems.has(`item-${i.id}`)) {\r\n                itemsToPay.push({ type: 'PRODUCT', id: i.productId, name: i.itemName, price: Number(i.unitPrice), qty: i.quantity });\r\n            }\r\n        });\r\n        onConfirm(paymentMethods[0]?.method || 'CASH', totalPaid, grandTotal, itemsToPay, pointsRedeemed);\r\n    }, [isProcessing, splitMode, selectedItems, durationCost, fnbItems, paymentMethods, totalPaid, grandTotal, pointsRedeemed, onConfirm]);\r\n\r\n    const PrintPreviewContent = () => (\r\n        <div id=\"receipt-print-area\" className=\"bg-white text-black p-6 rounded-lg max-w-sm mx-auto font-mono text-sm\">\r\n            {/* Header */}\r\n            <div className=\"text-center border-b-2 border-dashed border-gray-400 pb-3 mb-3\">\r\n                <h1 className=\"text-2xl font-bold tracking-wide\">BILLIARD POS</h1>\r\n                <p className=\"text-xs text-gray-600 mt-1\">Jl. Contoh No. 123, Jakarta</p>\r\n                <p className=\"text-xs text-gray-600\">Telp: (021) 1234-5678</p>\r\n            </div>\r\n\r\n            {/* Receipt Info */}\r\n            <div className=\"text-xs space-y-0.5 mb-3 border-b border-gray-300 pb-3\">\r\n                <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">No:</span>\r\n                    <span className=\"font-semibold\">{receiptNo}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Tanggal:</span>\r\n                    <span className=\"font-semibold\">{new Date().toLocaleString('id-ID', { day: '2-digit', month: '2-digit', year: 'numeric', hour: '2-digit', minute: '2-digit' })}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Meja:</span>\r\n                    <span className=\"font-semibold\">{table.name}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Customer:</span>\r\n                    <span className=\"font-semibold\">{table.activeSession?.customerName || 'Guest'}</span>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Items */}\r\n            <div className=\"mb-3 border-b border-gray-300 pb-3\">\r\n                {/* Table Duration */}\r\n                <div className=\"mb-2\">\r\n                    <div className=\"flex justify-between font-semibold\">\r\n                        <span>Sewa Meja ({durationHours > 0 ? `${durationHours}j ` : ''}{durationMins}m)</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between text-xs text-gray-600 mt-0.5\">\r\n                        <span className=\"uppercase\">{table.type}</span>\r\n                        <span className=\"font-bold text-black\">Rp {durationCost.toLocaleString()}</span>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* F&B Items */}\r\n                {fnbItems.map((item: any) => (\r\n                    <div key={item.id} className=\"mb-2\">\r\n                        <div className=\"flex justify-between font-semibold\">\r\n                            <span>{item.itemName}</span>\r\n                        </div>\r\n                        <div className=\"flex justify-between text-xs text-gray-600 mt-0.5\">\r\n                            <span>{item.quantity} x Rp {Number(item.unitPrice).toLocaleString()}</span>\r\n                            <span className=\"font-bold text-black\">Rp {(Number(item.unitPrice) * item.quantity).toLocaleString()}</span>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Subtotal & Tax */}\r\n            <div className=\"text-xs space-y-1 mb-3 pb-3 border-b border-gray-300\">\r\n                <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Subtotal</span>\r\n                    <span>Rp {subtotal.toLocaleString()}</span>\r\n                </div>\r\n                {discountAmount > 0 && (\r\n                    <div className=\"flex justify-between text-green-600\">\r\n                        <span>Diskon</span>\r\n                        <span>-Rp {discountAmount.toLocaleString()}</span>\r\n                    </div>\r\n                )}\r\n                {pointsDiscount > 0 && (\r\n                    <div className=\"flex justify-between text-yellow-600\">\r\n                        <span>Poin Member</span>\r\n                        <span>-Rp {pointsDiscount.toLocaleString()}</span>\r\n                    </div>\r\n                )}\r\n                <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Tax (10%)</span>\r\n                    <span>Rp {tax.toLocaleString()}</span>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Total */}\r\n            <div className=\"text-lg font-bold flex justify-between mb-3 pb-3 border-b-2 border-gray-800\">\r\n                <span>TOTAL</span>\r\n                <span>Rp {grandTotal.toLocaleString()}</span>\r\n            </div>\r\n\r\n            {/* Payment */}\r\n            <div className=\"text-xs space-y-1 mb-3 pb-3 border-b border-dashed border-gray-400\">\r\n                {paymentMethods.map((p, i) => (\r\n                    <div key={i} className=\"flex justify-between\">\r\n                        <span className=\"text-gray-600\">{p.method}</span>\r\n                        <span className=\"font-semibold\">Rp {p.amount.toLocaleString()}</span>\r\n                    </div>\r\n                ))}\r\n                {change > 0 && (\r\n                    <div className=\"flex justify-between font-bold\">\r\n                        <span>Kembalian</span>\r\n                        <span>Rp {change.toLocaleString()}</span>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Footer */}\r\n            <div className=\"text-center text-xs text-gray-600 space-y-1\">\r\n                <p className=\"font-semibold\">Terima kasih atas kunjungan Anda!</p>\r\n                <p>Wifi: BilliardGuest / Pass: 12345678</p>\r\n                <p className=\"text-[10px] mt-2\">--- Struk ini sah tanpa tanda tangan ---</p>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-[var(--bg-overlay)] backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n            <div className=\"bg-[var(--bg-surface)] border border-[var(--border-default)] rounded-xl shadow-2xl w-full max-w-7xl max-h-[90vh] flex overflow-hidden\">\r\n\r\n                {/* LEFT PANEL: Bill Details */}\r\n                <div className=\"w-1/2 flex flex-col border-r border-[var(--border-default)] bg-[var(--bg-base)]\">\r\n                    <div className=\"p-4 border-b border-[var(--border-default)] flex justify-between items-center\">\r\n                        <div>\r\n                            <h2 className=\"text-lg font-bold text-[var(--text-primary)]\">Checkout: {table.name}</h2>\r\n                            <p className=\"text-xs text-[var(--text-muted)]\">\r\n                                {member ? <span className=\"text-[var(--accent-secondary)] font-bold\">{member.fullName} ({member.pointsBalance} pts)</span> : `Receipt: ${receiptNo}`}\r\n                            </p>\r\n                        </div>\r\n                        <div className=\"flex gap-1\">\r\n                            {['none', 'item', 'person'].map((mode) => (\r\n                                <button key={mode} onClick={() => setSplitMode(mode as any)}\r\n                                    className={`px-2 py-1 text-[10px] font-bold rounded border ${splitMode === mode ? 'bg-[var(--accent-primary)] text-black border-[var(--accent-primary)]' : 'text-[var(--text-muted)] border-[var(--border-default)]'}`}>\r\n                                    {mode === 'none' ? 'Full' : mode === 'item' ? 'Item' : 'Person'}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Split by Person */}\r\n                    {splitMode === 'person' && (\r\n                        <div className=\"px-4 py-2 bg-[var(--bg-card)] border-b border-[var(--border-default)] flex items-center gap-3\">\r\n                            <span className=\"text-xs text-[var(--text-muted)]\">Bagi ke</span>\r\n                            <button onClick={() => setSplitCount(Math.max(2, splitCount - 1))} className=\"p-1 bg-[var(--bg-elevated)] rounded text-[var(--text-primary)]\"><Minus size={14} /></button>\r\n                            <span className=\"text-[var(--text-primary)] font-bold w-6 text-center\">{splitCount}</span>\r\n                            <button onClick={() => setSplitCount(splitCount + 1)} className=\"p-1 bg-[var(--bg-elevated)] rounded text-[var(--text-primary)]\"><Plus size={14} /></button>\r\n                            <span className=\"text-xs text-[var(--text-muted)]\">orang</span>\r\n                            <span className=\"ml-auto text-sm text-[var(--accent-primary)] font-mono\">@ Rp {perPersonAmount.toLocaleString()}</span>\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"flex-1 overflow-y-auto p-4\">\r\n                        {/* Duration Item */}\r\n                        <button onClick={() => splitMode === 'item' && toggleItem('duration')}\r\n                            className={`w-full flex justify-between items-start text-left p-3 rounded mb-2 transition-colors ${splitMode === 'item' && selectedItems.has('duration') ? 'bg-[var(--accent-primary)]/10 border border-[var(--accent-primary)]/50' : 'bg-[var(--bg-card)] border border-[var(--border-default)]'}`}>\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"p-2 bg-[var(--bg-elevated)] rounded text-[var(--accent-primary)]\"><Clock size={16} /></div>\r\n                                <div>\r\n                                    <p className=\"text-sm font-medium text-[var(--text-primary)]\">Durasi ({durationHours}h {durationMins}m)</p>\r\n                                    <p className=\"text-[10px] text-[var(--text-muted)]\">{table.type} @ Rp {Number(table.hourlyRate).toLocaleString()}/jam</p>\r\n                                </div>\r\n                            </div>\r\n                            <span className=\"font-mono text-[var(--text-primary)]\">Rp {durationCost.toLocaleString()}</span>\r\n                        </button>\r\n\r\n                        {/* F&B Items */}\r\n                        {fnbItems.length > 0 ? (\r\n                            <div className=\"space-y-2\">\r\n                                <h4 className=\"text-[10px] text-[var(--text-muted)] uppercase font-bold mt-4 mb-2\">Pesanan F&B</h4>\r\n                                {fnbItems.map((item: any) => (\r\n                                    <button key={item.id} onClick={() => splitMode === 'item' && toggleItem(`item-${item.id}`)}\r\n                                        className={`w-full flex justify-between items-center text-left p-2 rounded transition-colors ${splitMode === 'item' && selectedItems.has(`item-${item.id}`) ? 'bg-[var(--accent-primary)]/10 border border-[var(--accent-primary)]/50' : 'bg-[var(--bg-surface)] border border-[var(--border-default)]'}`}>\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            <Coffee size={14} className=\"text-[var(--accent-secondary)]\" />\r\n                                            <span className=\"text-xs text-[var(--text-primary)]\">{item.itemName}</span>\r\n                                            <span className=\"text-[10px] text-[var(--text-muted)]\">x{item.quantity}</span>\r\n                                        </div>\r\n                                        <span className=\"font-mono text-xs text-[var(--text-primary)]\">Rp {(Number(item.unitPrice) * item.quantity).toLocaleString()}</span>\r\n                                    </button>\r\n                                ))}\r\n                            </div>\r\n                        ) : (\r\n                            <p className=\"text-center text-[var(--text-muted)] text-xs py-4\">Tidak ada pesanan F&B</p>\r\n                        )}\r\n\r\n                        {/* Discount Section */}\r\n                        <div className=\"mt-4 p-3 bg-[var(--bg-card)] rounded border border-[var(--border-default)]\">\r\n                            <h4 className=\"text-[10px] text-[var(--text-muted)] uppercase font-bold mb-2 flex items-center gap-1\">\r\n                                <Tag size={12} /> Diskon / Promo\r\n                            </h4>\r\n                            <div className=\"flex gap-2\">\r\n                                <select value={discountType} onChange={(e) => setDiscountType(e.target.value as any)}\r\n                                    className=\"bg-[var(--bg-base)] border border-[var(--border-default)] rounded px-2 py-1 text-xs text-[var(--text-primary)]\">\r\n                                    <option value=\"percent\">%</option>\r\n                                    <option value=\"fixed\">Rp</option>\r\n                                </select>\r\n                                <input type=\"number\" value={discountValue || ''} onChange={(e) => setDiscountValue(Number(e.target.value))}\r\n                                    placeholder={discountType === 'percent' ? '0-100' : 'Nominal'}\r\n                                    className=\"flex-1 bg-[var(--bg-base)] border border-[var(--border-default)] rounded px-2 py-1 text-xs text-[var(--text-primary)] w-20\" />\r\n                                {discountAmount > 0 && <span className=\"text-xs text-[var(--accent-primary)] font-mono self-center\">-Rp {discountAmount.toLocaleString()}</span>}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Points Redeem */}\r\n                        {member && maxPoints > 0 && (\r\n                            <div className=\"mt-3 p-3 bg-[var(--bg-elevated)] rounded border border-[var(--accent-secondary)]/30\">\r\n                                <h4 className=\"text-[10px] text-[var(--accent-secondary)] uppercase font-bold mb-2 flex items-center gap-1\">\r\n                                    <Star size={12} /> Redeem Points ({maxPoints} tersedia)\r\n                                </h4>\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <input type=\"range\" min=\"0\" max={Math.min(maxPoints, Math.floor(subtotal / 1000))} value={pointsRedeemed}\r\n                                        onChange={(e) => setPointsRedeemed(Number(e.target.value))} className=\"flex-1\" />\r\n                                    <span className=\"text-xs text-[var(--accent-secondary)] font-mono w-20 text-right\">{pointsRedeemed} pts</span>\r\n                                </div>\r\n                                {pointsRedeemed > 0 && <p className=\"text-[10px] text-[var(--accent-secondary)] mt-1\">Potongan: Rp {pointsDiscount.toLocaleString()}</p>}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Summary */}\r\n                    <div className=\"p-3 border-t border-[var(--border-default)] bg-[var(--bg-surface)]\">\r\n                        <div className=\"grid grid-cols-2 gap-x-4 gap-y-1 text-xs\">\r\n                            <div className=\"flex justify-between text-[var(--text-muted)]\"><span>Subtotal</span><span>Rp {subtotal.toLocaleString()}</span></div>\r\n                            <div className=\"flex justify-between text-[var(--text-muted)]\"><span>Tax (10%)</span><span>Rp {tax.toLocaleString()}</span></div>\r\n                            {discountAmount > 0 && <div className=\"flex justify-between text-[var(--accent-primary)]\"><span>Diskon</span><span>-Rp {discountAmount.toLocaleString()}</span></div>}\r\n                            {pointsDiscount > 0 && <div className=\"flex justify-between text-[var(--accent-secondary)]\"><span>Points</span><span>-Rp {pointsDiscount.toLocaleString()}</span></div>}\r\n                        </div>\r\n                        <div className=\"h-px bg-[var(--bg-elevated)] my-2\"></div>\r\n                        <div className=\"flex justify-between text-lg font-bold text-[var(--text-primary)]\">\r\n                            <span>TOTAL</span>\r\n                            <span className=\"text-[var(--accent-primary)]\">Rp {grandTotal.toLocaleString()}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* RIGHT PANEL: Payment Methods */}\r\n                <div className=\"w-1/2 flex flex-col bg-[var(--bg-surface)]\">\r\n                    <div className=\"p-4 border-b border-[var(--border-default)] flex justify-between items-center\">\r\n                        <h3 className=\"text-lg font-bold text-[var(--text-primary)]\">Pembayaran</h3>\r\n                        <div className=\"flex gap-2\">\r\n                            <button onClick={() => setShowPrintPreview(!showPrintPreview)} className=\"p-2 bg-[var(--bg-card)] rounded hover:bg-[var(--bg-elevated)] text-[var(--text-muted)] hover:text-[var(--text-primary)]\">\r\n                                <FileText size={18} />\r\n                            </button>\r\n                            <button onClick={onClose} className=\"p-2 hover:bg-[var(--bg-card)] rounded text-[var(--text-muted)] hover:text-[var(--text-primary)]\"><X size={18} /></button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {showPrintPreview ? (\r\n                        <div className=\"flex-1 overflow-y-auto p-4\">\r\n                            <PrintPreviewContent />\r\n                            <button onClick={handlePrint} className=\"w-full mt-4 py-3 bg-[var(--accent-primary)] text-black font-bold rounded flex items-center justify-center gap-2\">\r\n                                <Printer size={18} /> Cetak Struk\r\n                            </button>\r\n                        </div>\r\n                    ) : (\r\n                        <>\r\n                            <div className=\"flex-1 overflow-y-auto p-4 space-y-3\">\r\n                                {paymentMethods.map((payment, index) => (\r\n                                    <div key={index} className=\"bg-[var(--bg-card)] rounded-lg border border-[var(--border-default)] p-3\">\r\n                                        <div className=\"flex justify-between items-center mb-3\">\r\n                                            <span className=\"text-xs text-[var(--text-muted)]\">Metode {index + 1}</span>\r\n                                            {paymentMethods.length > 1 && (\r\n                                                <button onClick={() => removePayment(index)} className=\"text-red-500 hover:text-red-400\"><Trash2 size={14} /></button>\r\n                                            )}\r\n                                        </div>\r\n\r\n                                        <div className=\"grid grid-cols-3 gap-2 mb-3\">\r\n                                            {[\r\n                                                { method: 'CASH', icon: Banknote, color: 'text-[var(--accent-primary)]' },\r\n                                                { method: 'QRIS', icon: QrCode, color: 'text-[#3b82f6]' },\r\n                                                { method: 'DEBIT', icon: CreditCard, color: 'text-[#a855f7]' }\r\n                                            ].map(({ method, icon: Icon, color }) => (\r\n                                                <button key={method} onClick={() => updatePayment(index, 'method', method)}\r\n                                                    className={`p-3 rounded border flex flex-col items-center gap-1 transition-all ${payment.method === method ? 'bg-[var(--accent-primary)]/10 border-[var(--accent-primary)]' : 'border-[var(--border-default)] hover:border-[var(--accent-primary)]/50'}`}>\r\n                                                    <Icon size={20} className={payment.method === method ? 'text-[var(--accent-primary)]' : color} />\r\n                                                    <span className={`text-[10px] font-bold ${payment.method === method ? 'text-[var(--accent-primary)]' : 'text-[var(--text-muted)]'}`}>{method}</span>\r\n                                                </button>\r\n                                            ))}\r\n                                        </div>\r\n\r\n                                        {/* QRIS QR Code */}\r\n                                        {payment.method === 'QRIS' && (\r\n                                            <div className=\"bg-white rounded p-4 mb-3 flex flex-col items-center\">\r\n                                                <div className=\"bg-black/10 p-4 rounded\"><QrCode size={80} className=\"text-black\" /></div>\r\n                                                <p className=\"text-xs text-gray-600 mt-2\">Scan untuk membayar</p>\r\n                                                <p className=\"text-lg font-bold text-black\">Rp {(index === 0 ? grandTotal : remainingAmount).toLocaleString()}</p>\r\n                                            </div>\r\n                                        )}\r\n\r\n                                        {/* Amount Input */}\r\n                                        <div className=\"relative\">\r\n                                            <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-muted)]\">Rp</span>\r\n                                            <input type=\"number\" value={payment.amount || ''} onChange={(e) => updatePayment(index, 'amount', e.target.value)}\r\n                                                placeholder={(index === 0 ? grandTotal : remainingAmount).toString()}\r\n                                                className=\"w-full bg-[var(--bg-base)] border border-[var(--border-default)] rounded py-2 pl-10 pr-3 text-xl font-mono text-[var(--text-primary)] focus:border-[var(--accent-primary)] outline-none\" />\r\n                                        </div>\r\n\r\n                                        {/* Quick Amount Buttons */}\r\n                                        {payment.method === 'CASH' && (\r\n                                            <div className=\"grid grid-cols-4 gap-2 mt-2\">\r\n                                                {[20000, 50000, 100000, grandTotal].map((amt, i) => (\r\n                                                    <button key={i} onClick={() => updatePayment(index, 'amount', amt)}\r\n                                                        className=\"py-1.5 bg-[var(--bg-base)] rounded text-[10px] text-[var(--accent-primary)] font-mono border border-[var(--border-default)] hover:border-[var(--accent-primary)]\">\r\n                                                        {i === 3 ? 'Pas' : `${(amt / 1000)}k`}\r\n                                                    </button>\r\n                                                ))}\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                ))}\r\n\r\n                                {/* Add Payment Method */}\r\n                                {remainingAmount > 0 && paymentMethods.length < 3 && (\r\n                                    <button onClick={addPaymentMethod} className=\"w-full py-2 border border-dashed border-[var(--border-default)] rounded text-[var(--text-muted)] hover:text-[var(--text-primary)] hover:border-[var(--accent-primary)] text-xs flex items-center justify-center gap-1\">\r\n                                        <Plus size={14} /> Tambah Metode Pembayaran\r\n                                    </button>\r\n                                )}\r\n\r\n                                {/* Payment Summary */}\r\n                                <div className=\"bg-[var(--bg-base)] rounded-lg border border-[var(--border-default)] p-3 space-y-2\">\r\n                                    <div className=\"flex justify-between text-xs text-[var(--text-muted)]\"><span>Total Tagihan</span><span>Rp {grandTotal.toLocaleString()}</span></div>\r\n                                    <div className=\"flex justify-between text-xs text-[var(--text-muted)]\"><span>Diterima</span><span className={totalPaid >= grandTotal ? 'text-[var(--accent-primary)]' : 'text-[var(--accent-secondary)]'}>Rp {totalPaid.toLocaleString()}</span></div>\r\n                                    {remainingAmount > 0 && <div className=\"flex justify-between text-xs text-red-500\"><span>Kurang</span><span>Rp {remainingAmount.toLocaleString()}</span></div>}\r\n                                    {change > 0 && <div className=\"flex justify-between text-sm font-bold text-[var(--accent-primary)]\"><span>Kembalian</span><span>Rp {change.toLocaleString()}</span></div>}\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Action Buttons */}\r\n                            <div className=\"p-4 border-t border-[var(--border-default)]\">\r\n                                <button onClick={handleConfirm} disabled={totalPaid < grandTotal || isProcessing}\r\n                                    className=\"w-full py-4 bg-[var(--accent-primary)] hover:bg-[#16a34a] text-black font-bold text-lg rounded-lg shadow-lg shadow-[#f07000]/20 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\">\r\n                                    {isProcessing ? (\r\n                                        <>\r\n                                            <Loader2 size={20} className=\"animate-spin\" /> Memproses...\r\n                                        </>\r\n                                    ) : (\r\n                                        <>\r\n                                            <Printer size={20} /> Proses & Cetak\r\n                                        </>\r\n                                    )}\r\n                                </button>\r\n                                <button onClick={onClose} className=\"w-full mt-2 py-2 text-[var(--text-muted)] hover:text-[var(--text-primary)] text-sm\">Batal</button>\r\n                            </div>\r\n                        </>\r\n                    )}\r\n                </div>\r\n            </div >\r\n        </div >\r\n    );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1904, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Lenovo/Documents/BilliardOS/app/src/app/dashboard/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useEffect, useCallback, useTransition } from 'react';\r\nimport useSWR from 'swr';\r\nimport { useToast } from '@/components/toast-provider';\r\nimport {\r\n    Clock, Plus, Users, Play, Pause, Square,\r\n    Receipt, ArrowRightLeft, X, LayoutGrid, List, RefreshCw, ChevronRight,\r\n    Banknote, QrCode, CreditCard, Coffee, Printer, Settings, Minus, ShoppingCart,\r\n    Utensils, Cookie, Tag, Star, FileText, Trash2\r\n} from 'lucide-react';\r\nimport { CheckoutModal } from '@/components/CheckoutModal';\r\n\r\nconst fetcher = (url: string) => fetch(url).then(r => r.json());\r\n\r\n// Real-time timer component that calculates billing client-side\r\nconst RealTimeTimer = ({\r\n    startTime,\r\n    endTime,\r\n    hourlyRate,\r\n    isPaused,\r\n    onTimeUp,\r\n    onWarning\r\n}: {\r\n    startTime: string,\r\n    endTime?: string | null,\r\n    hourlyRate: number,\r\n    isPaused?: boolean,\r\n    onTimeUp?: () => void,\r\n    onWarning?: () => void\r\n}) => {\r\n    const [elapsedSeconds, setElapsedSeconds] = useState(0);\r\n    const [warned, setWarned] = useState(false);\r\n    const [expired, setExpired] = useState(false);\r\n\r\n    const isFixedPackage = !!endTime;\r\n    const endTimeMs = endTime ? new Date(endTime).getTime() : 0;\r\n    const startTimeMs = new Date(startTime).getTime();\r\n    const totalPackageSeconds = isFixedPackage ? Math.floor((endTimeMs - startTimeMs) / 1000) : 0;\r\n\r\n    useEffect(() => {\r\n        if (isPaused) return;\r\n\r\n        const updateTimer = () => {\r\n            const now = Date.now();\r\n            const seconds = Math.floor((now - startTimeMs) / 1000);\r\n            setElapsedSeconds(seconds);\r\n\r\n            // For fixed packages, check if time is almost up or expired\r\n            if (isFixedPackage && !expired) {\r\n                const remainingSeconds = Math.floor((endTimeMs - now) / 1000);\r\n\r\n                // Warning at 5 minutes (300 seconds)\r\n                if (remainingSeconds <= 300 && remainingSeconds > 0 && !warned) {\r\n                    setWarned(true);\r\n                    onWarning?.();\r\n                }\r\n\r\n                // Time's up\r\n                if (remainingSeconds <= 0) {\r\n                    setExpired(true);\r\n                    onTimeUp?.();\r\n                }\r\n            }\r\n        };\r\n\r\n        updateTimer(); // Initial\r\n        const interval = setInterval(updateTimer, 1000);\r\n        return () => clearInterval(interval);\r\n    }, [startTimeMs, endTimeMs, isFixedPackage, isPaused, warned, expired, onTimeUp, onWarning]);\r\n\r\n    const totalMinutes = Math.floor(elapsedSeconds / 60);\r\n    const hours = Math.floor(totalMinutes / 60);\r\n    const mins = totalMinutes % 60;\r\n    const secs = elapsedSeconds % 60;\r\n\r\n    // For fixed package: show fixed price, for open: calculate\r\n    const bill = isFixedPackage\r\n        ? Math.ceil((totalPackageSeconds / 3600) * hourlyRate)\r\n        : Math.ceil((elapsedSeconds / 3600) * hourlyRate);\r\n\r\n    // Countdown display for fixed packages\r\n    const remainingSeconds = isFixedPackage ? Math.max(0, totalPackageSeconds - elapsedSeconds) : 0;\r\n    const remainMins = Math.floor(remainingSeconds / 60);\r\n    const remainSecs = remainingSeconds % 60;\r\n\r\n    // Time display - show elapsed or remaining based on package type\r\n    const timeDisplay = hours > 0\r\n        ? `${hours.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`\r\n        : `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\r\n\r\n    // Determine styling based on remaining time\r\n    const isAlmostUp = isFixedPackage && remainingSeconds <= 300 && remainingSeconds > 0;\r\n    const isTimeUp = isFixedPackage && remainingSeconds <= 0;\r\n    const timerColor = isTimeUp ? 'text-red-500' : isAlmostUp ? 'text-[var(--accent-secondary)]' : 'text-[var(--text-primary)]';\r\n    const billColor = isTimeUp ? 'text-red-500' : 'text-[var(--accent-primary)]';\r\n\r\n    return (\r\n        <div className=\"text-center w-full\">\r\n            <div className={`text-2xl font-mono font-bold tracking-widest ${timerColor} drop-shadow-md mb-1`}>\r\n                {timeDisplay}\r\n            </div>\r\n\r\n            {/* Countdown info for fixed packages */}\r\n            {isFixedPackage && (\r\n                <div className={`text-[10px] font-mono mb-1 ${isTimeUp ? 'text-red-500 animate-pulse' : isAlmostUp ? 'text-[var(--accent-secondary)]' : 'text-[var(--text-muted)]'}`}>\r\n                    {isTimeUp ? ' WAKTU HABIS!' : `Sisa: ${remainMins}:${remainSecs.toString().padStart(2, '0')}`}\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"bg-[var(--bg-overlay)] rounded py-1 px-2 border border-white/10 w-full flex justify-between items-center\">\r\n                <span className=\"text-[8px] uppercase text-[var(--text-muted)] font-bold tracking-wider\">\r\n                    {isFixedPackage ? 'Paket' : 'Bill'}\r\n                </span>\r\n                <span className={`font-mono font-bold ${billColor} text-xs`}>\r\n                    Rp {bill.toLocaleString()}\r\n                </span>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// Compact timer for list view\r\nconst ListViewTimer = ({ startTime, hourlyRate }: { startTime: string, hourlyRate: number }) => {\r\n    const [elapsedSeconds, setElapsedSeconds] = useState(0);\r\n\r\n    useEffect(() => {\r\n        const start = new Date(startTime).getTime();\r\n\r\n        const updateTimer = () => {\r\n            const now = Date.now();\r\n            const seconds = Math.floor((now - start) / 1000);\r\n            setElapsedSeconds(seconds);\r\n        };\r\n\r\n        updateTimer();\r\n        const interval = setInterval(updateTimer, 1000);\r\n        return () => clearInterval(interval);\r\n    }, [startTime]);\r\n\r\n    const totalMinutes = Math.floor(elapsedSeconds / 60);\r\n    const hours = Math.floor(totalMinutes / 60);\r\n    const mins = totalMinutes % 60;\r\n    const secs = elapsedSeconds % 60;\r\n    // Calculate bill per second for real-time update\r\n    const bill = Math.ceil((elapsedSeconds / 3600) * hourlyRate);\r\n\r\n    const timeDisplay = hours > 0\r\n        ? `${hours.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`\r\n        : `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\r\n\r\n    return (\r\n        <>\r\n            <div className=\"flex flex-col items-end\">\r\n                <span className=\"text-xs text-[var(--text-muted)] uppercase font-bold\">Duration</span>\r\n                <span className=\"font-mono font-bold text-[var(--text-primary)] text-lg\">\r\n                    {timeDisplay}\r\n                </span>\r\n            </div>\r\n            <div className=\"flex flex-col items-end min-w-[100px]\">\r\n                <span className=\"text-xs text-[var(--text-muted)] uppercase font-bold\">Current Bill</span>\r\n                <span className=\"font-mono font-bold text-[var(--accent-primary)] text-lg\">Rp {bill.toLocaleString()}</span>\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\n// Real-time bill display for sidebar\r\nconst RealTimeBill = ({ startTime, hourlyRate }: { startTime: string, hourlyRate: number }) => {\r\n    const [elapsedSeconds, setElapsedSeconds] = useState(0);\r\n\r\n    useEffect(() => {\r\n        const start = new Date(startTime).getTime();\r\n\r\n        const updateTimer = () => {\r\n            const now = Date.now();\r\n            const seconds = Math.floor((now - start) / 1000);\r\n            setElapsedSeconds(seconds);\r\n        };\r\n\r\n        updateTimer();\r\n        const interval = setInterval(updateTimer, 1000);\r\n        return () => clearInterval(interval);\r\n    }, [startTime]);\r\n\r\n    const bill = Math.ceil((elapsedSeconds / 3600) * hourlyRate);\r\n\r\n    return (\r\n        <span className=\"font-bold text-lg text-[var(--accent-primary)] font-mono\">\r\n            Rp {bill.toLocaleString()}\r\n        </span>\r\n    );\r\n};\r\n\r\nconst WaitingListSidebar = ({ onOpenWalkin, onOpenReservation }: { onOpenWalkin: () => void, onOpenReservation: () => void }) => {\r\n    const { data: resData } = useSWR('/api/reservations', fetcher);\r\n    const reservations = resData?.data || [];\r\n    const [activeTab, setActiveTab] = useState<'walkin' | 'reservation'>('walkin');\r\n\r\n    const walkIns = reservations.filter((r: any) => r.notes?.includes('WALK-IN') && r.status === 'PENDING');\r\n    const futureReservations = reservations.filter((r: any) => !r.notes?.includes('WALK-IN') && r.status === 'CONFIRMED');\r\n\r\n    const list = activeTab === 'walkin' ? walkIns : futureReservations;\r\n\r\n    return (\r\n        <>\r\n            <div className=\"p-4 border-b border-[var(--border-default)] bg-[var(--bg-card)]\">\r\n                <h3 className=\"text-lg font-bold text-[var(--text-primary)] mb-3\">Antrian & Jadwal</h3>\r\n                <div className=\"flex bg-[var(--bg-base)] rounded p-1 border border-[var(--border-default)]\">\r\n                    <button\r\n                        onClick={() => setActiveTab('walkin')}\r\n                        className={`flex-1 py-1.5 text-xs font-bold rounded transition-colors ${activeTab === 'walkin' ? 'bg-[var(--accent-primary)] text-black' : 'text-[var(--text-muted)] hover:text-[var(--text-primary)]'}`}\r\n                    >\r\n                        Walk-In ({walkIns.length})\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setActiveTab('reservation')}\r\n                        className={`flex-1 py-1.5 text-xs font-bold rounded transition-colors ${activeTab === 'reservation' ? 'bg-[var(--accent-secondary)] text-black' : 'text-[var(--text-muted)] hover:text-[var(--text-primary)]'}`}\r\n                    >\r\n                        Reservasi ({futureReservations.length})\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"p-4 border-b border-[var(--border-default)]\">\r\n                <button\r\n                    onClick={() => activeTab === 'walkin' ? onOpenWalkin() : onOpenReservation()}\r\n                    className=\"w-full py-2 bg-[var(--bg-elevated)] hover:bg-[var(--accent-primary)] hover:text-black text-[var(--text-primary)] text-sm font-bold rounded border border-[var(--accent-primary)]/30 transition-colors flex items-center justify-center gap-2\"\r\n                >\r\n                    <Plus size={16} /> {activeTab === 'walkin' ? 'Tambah Walk-In' : 'Buat Reservasi'}\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"flex-1 overflow-y-auto p-2\">\r\n                {list.length === 0 ? (\r\n                    <div className=\"text-center text-[var(--text-muted)] py-8 text-sm italic\">\r\n                        Belum ada data.\r\n                    </div>\r\n                ) : (\r\n                    list.map((item: any, idx: number) => (\r\n                        <div key={item.id} className=\"flex items-center gap-3 p-3 border-b border-[var(--border-default)] hover:bg-[var(--bg-card)] rounded transition-colors group\">\r\n                            <div className={`size-8 rounded-full flex items-center justify-center text-xs font-bold border \r\n                            ${activeTab === 'walkin' ? 'bg-[var(--bg-elevated)] text-[var(--text-muted)] border-[var(--border-default)]' : 'bg-[var(--accent-secondary)]/10 text-[var(--accent-secondary)] border-[var(--accent-secondary)]/30'}`}>\r\n                                {activeTab === 'walkin' ? idx + 1 : <Clock size={14} />}\r\n                            </div>\r\n                            <div className=\"flex-1\">\r\n                                <div className=\"flex justify-between mb-0.5\">\r\n                                    <span className=\"font-bold text-sm text-[var(--text-primary)]\">{item.customerName}</span>\r\n                                    <span className=\"text-xs font-mono text-[var(--accent-secondary)]\">{new Date(item.bookingTime).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</span>\r\n                                </div>\r\n                                <div className=\"flex gap-2 text-xs text-[var(--text-muted)]\">\r\n                                    <span>{item.pax} Org</span>\r\n                                    <span></span>\r\n                                    <span>{item.tableType}</span>\r\n                                </div>\r\n                            </div>\r\n                            <button className=\"p-2 hover:bg-[var(--accent-primary)]/20 hover:text-[var(--accent-primary)] rounded text-[var(--text-muted)] transition-colors\">\r\n                                <ChevronRight size={16} />\r\n                            </button>\r\n                        </div>\r\n                    ))\r\n                )}\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\n\r\nconst fetchMembers = async (query: string) => {\r\n    if (!query) return [];\r\n    const res = await fetch(`/api/members?q=${query}`);\r\n    const data = await res.json();\r\n    return data.data || [];\r\n};\r\n\r\n// Billing Options Modal - Fixed Hours or Open Bill\r\nconst BillingOptionsModal = ({\r\n    hourlyRate,\r\n    onClose,\r\n    onSelect\r\n}: {\r\n    hourlyRate: number,\r\n    onClose: () => void,\r\n    onSelect: (type: 'open' | number, customerName: string) => void\r\n}) => {\r\n    const [customerName, setCustomerName] = useState('');\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n            <div className=\"bg-[var(--bg-surface)] border border-[var(--border-default)] rounded-xl shadow-2xl w-full max-w-md overflow-hidden\">\r\n                <div className=\"p-5 border-b border-[var(--border-default)] flex justify-between items-center\">\r\n                    <h3 className=\"text-lg font-bold text-[var(--text-primary)]\">Mulai Sesi Baru</h3>\r\n                    <button onClick={onClose} className=\"text-[var(--text-muted)] hover:text-[var(--text-primary)]\">\r\n                        <X size={20} />\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"p-5 space-y-4\">\r\n                    {/* Customer Name Input */}\r\n                    <div>\r\n                        <label className=\"text-xs font-bold text-[var(--text-muted)] uppercase tracking-wider mb-2 block\">\r\n                            Nama Customer (Opsional)\r\n                        </label>\r\n                        <input\r\n                            type=\"text\"\r\n                            value={customerName}\r\n                            onChange={(e) => setCustomerName(e.target.value)}\r\n                            placeholder=\"Isi nama customer...\"\r\n                            className=\"w-full bg-[var(--bg-base)] border border-[var(--border-default)] rounded-lg p-3 text-[var(--text-primary)] focus:border-[var(--accent-primary)] outline-none transition-colors\"\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"border-t border-[var(--border-default)] my-4\"></div>\r\n\r\n                    <h4 className=\"text-xs font-bold text-[var(--text-muted)] uppercase tracking-wider mb-3\">\r\n                        Pilih Mode Billing\r\n                    </h4>\r\n\r\n                    {/* Open Bill Option */}\r\n                    <button\r\n                        onClick={() => onSelect('open', customerName)}\r\n                        className=\"w-full p-4 bg-[var(--bg-card)] border border-[var(--border-default)] rounded-lg hover:border-[var(--accent-primary)] transition-all flex items-center gap-4 group\"\r\n                    >\r\n                        <div className=\"p-3 bg-[var(--accent-primary)]/20 rounded-lg text-[var(--accent-primary)] group-hover:bg-[var(--accent-primary)] group-hover:text-black transition-colors\">\r\n                            <Clock size={24} />\r\n                        </div>\r\n                        <div className=\"text-left flex-1\">\r\n                            <h4 className=\"font-bold text-[var(--text-primary)]\">Open Bill</h4>\r\n                            <p className=\"text-xs text-[var(--text-muted)]\">Bayar sesuai durasi bermain</p>\r\n                        </div>\r\n                        <span className=\"text-xs text-[var(--accent-primary)] font-mono\">Rp {hourlyRate.toLocaleString()}/jam</span>\r\n                    </button>\r\n\r\n                    {/* Fixed Hours Options */}\r\n                    <div className=\"pt-2\">\r\n                        <h4 className=\"text-xs font-bold text-[var(--text-muted)] uppercase tracking-wider mb-3\">\r\n                            Paket Jam (Fixed)\r\n                        </h4>\r\n                        <div className=\"grid grid-cols-5 gap-2\">\r\n                            {[1, 2, 3, 4, 5].map((hours) => (\r\n                                <button\r\n                                    key={hours}\r\n                                    onClick={() => onSelect(hours, customerName)}\r\n                                    className=\"p-3 bg-[var(--bg-base)] border border-[var(--border-default)] rounded-lg hover:border-[var(--accent-secondary)] hover:bg-[var(--accent-secondary)]/10 transition-all flex flex-col items-center group\"\r\n                                >\r\n                                    <span className=\"text-xl font-bold text-[var(--text-primary)] group-hover:text-[var(--accent-secondary)]\">{hours}</span>\r\n                                    <span className=\"text-[10px] text-[var(--text-muted)]\">JAM</span>\r\n                                    <span className=\"text-[10px] text-[var(--accent-secondary)] font-mono mt-1\">\r\n                                        Rp {(hours * hourlyRate).toLocaleString()}\r\n                                    </span>\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// CheckoutModal imported from @/components/CheckoutModal\r\nconst TableTransferModal = ({ sourceTable, tables, onClose, onConfirm }: { sourceTable: any, tables: any[], onClose: () => void, onConfirm: (targetId: string) => void }) => {\r\n    const [selectedTarget, setSelectedTarget] = useState<string | null>(null);\r\n    const availableTables = tables.filter(t => t.status === 'AVAILABLE' && t.id !== sourceTable.id);\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n            <div className=\"bg-[var(--bg-surface)] border border-[var(--border-default)] rounded-xl shadow-2xl w-full max-w-md overflow-hidden\">\r\n                <div className=\"p-4 border-b border-[var(--border-default)] bg-[var(--bg-card)] flex justify-between items-center\">\r\n                    <h3 className=\"text-lg font-bold text-[var(--text-primary)]\">Pindah Meja</h3>\r\n                    <button onClick={onClose} className=\"text-[var(--text-muted)] hover:text-[var(--text-primary)]\"><X size={20} /></button>\r\n                </div>\r\n\r\n                <div className=\"p-6\">\r\n                    <p className=\"text-[var(--text-muted)] text-sm mb-4\">Pindahkan sesi dari <strong className=\"text-[var(--text-primary)]\">{sourceTable.name}</strong> ke:</p>\r\n\r\n                    <div className=\"grid grid-cols-2 gap-3 max-h-[300px] overflow-y-auto mb-6\">\r\n                        {availableTables.map(t => (\r\n                            <button\r\n                                key={t.id}\r\n                                onClick={() => setSelectedTarget(t.id)}\r\n                                className={`p-3 rounded border text-left transition-all\r\n                                    ${selectedTarget === t.id ? 'bg-[var(--accent-primary)]/20 border-[var(--accent-primary)] text-[var(--text-primary)]' : 'bg-[var(--bg-base)] border-[var(--border-default)] text-[var(--text-muted)] hover:border-slate-500'}\r\n                                `}\r\n                            >\r\n                                <span className=\"font-bold block\">{t.name}</span>\r\n                                <span className=\"text-xs opacity-70\">{t.type}</span>\r\n                            </button>\r\n                        ))}\r\n                        {availableTables.length === 0 && (\r\n                            <div className=\"col-span-2 text-center text-[var(--text-muted)] py-4 italic\">\r\n                                Tidak ada meja kosong tersedia.\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    <button\r\n                        onClick={() => selectedTarget && onConfirm(selectedTarget)}\r\n                        disabled={!selectedTarget}\r\n                        className=\"w-full py-3 bg-[var(--accent-secondary)] hover:bg-yellow-500 text-black font-bold rounded-lg shadow-lg disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                    >\r\n                        Konfirmasi Pindah\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst PinModal = ({ validPin, onClose, onSuccess }: { validPin: string, onClose: () => void, onSuccess: () => void }) => {\r\n    const [pin, setPin] = useState('');\r\n    const [error, setError] = useState(false);\r\n\r\n    const handleSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (pin === validPin) {\r\n            onSuccess();\r\n        } else {\r\n            setError(true);\r\n            setPin('');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n            <div className=\"bg-[var(--bg-card)] border border-[var(--border-default)] rounded-xl p-6 w-80\">\r\n                <h3 className=\"text-[var(--text-primary)] font-bold text-center mb-4\">Manager PIN Required</h3>\r\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                    <input\r\n                        type=\"password\"\r\n                        maxLength={6}\r\n                        autoFocus\r\n                        className={`w-full bg-black border rounded-lg text-center text-2xl tracking-widest py-3 text-[var(--text-primary)] outline-none ${error ? 'border-red-500' : 'border-[var(--border-default)] focus:border-[var(--accent-primary)]'}`}\r\n                        value={pin}\r\n                        onChange={e => { setPin(e.target.value); setError(false); }}\r\n                        placeholder=\"\"\r\n                    />\r\n                    {error && <p className=\"text-red-500 text-xs text-center\">PIN Salah</p>}\r\n                    <div className=\"grid grid-cols-2 gap-2\">\r\n                        <button type=\"button\" onClick={onClose} className=\"py-2 text-[var(--text-muted)] hover:text-[var(--text-primary)]\">Cancel</button>\r\n                        <button type=\"submit\" className=\"py-2 bg-[var(--accent-primary)] text-black font-bold rounded hover:bg-[#16a34a]\">Enter</button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst PrinterSettingsModal = ({ onClose }: { onClose: () => void }) => {\r\n    const [saved, setSaved] = useState(false);\r\n\r\n    // Simulate settings (in real app, useLocalStorage)\r\n    const [settings, setSettings] = useState({\r\n        barPrinter: '192.168.1.101',\r\n        kitchenPrinter: '192.168.1.102',\r\n        cashierPrinter: 'USB-001'\r\n    });\r\n\r\n    const handleSave = () => {\r\n        // localStorage.setItem('printer_settings', JSON.stringify(settings)); \r\n        setSaved(true);\r\n        setTimeout(() => { setSaved(false); onClose(); }, 1500);\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n            <div className=\"bg-[var(--bg-surface)] border border-[var(--border-default)] rounded-xl p-6 w-full max-w-md\">\r\n                <h3 className=\"text-xl font-bold text-[var(--text-primary)] mb-6 flex items-center gap-2\"><Printer size={20} /> Printer Configuration</h3>\r\n\r\n                <div className=\"space-y-4 mb-8\">\r\n                    <div>\r\n                        <label className=\"text-xs text-[var(--text-muted)] uppercase font-bold block mb-1\">Bar Printer (Drinks)</label>\r\n                        <input type=\"text\" value={settings.barPrinter} onChange={e => setSettings({ ...settings, barPrinter: e.target.value })} className=\"w-full bg-[var(--bg-base)] border border-[var(--border-default)] rounded p-2 text-[var(--text-primary)] text-sm\" />\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"text-xs text-[var(--text-muted)] uppercase font-bold block mb-1\">Kitchen Printer (Food)</label>\r\n                        <input type=\"text\" value={settings.kitchenPrinter} onChange={e => setSettings({ ...settings, kitchenPrinter: e.target.value })} className=\"w-full bg-[var(--bg-base)] border border-[var(--border-default)] rounded p-2 text-[var(--text-primary)] text-sm\" />\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"text-xs text-[var(--text-muted)] uppercase font-bold block mb-1\">Cashier Printer (Receipts)</label>\r\n                        <input type=\"text\" value={settings.cashierPrinter} onChange={e => setSettings({ ...settings, cashierPrinter: e.target.value })} className=\"w-full bg-[var(--bg-base)] border border-[var(--border-default)] rounded p-2 text-[var(--text-primary)] text-sm\" />\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex gap-2\">\r\n                    <button onClick={onClose} className=\"flex-1 py-3 text-[var(--text-muted)] hover:text-[var(--text-primary)] font-bold border border-[var(--border-default)] rounded-lg\">Cancel</button>\r\n                    <button onClick={handleSave} className=\"flex-1 py-3 bg-[var(--accent-primary)] text-black font-bold rounded-lg hover:bg-[#16a34a]\">\r\n                        {saved ? 'Saved!' : 'Save Configuration'}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// Add Order Modal (F&B)\r\nconst AddOrderModal = ({ sessionId, onClose, onSuccess }: { sessionId: number, onClose: () => void, onSuccess: () => void }) => {\r\n    const { data: productsData } = useSWR('/api/products', fetcher);\r\n    const products = productsData?.data || [];\r\n    const [cart, setCart] = useState<{ [id: string]: { product: any, qty: number } }>({});\r\n    const [categoryFilter, setCategoryFilter] = useState<string>('ALL');\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n    const addToCart = (product: any) => {\r\n        setCart(prev => {\r\n            const existing = prev[product.id];\r\n            return {\r\n                ...prev,\r\n                [product.id]: {\r\n                    product,\r\n                    qty: existing ? existing.qty + 1 : 1\r\n                }\r\n            };\r\n        });\r\n    };\r\n\r\n    const updateQty = (id: string, delta: number) => {\r\n        setCart(prev => {\r\n            const existing = prev[id];\r\n            if (!existing) return prev;\r\n            const newQty = existing.qty + delta;\r\n            if (newQty <= 0) {\r\n                const { [id]: _, ...rest } = prev;\r\n                return rest;\r\n            }\r\n            return { ...prev, [id]: { ...existing, qty: newQty } };\r\n        });\r\n    };\r\n\r\n    const cartItems = Object.values(cart);\r\n    const total = cartItems.reduce((sum, item) => sum + (Number(item.product.price) * item.qty), 0);\r\n\r\n    const filteredProducts = products.filter((p: any) => categoryFilter === 'ALL' || p.category === categoryFilter);\r\n\r\n    const getCategoryIcon = (cat: string) => {\r\n        switch (cat) {\r\n            case 'FOOD': return <Utensils size={16} />;\r\n            case 'DRINK': return <Coffee size={16} />;\r\n            case 'SNACK': return <Cookie size={16} />;\r\n            default: return <Coffee size={16} />;\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async () => {\r\n        if (cartItems.length === 0) return;\r\n        setIsSubmitting(true);\r\n\r\n        try {\r\n            const items = cartItems.map(item => ({\r\n                id: item.product.id,\r\n                name: item.product.name,\r\n                price: Number(item.product.price),\r\n                qty: item.qty,\r\n                type: 'PRODUCT'\r\n            }));\r\n\r\n            const res = await fetch('/api/transactions', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    sessionId,\r\n                    paymentMethod: 'CASH', // Quick order, payment later at checkout\r\n                    items\r\n                })\r\n            });\r\n\r\n            if (!res.ok) {\r\n                const errorData = await res.json();\r\n                throw new Error(errorData.error || 'Failed to create order');\r\n            }\r\n            onSuccess();\r\n        } catch (error: any) {\r\n            console.error('Order failed:', error);\r\n            alert('Gagal membuat pesanan: ' + (error.message || 'Unknown error'));\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n            <div className=\"bg-[var(--bg-surface)] border border-[var(--border-default)] rounded-xl shadow-2xl w-full max-w-4xl h-[600px] flex overflow-hidden\">\r\n                {/* Products Grid */}\r\n                <div className=\"flex-1 flex flex-col border-r border-[var(--border-default)]\">\r\n                    <div className=\"p-4 border-b border-[var(--border-default)] bg-[var(--bg-card)] flex justify-between items-center\">\r\n                        <h3 className=\"text-lg font-bold text-[var(--text-primary)]\">Tambah Pesanan F&B</h3>\r\n                        <button onClick={onClose} className=\"text-[var(--text-muted)] hover:text-[var(--text-primary)]\"><X size={20} /></button>\r\n                    </div>\r\n\r\n                    {/* Category Tabs */}\r\n                    <div className=\"p-3 border-b border-[var(--border-default)] flex gap-2\">\r\n                        {['ALL', 'FOOD', 'DRINK', 'SNACK'].map(cat => (\r\n                            <button\r\n                                key={cat}\r\n                                onClick={() => setCategoryFilter(cat)}\r\n                                className={`px-3 py-1.5 text-xs font-bold rounded transition-colors\r\n                                    ${categoryFilter === cat ? 'bg-[var(--accent-primary)] text-black' : 'bg-[var(--bg-card)] text-[var(--text-muted)] hover:text-[var(--text-primary)]'}`}\r\n                            >\r\n                                {cat}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n\r\n                    {/* Products */}\r\n                    <div className=\"flex-1 overflow-y-auto p-4 grid grid-cols-3 gap-3 content-start\">\r\n                        {filteredProducts.map((p: any) => (\r\n                            <button\r\n                                key={p.id}\r\n                                onClick={() => addToCart(p)}\r\n                                className=\"bg-[var(--bg-base)] border border-[var(--border-default)] rounded-lg p-3 text-left hover:border-[var(--accent-primary)] transition-colors group\"\r\n                            >\r\n                                <div className=\"flex items-center gap-2 mb-2\">\r\n                                    <div className=\"p-1.5 rounded bg-[var(--accent-primary)]/10 text-[var(--accent-primary)]\">\r\n                                        {getCategoryIcon(p.category)}\r\n                                    </div>\r\n                                    <span className=\"text-[10px] text-[var(--text-muted)] uppercase font-bold\">{p.category}</span>\r\n                                </div>\r\n                                <h4 className=\"font-bold text-[var(--text-primary)] text-sm truncate mb-1 group-hover:text-[var(--accent-primary)]\">{p.name}</h4>\r\n                                <p className=\"text-[var(--accent-primary)] font-mono text-sm\">Rp {Number(p.price).toLocaleString()}</p>\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Cart */}\r\n                <div className=\"w-[280px] flex flex-col bg-[var(--bg-base)]\">\r\n                    <div className=\"p-4 border-b border-[var(--border-default)] flex items-center gap-2\">\r\n                        <ShoppingCart size={18} className=\"text-[var(--accent-primary)]\" />\r\n                        <h4 className=\"font-bold text-[var(--text-primary)]\">Keranjang ({cartItems.length})</h4>\r\n                    </div>\r\n\r\n                    <div className=\"flex-1 overflow-y-auto p-3 space-y-2\">\r\n                        {cartItems.length === 0 ? (\r\n                            <p className=\"text-center text-[var(--text-muted)] text-sm py-8 italic\">Keranjang kosong</p>\r\n                        ) : (\r\n                            cartItems.map(item => (\r\n                                <div key={item.product.id} className=\"bg-[var(--bg-surface)] border border-[var(--border-default)] rounded p-2\">\r\n                                    <div className=\"flex justify-between items-start mb-2\">\r\n                                        <span className=\"font-medium text-[var(--text-primary)] text-sm truncate flex-1\">{item.product.name}</span>\r\n                                        <span className=\"text-[var(--accent-primary)] font-mono text-xs\">Rp {(Number(item.product.price) * item.qty).toLocaleString()}</span>\r\n                                    </div>\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <button onClick={() => updateQty(item.product.id, -1)} className=\"p-1 bg-[var(--bg-elevated)] rounded text-[var(--text-muted)] hover:text-[var(--text-primary)]\"><Minus size={12} /></button>\r\n                                        <span className=\"text-[var(--text-primary)] text-sm font-mono w-6 text-center\">{item.qty}</span>\r\n                                        <button onClick={() => updateQty(item.product.id, 1)} className=\"p-1 bg-[var(--bg-elevated)] rounded text-[var(--text-muted)] hover:text-[var(--text-primary)]\"><Plus size={12} /></button>\r\n                                    </div>\r\n                                </div>\r\n                            ))\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"p-4 border-t border-[var(--border-default)]\">\r\n                        <div className=\"flex justify-between items-center mb-4\">\r\n                            <span className=\"text-[var(--text-muted)]\">Total</span>\r\n                            <span className=\"text-xl font-bold text-[var(--accent-primary)] font-mono\">Rp {total.toLocaleString()}</span>\r\n                        </div>\r\n                        <button\r\n                            onClick={handleSubmit}\r\n                            disabled={cartItems.length === 0 || isSubmitting}\r\n                            className=\"w-full py-3 bg-[var(--accent-primary)] hover:bg-[#16a34a] text-black font-bold rounded-lg disabled:opacity-50\"\r\n                        >\r\n                            {isSubmitting ? 'Memproses...' : 'Tambah ke Bill'}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// Walk-in Modal\r\nconst WalkinModal = ({ tables, onClose, onSuccess }: { tables: any[], onClose: () => void, onSuccess: () => void }) => {\r\n    const [customerName, setCustomerName] = useState('');\r\n    const [pax, setPax] = useState(2);\r\n    const [tableType, setTableType] = useState<'REGULAR' | 'VIP'>('REGULAR');\r\n    const [selectedTable, setSelectedTable] = useState<string | null>(null);\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n    const availableTables = tables.filter((t: any) => t.status === 'AVAILABLE' && t.type === tableType);\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!selectedTable || !customerName) return;\r\n\r\n        setIsSubmitting(true);\r\n        try {\r\n            // Create reservation with WALK-IN note\r\n            const res = await fetch('/api/reservations', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    customerName,\r\n                    phone: '-',\r\n                    pax,\r\n                    tableType,\r\n                    bookingDate: new Date().toISOString().split('T')[0],\r\n                    bookingTime: new Date().toTimeString().slice(0, 5), // HH:MM format\r\n                    notes: 'WALK-IN'\r\n                })\r\n            });\r\n\r\n            if (!res.ok) throw new Error('Failed to create walk-in');\r\n\r\n            // Start the session immediately\r\n            const startRes = await fetch(`/api/tables/${selectedTable}/start`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    customerName,\r\n                    billingType: 'open'\r\n                })\r\n            });\r\n\r\n            if (!startRes.ok) throw new Error('Failed to start session');\r\n\r\n            onSuccess();\r\n        } catch (error) {\r\n            console.error(error);\r\n            alert('Gagal membuat walk-in');\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n            <div className=\"bg-[var(--bg-surface)] border border-[var(--border-default)] rounded-xl w-full max-w-md\">\r\n                <div className=\"p-4 border-b border-[var(--border-default)] flex justify-between items-center\">\r\n                    <h3 className=\"text-lg font-bold text-[var(--text-primary)]\">Tambah Walk-In</h3>\r\n                    <button onClick={onClose} className=\"text-[var(--text-muted)] hover:text-[var(--text-primary)]\"><X size={20} /></button>\r\n                </div>\r\n                <form onSubmit={handleSubmit} className=\"p-4 space-y-4\">\r\n                    <div>\r\n                        <label className=\"text-xs text-[var(--text-muted)] uppercase font-bold block mb-1\">Nama Customer</label>\r\n                        <input type=\"text\" value={customerName} onChange={e => setCustomerName(e.target.value)} required\r\n                            className=\"w-full bg-[var(--bg-base)] border border-[var(--border-default)] rounded p-2 text-[var(--text-primary)]\" />\r\n                    </div>\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <div>\r\n                            <label className=\"text-xs text-[var(--text-muted)] uppercase font-bold block mb-1\">Jumlah Orang</label>\r\n                            <input type=\"number\" min=\"1\" value={pax} onChange={e => setPax(Number(e.target.value))}\r\n                                className=\"w-full bg-[var(--bg-base)] border border-[var(--border-default)] rounded p-2 text-[var(--text-primary)]\" />\r\n                        </div>\r\n                        <div>\r\n                            <label className=\"text-xs text-[var(--text-muted)] uppercase font-bold block mb-1\">Tipe Meja</label>\r\n                            <select value={tableType} onChange={e => setTableType(e.target.value as any)}\r\n                                className=\"w-full bg-[var(--bg-base)] border border-[var(--border-default)] rounded p-2 text-[var(--text-primary)]\">\r\n                                <option value=\"REGULAR\">Regular</option>\r\n                                <option value=\"VIP\">VIP</option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"text-xs text-[var(--text-muted)] uppercase font-bold block mb-2\">Pilih Meja</label>\r\n                        <div className=\"grid grid-cols-3 gap-2 max-h-48 overflow-y-auto\">\r\n                            {availableTables.map((t: any) => (\r\n                                <button\r\n                                    key={t.id}\r\n                                    type=\"button\"\r\n                                    onClick={() => setSelectedTable(t.id)}\r\n                                    className={`p-3 border rounded text-sm font-bold transition-colors ${selectedTable === t.id\r\n                                        ? 'bg-[var(--accent-primary)] text-black border-[var(--accent-primary)]'\r\n                                        : 'bg-[var(--bg-base)] text-[var(--text-primary)] border-[var(--border-default)] hover:border-[var(--accent-primary)]/50'\r\n                                        }`}\r\n                                >\r\n                                    {t.name}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                        {availableTables.length === 0 && (\r\n                            <p className=\"text-sm text-[var(--text-muted)] text-center py-4\">Tidak ada meja tersedia</p>\r\n                        )}\r\n                    </div>\r\n                    <button type=\"submit\" disabled={!selectedTable || !customerName || isSubmitting}\r\n                        className=\"w-full py-3 bg-[var(--accent-primary)] hover:bg-[#16a34a] text-black font-bold rounded disabled:opacity-50\">\r\n                        {isSubmitting ? 'Memproses...' : 'Start Session'}\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// Reservation Modal\r\nconst ReservationModal = ({ onClose, onSuccess }: { onClose: () => void, onSuccess: () => void }) => {\r\n    const [customerName, setCustomerName] = useState('');\r\n    const [phone, setPhone] = useState('');\r\n    const [pax, setPax] = useState(2);\r\n    const [tableType, setTableType] = useState<'REGULAR' | 'VIP'>('REGULAR');\r\n    const [bookingDate, setBookingDate] = useState(new Date().toISOString().split('T')[0]);\r\n    const [bookingTime, setBookingTime] = useState('19:00');\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setIsSubmitting(true);\r\n\r\n        try {\r\n            const res = await fetch('/api/reservations', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    customerName,\r\n                    phone,\r\n                    pax,\r\n                    tableType,\r\n                    bookingDate,\r\n                    bookingTime // Just send the time string (HH:MM)\r\n                })\r\n            });\r\n\r\n            if (!res.ok) throw new Error('Failed to create reservation');\r\n            onSuccess();\r\n        } catch (error) {\r\n            console.error(error);\r\n            alert('Gagal membuat reservasi');\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n            <div className=\"bg-[var(--bg-surface)] border border-[var(--border-default)] rounded-xl w-full max-w-md\">\r\n                <div className=\"p-4 border-b border-[var(--border-default)] flex justify-between items-center\">\r\n                    <h3 className=\"text-lg font-bold text-[var(--text-primary)]\">Buat Reservasi</h3>\r\n                    <button onClick={onClose} className=\"text-[var(--text-muted)] hover:text-[var(--text-primary)]\"><X size={20} /></button>\r\n                </div>\r\n                <form onSubmit={handleSubmit} className=\"p-4 space-y-4\">\r\n                    <div>\r\n                        <label className=\"text-xs text-[var(--text-muted)] uppercase font-bold block mb-1\">Nama Customer</label>\r\n                        <input type=\"text\" value={customerName} onChange={e => setCustomerName(e.target.value)} required\r\n                            className=\"w-full bg-[var(--bg-base)] border border-[var(--border-default)] rounded p-2 text-[var(--text-primary)]\" />\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"text-xs text-[var(--text-muted)] uppercase font-bold block mb-1\">No. HP</label>\r\n                        <input type=\"tel\" value={phone} onChange={e => setPhone(e.target.value)} required\r\n                            className=\"w-full bg-[var(--bg-base)] border border-[var(--border-default)] rounded p-2 text-[var(--text-primary)]\" />\r\n                    </div>\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <div>\r\n                            <label className=\"text-xs text-[var(--text-muted)] uppercase font-bold block mb-1\">Jumlah Orang</label>\r\n                            <input type=\"number\" min=\"1\" value={pax} onChange={e => setPax(Number(e.target.value))}\r\n                                className=\"w-full bg-[var(--bg-base)] border border-[var(--border-default)] rounded p-2 text-[var(--text-primary)]\" />\r\n                        </div>\r\n                        <div>\r\n                            <label className=\"text-xs text-[var(--text-muted)] uppercase font-bold block mb-1\">Tipe Meja</label>\r\n                            <select value={tableType} onChange={e => setTableType(e.target.value as any)}\r\n                                className=\"w-full bg-[var(--bg-base)] border border-[var(--border-default)] rounded p-2 text-[var(--text-primary)]\">\r\n                                <option value=\"REGULAR\">Regular</option>\r\n                                <option value=\"VIP\">VIP</option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <div>\r\n                            <label className=\"text-xs text-[var(--text-muted)] uppercase font-bold block mb-1\">Tanggal</label>\r\n                            <input type=\"date\" value={bookingDate} onChange={e => setBookingDate(e.target.value)} required\r\n                                className=\"w-full bg-[var(--bg-base)] border border-[var(--border-default)] rounded p-2 text-[var(--text-primary)]\" />\r\n                        </div>\r\n                        <div>\r\n                            <label className=\"text-xs text-[var(--text-muted)] uppercase font-bold block mb-1\">Jam</label>\r\n                            <input type=\"time\" value={bookingTime} onChange={e => setBookingTime(e.target.value)} required\r\n                                className=\"w-full bg-[var(--bg-base)] border border-[var(--border-default)] rounded p-2 text-[var(--text-primary)]\" />\r\n                        </div>\r\n                    </div>\r\n                    <button type=\"submit\" disabled={isSubmitting}\r\n                        className=\"w-full py-3 bg-[var(--accent-secondary)] hover:bg-yellow-500 text-black font-bold rounded disabled:opacity-50\">\r\n                        {isSubmitting ? 'Memproses...' : 'Buat Reservasi'}\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default function DashboardPage() {\r\n    const { showToast } = useToast();\r\n    const { data: tablesData, mutate } = useSWR('/api/tables', fetcher, { refreshInterval: 15000 }); // Reduced polling\r\n    const tables = tablesData?.data || [];\r\n\r\n    const [selectedId, setSelectedId] = useState<number | null>(null);\r\n    const [viewMode, setViewMode] = useState<'grid' | 'list'>('grid');\r\n    const [showCheckout, setShowCheckout] = useState(false);\r\n    const [showTransfer, setShowTransfer] = useState(false);\r\n    const [showAddOrder, setShowAddOrder] = useState(false);\r\n    const [selectedMember, setSelectedMember] = useState<any>(null);\r\n    const [customerName, setCustomerName] = useState<string>('');\r\n    const [showBillingOptions, setShowBillingOptions] = useState(false);\r\n    const [billingType, setBillingType] = useState<'open' | number>('open'); // 'open' or fixed hours (1-5)\r\n    const [showWalkinModal, setShowWalkinModal] = useState(false);\r\n    const [showReservationModal, setShowReservationModal] = useState(false);\r\n\r\n    // Auth & Settings States\r\n    const [showPin, setShowPin] = useState(false);\r\n    const [showSettings, setShowSettings] = useState(false);\r\n\r\n    // Loading states for instant feedback\r\n    const [isActionLoading, setIsActionLoading] = useState(false);\r\n    const [isPending, startTransition] = useTransition();\r\n\r\n    const selectedTable = tables.find((t: any) => t.id === selectedId);\r\n\r\n    const getStatusColor = (status: string) => {\r\n        switch (status) {\r\n            case 'AVAILABLE': return 'bg-[var(--bg-card)] border-[var(--border-default)] text-[var(--text-primary)] hover:border-[var(--accent-primary)]/50';\r\n            case 'ACTIVE': return 'bg-[#0f391e] border-[var(--accent-primary)] text-[var(--text-primary)] ring-1 ring-[#f07000]/50';\r\n            case 'BOOKED': return 'bg-[#3f2e0b] border-[var(--accent-secondary)] text-[var(--accent-secondary)]';\r\n            case 'CLEANING': return 'bg-[#2a1b3d] border-[#a855f7] text-[#a855f7]';\r\n            case 'MAINTENANCE': return 'bg-[#0e2a36] border-[#0ea5e9] text-[#0ea5e9]';\r\n            default: return 'bg-[var(--bg-card)] border-[var(--border-default)] text-[var(--text-primary)]';\r\n        }\r\n    };\r\n\r\n    const handleAction = useCallback(async (action: 'start' | 'stop', billingType?: 'open' | number, nameOverride?: string) => {\r\n        if (!selectedId || isActionLoading) return;\r\n\r\n        setIsActionLoading(true);\r\n\r\n        // Optimistic UI update - instantly update the table status\r\n        const optimisticData = {\r\n            ...tablesData,\r\n            data: tables.map((t: any) =>\r\n                t.id === selectedId\r\n                    ? { ...t, status: action === 'start' ? 'ACTIVE' : 'AVAILABLE' }\r\n                    : t\r\n            )\r\n        };\r\n\r\n        // Update UI immediately\r\n        startTransition(() => {\r\n            mutate(optimisticData, false); // Optimistic update without revalidation\r\n        });\r\n\r\n        const nameToUse = selectedMember?.fullName || nameOverride || customerName || '';\r\n        const body = action === 'start' ? {\r\n            customerName: nameToUse || undefined,\r\n            memberId: selectedMember?.id,\r\n            billingType: billingType || 'open',\r\n            fixedHours: typeof billingType === 'number' ? billingType : undefined\r\n        } : {};\r\n\r\n        try {\r\n            const res = await fetch(`/api/tables/${selectedId}/${action}`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(body)\r\n            });\r\n\r\n            if (!res.ok) {\r\n                // Revert on error\r\n                mutate();\r\n                const err = await res.json();\r\n                console.error('Action failed:', err);\r\n            } else {\r\n                // Sync with server data\r\n                mutate();\r\n            }\r\n        } catch (e) {\r\n            console.error('Action error:', e);\r\n            mutate(); // Revert on error\r\n        } finally {\r\n            setIsActionLoading(false);\r\n            setSelectedMember(null);\r\n            setCustomerName('');\r\n        }\r\n    }, [selectedId, isActionLoading, tablesData, tables, selectedMember, customerName, mutate]);\r\n\r\n    return (\r\n        <div className=\"flex flex-1 overflow-hidden relative h-full\">\r\n            {/* Billing Options Modal */}\r\n            {showBillingOptions && selectedTable && (\r\n                <BillingOptionsModal\r\n                    hourlyRate={selectedTable.hourlyRate || 50000}\r\n                    onClose={() => setShowBillingOptions(false)}\r\n                    onSelect={(type, name) => {\r\n                        setBillingType(type);\r\n                        if (name) setCustomerName(name);\r\n                        handleAction('start', type, name);\r\n                        setShowBillingOptions(false);\r\n                    }}\r\n                />\r\n            )}\r\n\r\n            {/* Visual Floor Plan */}\r\n            <main className=\"flex-1 flex flex-col bg-[var(--bg-base)] overflow-hidden\">\r\n                {/* Top Control Bar */}\r\n                <div className=\"px-6 py-4 border-b border-[var(--border-default)] bg-[var(--bg-surface)] flex justify-between items-center z-20 shadow-md\">\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <h2 className=\"text-xl font-bold text-[var(--text-primary)]\">Lantai 1 - Main Hall</h2>\r\n                            <button onClick={() => setShowPin(true)} className=\"p-1.5 hover:bg-[var(--bg-card)] rounded text-[var(--text-muted)] hover:text-[var(--text-primary)] border border-transparent hover:border-[var(--border-default)] transition-all\"><Settings size={18} /></button>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-2 text-xs bg-[var(--bg-card)] px-2 py-1 rounded border border-[var(--border-default)]\">\r\n                            <div className=\"size-2 rounded-full bg-[var(--accent-primary)]\"></div> Active\r\n                            <div className=\"size-2 rounded-full bg-[var(--accent-secondary)] ml-2\"></div> Booked\r\n                            <div className=\"size-2 rounded-full bg-slate-500 ml-2\"></div> Available\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"flex gap-2\">\r\n                        <button\r\n                            onClick={() => setViewMode('grid')}\r\n                            className={`flex items-center gap-2 border px-3 py-2 rounded text-sm font-medium transition-colors\r\n                                    ${viewMode === 'grid' ? 'bg-[var(--bg-card)] text-[var(--text-primary)] border-[var(--accent-primary)]/50' : 'bg-transparent text-[var(--text-muted)] border-[var(--border-default)] hover:bg-[var(--bg-card)]'}\r\n                                `}\r\n                        >\r\n                            <LayoutGrid size={16} /> Grid View\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setViewMode('list')}\r\n                            className={`flex items-center gap-2 border px-3 py-2 rounded text-sm font-medium transition-colors\r\n                                    ${viewMode === 'list' ? 'bg-[var(--bg-card)] text-[var(--text-primary)] border-[var(--accent-primary)]/50' : 'bg-transparent text-[var(--text-muted)] border-[var(--border-default)] hover:bg-[var(--bg-card)]'}\r\n                                `}\r\n                        >\r\n                            <List size={16} /> List View\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Grid Area */}\r\n                <div className=\"flex-1 overflow-y-auto p-6\">\r\n                    {viewMode === 'grid' ? (\r\n                        <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\r\n                            {tables.map((table: any) => (\r\n                                <div\r\n                                    key={table.id}\r\n                                    onClick={() => {\r\n                                        // Special handling for CLEANING tables - click to set AVAILABLE\r\n                                        if (table.status === 'CLEANING') {\r\n                                            (async () => {\r\n                                                try {\r\n                                                    await fetch(`/api/tables/${table.id}`, {\r\n                                                        method: 'PATCH',\r\n                                                        headers: { 'Content-Type': 'application/json' },\r\n                                                        body: JSON.stringify({ status: 'AVAILABLE' })\r\n                                                    });\r\n                                                    await mutate();\r\n                                                    showToast('success', `${table.name} siap digunakan`);\r\n                                                } catch (e) {\r\n                                                    showToast('error', 'Gagal mengubah status');\r\n                                                }\r\n                                            })();\r\n                                        } else {\r\n                                            setSelectedId(table.id);\r\n                                        }\r\n                                    }}\r\n                                    className={`relative p-4 rounded-xl border transition-all hover:scale-[1.02] flex flex-col justify-between h-48 shadow-lg group cursor-pointer\r\n                          ${getStatusColor(table.status)}\r\n                          ${selectedId === table.id ? 'ring-2 ring-transparent' : ''}\r\n                        `}\r\n                                >\r\n                                    {/* Header */}\r\n                                    <div className=\"flex justify-between items-start mb-2\">\r\n                                        <div className=\"flex flex-col\">\r\n                                            <span className=\"font-bold text-xl leading-none\">{table.name}</span>\r\n                                            <span className=\"text-xs opacity-70 mt-1.5 uppercase tracking-wide font-semibold\">{table.type || 'REGULAR'} Table</span>\r\n                                        </div>\r\n                                        {table.status === 'ACTIVE' && <div className=\"animate-pulse size-3 rounded-full bg-[var(--accent-primary)] shadow-[0_0_10px_#f07000]\"></div>}\r\n                                    </div>\r\n\r\n                                    {/* Body */}\r\n                                    <div className=\"flex flex-col items-center justify-center flex-1 w-full\">\r\n                                        {table.status === 'ACTIVE' && table.activeSession ? (\r\n                                            <RealTimeTimer\r\n                                                startTime={table.activeSession.startTime}\r\n                                                endTime={table.activeSession.endTime}\r\n                                                hourlyRate={table.hourlyRate || 50000}\r\n                                                isPaused={table.activeSession.status === 'PAUSED'}\r\n                                                onWarning={() => {\r\n                                                    if (selectedId === table.id) {\r\n                                                        alert(' Peringatan: Waktu tersisa 5 menit!');\r\n                                                    }\r\n                                                }}\r\n                                                onTimeUp={() => {\r\n                                                    if (selectedId === table.id || !selectedId) {\r\n                                                        setSelectedId(table.id);\r\n                                                        setShowCheckout(true);\r\n                                                    }\r\n                                                }}\r\n                                            />\r\n                                        ) : (\r\n                                            <div className=\"flex flex-col items-center opacity-30 group-hover:opacity-60 transition-opacity\">\r\n                                                <div className=\"size-12 rounded-full border-2 border-dashed border-white flex items-center justify-center mb-1\">\r\n                                                    <Plus size={20} />\r\n                                                </div>\r\n                                                <span className=\"text-xs font-medium\">{table.status}</span>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n\r\n                                    {/* Footer */}\r\n                                    <div className=\"flex justify-between items-center text-sm opacity-90 border-t border-white/10 pt-3 mt-1\">\r\n                                        <div className=\"flex items-center gap-2 truncate max-w-[60%]\">\r\n                                            <Users size={16} />\r\n                                            <span className=\"font-semibold truncate\">{table.activeSession?.customerName || '-'}</span>\r\n                                        </div>\r\n                                        {table.activeSession && (\r\n                                            <div className=\"flex items-center gap-1.5 text-slate-300\">\r\n                                                <Clock size={14} />\r\n                                                <span className=\"font-mono text-xs font-medium\">\r\n                                                    {new Date(table.activeSession.startTime).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n                                                </span>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"flex flex-col gap-2\">\r\n                            {tables.map((table: any) => (\r\n                                <div\r\n                                    key={table.id}\r\n                                    onClick={() => setSelectedId(table.id)}\r\n                                    className={`flex items-center justify-between p-4 rounded-lg border transition-all cursor-pointer hover:bg-[var(--bg-card)]\r\n                                            ${selectedId === table.id ? 'border-[var(--accent-primary)] bg-[var(--bg-card)]' : 'border-[var(--border-default)] bg-[var(--bg-surface)]'}\r\n                                        `}\r\n                                >\r\n                                    <div className=\"flex items-center gap-4\">\r\n                                        <div className={`size-3 rounded-full ${table.status === 'ACTIVE' ? 'bg-[var(--accent-primary)] animate-pulse' :\r\n                                            table.status === 'BOOKED' ? 'bg-[var(--accent-secondary)]' :\r\n                                                table.status === 'MAINTENANCE' ? 'bg-[#0ea5e9]' : 'bg-slate-500'\r\n                                            }`}></div>\r\n                                        <div>\r\n                                            <h3 className=\"font-bold text-[var(--text-primary)] text-lg\">{table.name}</h3>\r\n                                            <p className=\"text-xs text-[var(--text-muted)]\">{table.type || 'REGULAR'} Table</p>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"flex items-center gap-8\">\r\n                                        {table.status === 'ACTIVE' && table.activeSession && (\r\n                                            <ListViewTimer\r\n                                                startTime={table.activeSession.startTime}\r\n                                                hourlyRate={table.hourlyRate || 50000}\r\n                                            />\r\n                                        )}\r\n                                        <div className=\"flex items-center gap-2 text-[var(--text-muted)] min-w-[150px] justify-end\">\r\n                                            <Users size={16} />\r\n                                            <span className=\"text-sm font-medium\">{table.activeSession?.customerName || '-'}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </main>\r\n\r\n            {/* Smart Context Sidebar */}\r\n            <aside className=\"w-[360px] bg-[var(--bg-surface)] border-l border-[var(--border-default)] flex flex-col shrink-0 z-30 shadow-xl\">\r\n                {selectedTable ? (\r\n                    // TABLE CONTROL MODE\r\n                    <>\r\n                        <div className=\"p-5 border-b border-[var(--border-default)] bg-[var(--bg-card)]\">\r\n                            <div className=\"flex justify-between items-start mb-2\">\r\n                                <div>\r\n                                    <h3 className=\"text-2xl font-bold text-[var(--text-primary)]\">{selectedTable.name}</h3>\r\n                                    <p className=\"text-sm text-[var(--text-muted)]\">{selectedTable.type || 'REGULAR'} Table  Kapasitas {selectedTable.capacity || 6}</p>\r\n                                </div>\r\n                                <button onClick={() => setSelectedId(null)} className=\"text-[var(--text-muted)] hover:text-[var(--text-primary)]\"><X size={20} /></button>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2 mt-4\">\r\n                                <div\r\n                                    onClick={async () => {\r\n                                        if (selectedTable.status === 'CLEANING') {\r\n                                            try {\r\n                                                await fetch(`/api/tables/${selectedId}`, {\r\n                                                    method: 'PATCH',\r\n                                                    headers: { 'Content-Type': 'application/json' },\r\n                                                    body: JSON.stringify({ status: 'AVAILABLE' })\r\n                                                });\r\n                                                await mutate();\r\n                                                showToast('success', 'Meja siap digunakan');\r\n                                            } catch (e) {\r\n                                                showToast('error', 'Gagal mengubah status');\r\n                                            }\r\n                                        }\r\n                                    }}\r\n                                    className={`px-2 py-1 rounded text-xs font-bold border ${getStatusColor(selectedTable.status)} bg-opacity-20 ${selectedTable.status === 'CLEANING' ? 'cursor-pointer hover:bg-[var(--accent-primary)]/30 transition-colors' : ''}`}\r\n                                >\r\n                                    {selectedTable.status}\r\n                                </div>\r\n                                {selectedTable.status === 'ACTIVE' && <span className=\"text-[var(--accent-primary)] text-sm font-mono font-bold\">Billing berjalan</span>}\r\n                                {selectedTable.status === 'CLEANING' && <span className=\"text-yellow-500 text-xs\">Klik untuk set Available</span>}\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex-1 overflow-y-auto p-5\">\r\n                            {/* Member Search - Only when Available */}\r\n                            {selectedTable.status === 'AVAILABLE' && (\r\n                                <div className=\"mb-4\">\r\n                                    <label className=\"text-xs text-[var(--text-muted)] uppercase font-bold mb-1 block\">Nama Customer / Cari Member</label>\r\n                                    <div className=\"relative\">\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            placeholder=\"Ketik nama customer...\"\r\n                                            value={selectedMember?.fullName || customerName}\r\n                                            className=\"w-full bg-[var(--bg-base)] border border-[var(--border-default)] rounded p-2 text-sm text-[var(--text-primary)] focus:border-[var(--accent-primary)] outline-none\"\r\n                                            onChange={async (e) => {\r\n                                                const value = e.target.value;\r\n                                                setCustomerName(value);\r\n                                                setSelectedMember(null);\r\n\r\n                                                // Try to find member if typing\r\n                                                if (value.length > 2) {\r\n                                                    const members = await fetchMembers(value);\r\n                                                    if (members.length > 0) setSelectedMember(members[0]);\r\n                                                }\r\n                                            }}\r\n                                            onKeyDown={(e) => {\r\n                                                if (e.key === 'Enter' && selectedTable.status !== 'ACTIVE' && !isActionLoading) {\r\n                                                    setShowBillingOptions(true);\r\n                                                }\r\n                                            }}\r\n                                        />\r\n                                        {selectedMember && (\r\n                                            <div className=\"absolute right-2 top-2 text-xs text-[var(--accent-primary)] font-bold flex items-center gap-1\">\r\n                                                <Users size={12} /> Member\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n\r\n                            <div className=\"grid grid-cols-3 gap-2 mb-6\">\r\n                                <button\r\n                                    onClick={() => setShowBillingOptions(true)}\r\n                                    disabled={selectedTable.status === 'ACTIVE' || isActionLoading}\r\n                                    className=\"flex flex-col items-center justify-center p-3 bg-[var(--bg-card)] hover:bg-[var(--bg-elevated)] border border-[var(--border-default)] rounded transition-colors group disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                                >\r\n                                    {isActionLoading ? (\r\n                                        <RefreshCw size={24} className=\"text-[var(--accent-primary)] mb-1 animate-spin\" />\r\n                                    ) : (\r\n                                        <Play size={24} className=\"text-[var(--accent-primary)] mb-1\" />\r\n                                    )}\r\n                                    <span className=\"text-xs font-medium text-slate-300\">Start</span>\r\n                                </button>\r\n                                <button\r\n                                    onClick={async () => {\r\n                                        if (!selectedId || isActionLoading) return;\r\n                                        setIsActionLoading(true);\r\n                                        try {\r\n                                            await fetch(`/api/tables/${selectedId}/pause`, { method: 'POST' });\r\n                                            mutate();\r\n                                        } finally {\r\n                                            setIsActionLoading(false);\r\n                                        }\r\n                                    }}\r\n                                    disabled={(selectedTable.status !== 'ACTIVE' && selectedTable.status !== 'BOOKED') || isActionLoading}\r\n                                    className=\"flex flex-col items-center justify-center p-3 bg-[var(--bg-card)] hover:bg-[var(--bg-elevated)] border border-[var(--border-default)] rounded transition-colors group disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                                >\r\n                                    {isActionLoading ? (\r\n                                        <RefreshCw size={24} className=\"text-[var(--accent-secondary)] mb-1 animate-spin\" />\r\n                                    ) : (\r\n                                        <Pause size={24} className=\"text-[var(--accent-secondary)] mb-1\" />\r\n                                    )}\r\n                                    <span className=\"text-xs font-medium text-slate-300\">\r\n                                        {selectedTable.activeSession?.status === 'PAUSED' ? 'Resume' : 'Pause'}\r\n                                    </span>\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => {\r\n                                        if (!selectedTable.activeSession) return;\r\n                                        setShowCheckout(true);\r\n                                    }}\r\n                                    disabled={selectedTable.status !== 'ACTIVE' || isActionLoading}\r\n                                    className=\"flex flex-col items-center justify-center p-3 bg-[var(--bg-card)] hover:bg-[var(--bg-elevated)] border border-[var(--border-default)] rounded transition-colors group disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                                >\r\n                                    <Square size={24} className=\"text-[#ef4444] mb-1\" />\r\n                                    <span className=\"text-xs font-medium text-slate-300\">Stop</span>\r\n\r\n                                </button>\r\n                            </div>\r\n\r\n                            <button\r\n                                onClick={() => setShowTransfer(true)}\r\n                                className=\"w-full flex items-center justify-center gap-2 p-2 mb-4 bg-[var(--bg-surface)] hover:bg-[var(--bg-elevated)] border border-[var(--border-default)] rounded text-[var(--text-muted)] hover:text-[var(--text-primary)] transition-colors group\"\r\n                            >\r\n                                <ArrowRightLeft size={16} />\r\n                                <span className=\"text-sm font-medium\">Pindah Meja</span>\r\n                            </button>\r\n\r\n                            <h4 className=\"text-xs font-bold text-[var(--text-muted)] uppercase tracking-wider mb-3\">Quick Actions</h4>\r\n                            <div className=\"space-y-2 mb-6\">\r\n                                <button\r\n                                    onClick={() => setShowAddOrder(true)}\r\n                                    disabled={selectedTable.status !== 'ACTIVE'}\r\n                                    className=\"w-full flex items-center justify-between p-3 bg-[var(--bg-base)] border border-[var(--border-default)] rounded hover:border-[var(--accent-primary)] transition-colors group disabled:opacity-50\"\r\n                                >\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                        <div className=\"p-2 bg-[var(--accent-primary)]/10 rounded text-[var(--accent-primary)]\"><Coffee size={18} /></div>\r\n                                        <span className=\"text-sm font-medium text-slate-300 group-hover:text-[var(--text-primary)]\">Tambah Pesanan F&B</span>\r\n                                    </div>\r\n                                </button>\r\n                            </div>\r\n\r\n                            <button\r\n                                onClick={() => setShowCheckout(true)}\r\n                                disabled={selectedTable.status !== 'ACTIVE'}\r\n                                className=\"w-full mb-6 py-3 bg-[var(--accent-secondary)] hover:bg-yellow-500 text-black font-bold rounded-lg shadow-lg flex items-center justify-center gap-2 disabled:opacity-50\"\r\n                            >\r\n                                <Receipt size={20} />\r\n                                Checkout & Bayar\r\n                            </button>\r\n\r\n                            {selectedTable.status === 'ACTIVE' && selectedTable.activeSession && (\r\n                                <div className=\"bg-[var(--bg-base)] border border-[var(--border-default)] rounded p-4\">\r\n                                    <div className=\"flex justify-between items-center\">\r\n                                        <span className=\"font-bold text-[var(--text-primary)]\">Total Tagihan</span>\r\n                                        <RealTimeBill\r\n                                            startTime={selectedTable.activeSession.startTime}\r\n                                            hourlyRate={selectedTable.hourlyRate || 50000}\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </>\r\n                ) : (\r\n                    // WAITING LIST & RESERVATIONS SIDEBAR\r\n                    <WaitingListSidebar\r\n                        onOpenWalkin={() => setShowWalkinModal(true)}\r\n                        onOpenReservation={() => setShowReservationModal(true)}\r\n                    />\r\n                )}\r\n            </aside>\r\n\r\n            {showCheckout && selectedTable && (\r\n                <CheckoutModal\r\n                    table={selectedTable}\r\n                    onClose={() => setShowCheckout(false)}\r\n                    onConfirm={async (method, cash, total, items) => {\r\n                        try {\r\n                            // 1. Stop Session (Required to close main loop)\r\n                            const stopRes = await fetch(`/api/tables/${selectedTable.id}/stop`, { method: 'POST' });\r\n                            const stopData = await stopRes.json();\r\n\r\n                            if (!stopRes.ok || !stopData.success) {\r\n                                throw new Error(stopData.error || 'Gagal menghentikan sesi');\r\n                            }\r\n\r\n                            const sessionId = stopData.data?.sessionId;\r\n\r\n                            // 2. Create Transaction with REAL items\r\n                            const transRes = await fetch('/api/transactions', {\r\n                                method: 'POST',\r\n                                headers: { 'Content-Type': 'application/json' },\r\n                                body: JSON.stringify({\r\n                                    sessionId,\r\n                                    customerName: selectedTable.activeSession?.customerName,\r\n                                    paymentMethod: method,\r\n                                    items: items // Use the items passed from CheckoutModal\r\n                                })\r\n                            });\r\n\r\n                            const transData = await transRes.json();\r\n                            console.log(\"Transaction Response:\", transData); // Debug\r\n\r\n                            if (!transRes.ok || !transData.success) {\r\n                                // Show detailed error message\r\n                                const errMsg = transData.details\r\n                                    ? JSON.stringify(transData.details)\r\n                                    : transData.error || 'Gagal memproses transaksi';\r\n                                throw new Error(errMsg);\r\n                            }\r\n\r\n                            await mutate();\r\n                            setShowCheckout(false);\r\n                            setSelectedId(null);\r\n                            showToast('success', `Pembayaran Berhasil Rp ${total.toLocaleString()}! Struk dicetak.`);\r\n                        } catch (e: any) {\r\n                            console.error(\"Checkout failed\", e);\r\n                            showToast('error', e.message || 'Pembayaran Gagal');\r\n                        }\r\n                    }}\r\n                />\r\n            )}\r\n\r\n            {showTransfer && selectedTable && (\r\n                <TableTransferModal\r\n                    sourceTable={selectedTable}\r\n                    tables={tables}\r\n                    onClose={() => setShowTransfer(false)}\r\n                    onConfirm={async (targetId) => {\r\n                        try {\r\n                            const res = await fetch('/api/tables/transfer', {\r\n                                method: 'POST',\r\n                                headers: { 'Content-Type': 'application/json' },\r\n                                body: JSON.stringify({ fromTableId: selectedTable.id, toTableId: targetId })\r\n                            });\r\n\r\n                            if (!res.ok) {\r\n                                const err = await res.json();\r\n                                alert(err.error || 'Gagal memindahkan meja');\r\n                                return;\r\n                            }\r\n\r\n                            await mutate(); // Refresh data\r\n                            setShowTransfer(false);\r\n                            setSelectedId(null);\r\n                        } catch (e) {\r\n                            console.error(\"Transfer failed\", e);\r\n                            alert('Terjadi kesalahan saat memindahkan meja');\r\n                        }\r\n                    }}\r\n                />\r\n            )}\r\n\r\n            {showPin && (\r\n                <PinModal\r\n                    validPin=\"123456\"\r\n                    onClose={() => setShowPin(false)}\r\n                    onSuccess={() => { setShowPin(false); setShowSettings(true); }}\r\n                />\r\n            )}\r\n            {showSettings && <PrinterSettingsModal onClose={() => setShowSettings(false)} />}\r\n\r\n            {showAddOrder && selectedTable?.activeSession && (\r\n                <AddOrderModal\r\n                    sessionId={selectedTable.activeSession.id}\r\n                    onClose={() => setShowAddOrder(false)}\r\n                    onSuccess={() => { setShowAddOrder(false); mutate(); }}\r\n                />\r\n            )}\r\n\r\n            {showWalkinModal && (\r\n                <WalkinModal\r\n                    tables={tables}\r\n                    onClose={() => setShowWalkinModal(false)}\r\n                    onSuccess={() => {\r\n                        setShowWalkinModal(false);\r\n                        mutate();\r\n                    }}\r\n                />\r\n            )}\r\n\r\n            {showReservationModal && (\r\n                <ReservationModal\r\n                    onClose={() => setShowReservationModal(false)}\r\n                    onSuccess={() => {\r\n                        setShowReservationModal(false);\r\n                        mutate();\r\n                    }}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAXA;;;;;;;AAaA,MAAM,UAAU,CAAC,MAAgB,MAAM,KAAK,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI;AAE5D,gEAAgE;AAChE,MAAM,gBAAgB,CAAC,EACnB,SAAS,EACT,OAAO,EACP,UAAU,EACV,QAAQ,EACR,QAAQ,EACR,SAAS,EAQZ;IACG,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IACrD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,MAAM,iBAAiB,CAAC,CAAC;IACzB,MAAM,YAAY,UAAU,IAAI,KAAK,SAAS,OAAO,KAAK;IAC1D,MAAM,cAAc,IAAI,KAAK,WAAW,OAAO;IAC/C,MAAM,sBAAsB,iBAAiB,KAAK,KAAK,CAAC,CAAC,YAAY,WAAW,IAAI,QAAQ;IAE5F,IAAA,kNAAS,EAAC;QACN,IAAI,UAAU;QAEd,MAAM,cAAc;YAChB,MAAM,MAAM,KAAK,GAAG;YACpB,MAAM,UAAU,KAAK,KAAK,CAAC,CAAC,MAAM,WAAW,IAAI;YACjD,kBAAkB;YAElB,4DAA4D;YAC5D,IAAI,kBAAkB,CAAC,SAAS;gBAC5B,MAAM,mBAAmB,KAAK,KAAK,CAAC,CAAC,YAAY,GAAG,IAAI;gBAExD,qCAAqC;gBACrC,IAAI,oBAAoB,OAAO,mBAAmB,KAAK,CAAC,QAAQ;oBAC5D,UAAU;oBACV;gBACJ;gBAEA,YAAY;gBACZ,IAAI,oBAAoB,GAAG;oBACvB,WAAW;oBACX;gBACJ;YACJ;QACJ;QAEA,eAAe,UAAU;QACzB,MAAM,WAAW,YAAY,aAAa;QAC1C,OAAO,IAAM,cAAc;IAC/B,GAAG;QAAC;QAAa;QAAW;QAAgB;QAAU;QAAQ;QAAS;QAAU;KAAU;IAE3F,MAAM,eAAe,KAAK,KAAK,CAAC,iBAAiB;IACjD,MAAM,QAAQ,KAAK,KAAK,CAAC,eAAe;IACxC,MAAM,OAAO,eAAe;IAC5B,MAAM,OAAO,iBAAiB;IAE9B,2DAA2D;IAC3D,MAAM,OAAO,iBACP,KAAK,IAAI,CAAC,AAAC,sBAAsB,OAAQ,cACzC,KAAK,IAAI,CAAC,AAAC,iBAAiB,OAAQ;IAE1C,uCAAuC;IACvC,MAAM,mBAAmB,iBAAiB,KAAK,GAAG,CAAC,GAAG,sBAAsB,kBAAkB;IAC9F,MAAM,aAAa,KAAK,KAAK,CAAC,mBAAmB;IACjD,MAAM,aAAa,mBAAmB;IAEtC,iEAAiE;IACjE,MAAM,cAAc,QAAQ,IACtB,GAAG,MAAM,QAAQ,GAAG,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAE,KAAK,QAAQ,GAAG,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAE,KAAK,QAAQ,GAAG,QAAQ,CAAC,GAAG,MAAM,GAC9G,GAAG,KAAK,QAAQ,GAAG,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAE,KAAK,QAAQ,GAAG,QAAQ,CAAC,GAAG,MAAM;IAE/E,4CAA4C;IAC5C,MAAM,aAAa,kBAAkB,oBAAoB,OAAO,mBAAmB;IACnF,MAAM,WAAW,kBAAkB,oBAAoB;IACvD,MAAM,aAAa,WAAW,iBAAiB,aAAa,mCAAmC;IAC/F,MAAM,YAAY,WAAW,iBAAiB;IAE9C,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAI,WAAW,CAAC,6CAA6C,EAAE,WAAW,oBAAoB,CAAC;0BAC3F;;;;;;YAIJ,gCACG,8OAAC;gBAAI,WAAW,CAAC,2BAA2B,EAAE,WAAW,+BAA+B,aAAa,mCAAmC,4BAA4B;0BAC/J,WAAW,mBAAmB,CAAC,MAAM,EAAE,WAAW,CAAC,EAAE,WAAW,QAAQ,GAAG,QAAQ,CAAC,GAAG,MAAM;;;;;;0BAItG,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAK,WAAU;kCACX,iBAAiB,UAAU;;;;;;kCAEhC,8OAAC;wBAAK,WAAW,CAAC,oBAAoB,EAAE,UAAU,QAAQ,CAAC;;4BAAE;4BACrD,KAAK,cAAc;;;;;;;;;;;;;;;;;;;AAK3C;AAEA,8BAA8B;AAC9B,MAAM,gBAAgB,CAAC,EAAE,SAAS,EAAE,UAAU,EAA6C;IACvF,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IAErD,IAAA,kNAAS,EAAC;QACN,MAAM,QAAQ,IAAI,KAAK,WAAW,OAAO;QAEzC,MAAM,cAAc;YAChB,MAAM,MAAM,KAAK,GAAG;YACpB,MAAM,UAAU,KAAK,KAAK,CAAC,CAAC,MAAM,KAAK,IAAI;YAC3C,kBAAkB;QACtB;QAEA;QACA,MAAM,WAAW,YAAY,aAAa;QAC1C,OAAO,IAAM,cAAc;IAC/B,GAAG;QAAC;KAAU;IAEd,MAAM,eAAe,KAAK,KAAK,CAAC,iBAAiB;IACjD,MAAM,QAAQ,KAAK,KAAK,CAAC,eAAe;IACxC,MAAM,OAAO,eAAe;IAC5B,MAAM,OAAO,iBAAiB;IAC9B,iDAAiD;IACjD,MAAM,OAAO,KAAK,IAAI,CAAC,AAAC,iBAAiB,OAAQ;IAEjD,MAAM,cAAc,QAAQ,IACtB,GAAG,MAAM,QAAQ,GAAG,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAE,KAAK,QAAQ,GAAG,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAE,KAAK,QAAQ,GAAG,QAAQ,CAAC,GAAG,MAAM,GAC9G,GAAG,KAAK,QAAQ,GAAG,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAE,KAAK,QAAQ,GAAG,QAAQ,CAAC,GAAG,MAAM;IAE/E,qBACI;;0BACI,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAK,WAAU;kCAAuD;;;;;;kCACvE,8OAAC;wBAAK,WAAU;kCACX;;;;;;;;;;;;0BAGT,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAK,WAAU;kCAAuD;;;;;;kCACvE,8OAAC;wBAAK,WAAU;;4BAA2D;4BAAI,KAAK,cAAc;;;;;;;;;;;;;;;AAIlH;AAEA,qCAAqC;AACrC,MAAM,eAAe,CAAC,EAAE,SAAS,EAAE,UAAU,EAA6C;IACtF,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IAErD,IAAA,kNAAS,EAAC;QACN,MAAM,QAAQ,IAAI,KAAK,WAAW,OAAO;QAEzC,MAAM,cAAc;YAChB,MAAM,MAAM,KAAK,GAAG;YACpB,MAAM,UAAU,KAAK,KAAK,CAAC,CAAC,MAAM,KAAK,IAAI;YAC3C,kBAAkB;QACtB;QAEA;QACA,MAAM,WAAW,YAAY,aAAa;QAC1C,OAAO,IAAM,cAAc;IAC/B,GAAG;QAAC;KAAU;IAEd,MAAM,OAAO,KAAK,IAAI,CAAC,AAAC,iBAAiB,OAAQ;IAEjD,qBACI,8OAAC;QAAK,WAAU;;YAA2D;YACnE,KAAK,cAAc;;;;;;;AAGnC;AAEA,MAAM,qBAAqB,CAAC,EAAE,YAAY,EAAE,iBAAiB,EAA+D;IACxH,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,IAAA,yKAAM,EAAC,qBAAqB;IACtD,MAAM,eAAe,SAAS,QAAQ,EAAE;IACxC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAA2B;IAErE,MAAM,UAAU,aAAa,MAAM,CAAC,CAAC,IAAW,EAAE,KAAK,EAAE,SAAS,cAAc,EAAE,MAAM,KAAK;IAC7F,MAAM,qBAAqB,aAAa,MAAM,CAAC,CAAC,IAAW,CAAC,EAAE,KAAK,EAAE,SAAS,cAAc,EAAE,MAAM,KAAK;IAEzG,MAAM,OAAO,cAAc,WAAW,UAAU;IAEhD,qBACI;;0BACI,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAG,WAAU;kCAAoD;;;;;;kCAClE,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCACG,SAAS,IAAM,aAAa;gCAC5B,WAAW,CAAC,0DAA0D,EAAE,cAAc,WAAW,0CAA0C,6DAA6D;;oCAC3M;oCACa,QAAQ,MAAM;oCAAC;;;;;;;0CAE7B,8OAAC;gCACG,SAAS,IAAM,aAAa;gCAC5B,WAAW,CAAC,0DAA0D,EAAE,cAAc,gBAAgB,4CAA4C,6DAA6D;;oCAClN;oCACe,mBAAmB,MAAM;oCAAC;;;;;;;;;;;;;;;;;;;0BAKlD,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;oBACG,SAAS,IAAM,cAAc,WAAW,iBAAiB;oBACzD,WAAU;;sCAEV,8OAAC,0MAAI;4BAAC,MAAM;;;;;;wBAAM;wBAAE,cAAc,WAAW,mBAAmB;;;;;;;;;;;;0BAIxE,8OAAC;gBAAI,WAAU;0BACV,KAAK,MAAM,KAAK,kBACb,8OAAC;oBAAI,WAAU;8BAA2D;;;;;+DAI1E,KAAK,GAAG,CAAC,CAAC,MAAW,oBACjB,8OAAC;wBAAkB,WAAU;;0CACzB,8OAAC;gCAAI,WAAW,CAAC;4BACjB,EAAE,cAAc,WAAW,oFAAoF,sGAAsG;0CAChN,cAAc,WAAW,MAAM,kBAAI,8OAAC,6MAAK;oCAAC,MAAM;;;;;;;;;;;0CAErD,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCAAI,WAAU;;0DACX,8OAAC;gDAAK,WAAU;0DAAgD,KAAK,YAAY;;;;;;0DACjF,8OAAC;gDAAK,WAAU;0DAAoD,IAAI,KAAK,KAAK,WAAW,EAAE,kBAAkB,CAAC,EAAE,EAAE;oDAAE,MAAM;oDAAW,QAAQ;gDAAU;;;;;;;;;;;;kDAE/J,8OAAC;wCAAI,WAAU;;0DACX,8OAAC;;oDAAM,KAAK,GAAG;oDAAC;;;;;;;0DAChB,8OAAC;0DAAK;;;;;;0DACN,8OAAC;0DAAM,KAAK,SAAS;;;;;;;;;;;;;;;;;;0CAG7B,8OAAC;gCAAO,WAAU;0CACd,cAAA,8OAAC,sOAAY;oCAAC,MAAM;;;;;;;;;;;;uBAjBlB,KAAK,EAAE;;;;;;;;;;;;AAyBzC;AAGA,MAAM,eAAe,OAAO;IACxB,IAAI,CAAC,OAAO,OAAO,EAAE;IACrB,MAAM,MAAM,MAAM,MAAM,CAAC,eAAe,EAAE,OAAO;IACjD,MAAM,OAAO,MAAM,IAAI,IAAI;IAC3B,OAAO,KAAK,IAAI,IAAI,EAAE;AAC1B;AAEA,mDAAmD;AACnD,MAAM,sBAAsB,CAAC,EACzB,UAAU,EACV,OAAO,EACP,QAAQ,EAKX;IACG,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IAEjD,qBACI,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC;YAAI,WAAU;;8BACX,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAG,WAAU;sCAA+C;;;;;;sCAC7D,8OAAC;4BAAO,SAAS;4BAAS,WAAU;sCAChC,cAAA,8OAAC,iMAAC;gCAAC,MAAM;;;;;;;;;;;;;;;;;8BAIjB,8OAAC;oBAAI,WAAU;;sCAEX,8OAAC;;8CACG,8OAAC;oCAAM,WAAU;8CAAiF;;;;;;8CAGlG,8OAAC;oCACG,MAAK;oCACL,OAAO;oCACP,UAAU,CAAC,IAAM,gBAAgB,EAAE,MAAM,CAAC,KAAK;oCAC/C,aAAY;oCACZ,WAAU;;;;;;;;;;;;sCAIlB,8OAAC;4BAAI,WAAU;;;;;;sCAEf,8OAAC;4BAAG,WAAU;sCAA2E;;;;;;sCAKzF,8OAAC;4BACG,SAAS,IAAM,SAAS,QAAQ;4BAChC,WAAU;;8CAEV,8OAAC;oCAAI,WAAU;8CACX,cAAA,8OAAC,6MAAK;wCAAC,MAAM;;;;;;;;;;;8CAEjB,8OAAC;oCAAI,WAAU;;sDACX,8OAAC;4CAAG,WAAU;sDAAuC;;;;;;sDACrD,8OAAC;4CAAE,WAAU;sDAAmC;;;;;;;;;;;;8CAEpD,8OAAC;oCAAK,WAAU;;wCAAiD;wCAAI,WAAW,cAAc;wCAAG;;;;;;;;;;;;;sCAIrG,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAG,WAAU;8CAA2E;;;;;;8CAGzF,8OAAC;oCAAI,WAAU;8CACV;wCAAC;wCAAG;wCAAG;wCAAG;wCAAG;qCAAE,CAAC,GAAG,CAAC,CAAC,sBAClB,8OAAC;4CAEG,SAAS,IAAM,SAAS,OAAO;4CAC/B,WAAU;;8DAEV,8OAAC;oDAAK,WAAU;8DAA2F;;;;;;8DAC3G,8OAAC;oDAAK,WAAU;8DAAuC;;;;;;8DACvD,8OAAC;oDAAK,WAAU;;wDAA4D;wDACpE,CAAC,QAAQ,UAAU,EAAE,cAAc;;;;;;;;2CAPtC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiBzC;AAEA,yDAAyD;AACzD,MAAM,qBAAqB,CAAC,EAAE,WAAW,EAAE,MAAM,EAAE,OAAO,EAAE,SAAS,EAAmG;IACpK,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAgB;IACpE,MAAM,kBAAkB,OAAO,MAAM,CAAC,CAAA,IAAK,EAAE,MAAM,KAAK,eAAe,EAAE,EAAE,KAAK,YAAY,EAAE;IAE9F,qBACI,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC;YAAI,WAAU;;8BACX,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAG,WAAU;sCAA+C;;;;;;sCAC7D,8OAAC;4BAAO,SAAS;4BAAS,WAAU;sCAA4D,cAAA,8OAAC,iMAAC;gCAAC,MAAM;;;;;;;;;;;;;;;;;8BAG7G,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAE,WAAU;;gCAAwC;8CAAoB,8OAAC;oCAAO,WAAU;8CAA8B,YAAY,IAAI;;;;;;gCAAU;;;;;;;sCAEnJ,8OAAC;4BAAI,WAAU;;gCACV,gBAAgB,GAAG,CAAC,CAAA,kBACjB,8OAAC;wCAEG,SAAS,IAAM,kBAAkB,EAAE,EAAE;wCACrC,WAAW,CAAC;oCACR,EAAE,mBAAmB,EAAE,EAAE,GAAG,4FAA4F,qGAAqG;gCACjO,CAAC;;0DAED,8OAAC;gDAAK,WAAU;0DAAmB,EAAE,IAAI;;;;;;0DACzC,8OAAC;gDAAK,WAAU;0DAAsB,EAAE,IAAI;;;;;;;uCAPvC,EAAE,EAAE;;;;;gCAUhB,gBAAgB,MAAM,KAAK,mBACxB,8OAAC;oCAAI,WAAU;8CAA8D;;;;;;;;;;;;sCAMrF,8OAAC;4BACG,SAAS,IAAM,kBAAkB,UAAU;4BAC3C,UAAU,CAAC;4BACX,WAAU;sCACb;;;;;;;;;;;;;;;;;;;;;;;AAOrB;AAEA,MAAM,WAAW,CAAC,EAAE,QAAQ,EAAE,OAAO,EAAE,SAAS,EAAoE;IAChH,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,iNAAQ,EAAC;IAC/B,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IAEnC,MAAM,eAAe,CAAC;QAClB,EAAE,cAAc;QAChB,IAAI,QAAQ,UAAU;YAClB;QACJ,OAAO;YACH,SAAS;YACT,OAAO;QACX;IACJ;IAEA,qBACI,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC;YAAI,WAAU;;8BACX,8OAAC;oBAAG,WAAU;8BAAwD;;;;;;8BACtE,8OAAC;oBAAK,UAAU;oBAAc,WAAU;;sCACpC,8OAAC;4BACG,MAAK;4BACL,WAAW;4BACX,SAAS;4BACT,WAAW,CAAC,oHAAoH,EAAE,QAAQ,mBAAmB,uEAAuE;4BACpO,OAAO;4BACP,UAAU,CAAA;gCAAO,OAAO,EAAE,MAAM,CAAC,KAAK;gCAAG,SAAS;4BAAQ;4BAC1D,aAAY;;;;;;wBAEf,uBAAS,8OAAC;4BAAE,WAAU;sCAAmC;;;;;;sCAC1D,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAO,MAAK;oCAAS,SAAS;oCAAS,WAAU;8CAAiE;;;;;;8CACnH,8OAAC;oCAAO,MAAK;oCAAS,WAAU;8CAAkF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM1I;AAEA,MAAM,uBAAuB,CAAC,EAAE,OAAO,EAA2B;IAC9D,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IAEnC,mDAAmD;IACnD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;QACrC,YAAY;QACZ,gBAAgB;QAChB,gBAAgB;IACpB;IAEA,MAAM,aAAa;QACf,uEAAuE;QACvE,SAAS;QACT,WAAW;YAAQ,SAAS;YAAQ;QAAW,GAAG;IACtD;IAEA,qBACI,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC;YAAI,WAAU;;8BACX,8OAAC;oBAAG,WAAU;;sCAA4E,8OAAC,mNAAO;4BAAC,MAAM;;;;;;wBAAM;;;;;;;8BAE/G,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;;8CACG,8OAAC;oCAAM,WAAU;8CAAkE;;;;;;8CACnF,8OAAC;oCAAM,MAAK;oCAAO,OAAO,SAAS,UAAU;oCAAE,UAAU,CAAA,IAAK,YAAY;4CAAE,GAAG,QAAQ;4CAAE,YAAY,EAAE,MAAM,CAAC,KAAK;wCAAC;oCAAI,WAAU;;;;;;;;;;;;sCAEtI,8OAAC;;8CACG,8OAAC;oCAAM,WAAU;8CAAkE;;;;;;8CACnF,8OAAC;oCAAM,MAAK;oCAAO,OAAO,SAAS,cAAc;oCAAE,UAAU,CAAA,IAAK,YAAY;4CAAE,GAAG,QAAQ;4CAAE,gBAAgB,EAAE,MAAM,CAAC,KAAK;wCAAC;oCAAI,WAAU;;;;;;;;;;;;sCAE9I,8OAAC;;8CACG,8OAAC;oCAAM,WAAU;8CAAkE;;;;;;8CACnF,8OAAC;oCAAM,MAAK;oCAAO,OAAO,SAAS,cAAc;oCAAE,UAAU,CAAA,IAAK,YAAY;4CAAE,GAAG,QAAQ;4CAAE,gBAAgB,EAAE,MAAM,CAAC,KAAK;wCAAC;oCAAI,WAAU;;;;;;;;;;;;;;;;;;8BAIlJ,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAO,SAAS;4BAAS,WAAU;sCAAmI;;;;;;sCACvK,8OAAC;4BAAO,SAAS;4BAAY,WAAU;sCAClC,QAAQ,WAAW;;;;;;;;;;;;;;;;;;;;;;;AAM5C;AAEA,wBAAwB;AACxB,MAAM,gBAAgB,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,SAAS,EAAqE;IACvH,MAAM,EAAE,MAAM,YAAY,EAAE,GAAG,IAAA,yKAAM,EAAC,iBAAiB;IACvD,MAAM,WAAW,cAAc,QAAQ,EAAE;IACzC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAkD,CAAC;IACnF,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAS;IAC7D,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IAEjD,MAAM,YAAY,CAAC;QACf,QAAQ,CAAA;YACJ,MAAM,WAAW,IAAI,CAAC,QAAQ,EAAE,CAAC;YACjC,OAAO;gBACH,GAAG,IAAI;gBACP,CAAC,QAAQ,EAAE,CAAC,EAAE;oBACV;oBACA,KAAK,WAAW,SAAS,GAAG,GAAG,IAAI;gBACvC;YACJ;QACJ;IACJ;IAEA,MAAM,YAAY,CAAC,IAAY;QAC3B,QAAQ,CAAA;YACJ,MAAM,WAAW,IAAI,CAAC,GAAG;YACzB,IAAI,CAAC,UAAU,OAAO;YACtB,MAAM,SAAS,SAAS,GAAG,GAAG;YAC9B,IAAI,UAAU,GAAG;gBACb,MAAM,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,GAAG,MAAM,GAAG;gBAC7B,OAAO;YACX;YACA,OAAO;gBAAE,GAAG,IAAI;gBAAE,CAAC,GAAG,EAAE;oBAAE,GAAG,QAAQ;oBAAE,KAAK;gBAAO;YAAE;QACzD;IACJ;IAEA,MAAM,YAAY,OAAO,MAAM,CAAC;IAChC,MAAM,QAAQ,UAAU,MAAM,CAAC,CAAC,KAAK,OAAS,MAAO,OAAO,KAAK,OAAO,CAAC,KAAK,IAAI,KAAK,GAAG,EAAG;IAE7F,MAAM,mBAAmB,SAAS,MAAM,CAAC,CAAC,IAAW,mBAAmB,SAAS,EAAE,QAAQ,KAAK;IAEhG,MAAM,kBAAkB,CAAC;QACrB,OAAQ;YACJ,KAAK;gBAAQ,qBAAO,8OAAC,sNAAQ;oBAAC,MAAM;;;;;;YACpC,KAAK;gBAAS,qBAAO,8OAAC,gNAAM;oBAAC,MAAM;;;;;;YACnC,KAAK;gBAAS,qBAAO,8OAAC,gNAAM;oBAAC,MAAM;;;;;;YACnC;gBAAS,qBAAO,8OAAC,gNAAM;oBAAC,MAAM;;;;;;QAClC;IACJ;IAEA,MAAM,eAAe;QACjB,IAAI,UAAU,MAAM,KAAK,GAAG;QAC5B,gBAAgB;QAEhB,IAAI;YACA,MAAM,QAAQ,UAAU,GAAG,CAAC,CAAA,OAAQ,CAAC;oBACjC,IAAI,KAAK,OAAO,CAAC,EAAE;oBACnB,MAAM,KAAK,OAAO,CAAC,IAAI;oBACvB,OAAO,OAAO,KAAK,OAAO,CAAC,KAAK;oBAChC,KAAK,KAAK,GAAG;oBACb,MAAM;gBACV,CAAC;YAED,MAAM,MAAM,MAAM,MAAM,qBAAqB;gBACzC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBACjB;oBACA,eAAe;oBACf;gBACJ;YACJ;YAEA,IAAI,CAAC,IAAI,EAAE,EAAE;gBACT,MAAM,YAAY,MAAM,IAAI,IAAI;gBAChC,MAAM,IAAI,MAAM,UAAU,KAAK,IAAI;YACvC;YACA;QACJ,EAAE,OAAO,OAAY;YACjB,QAAQ,KAAK,CAAC,iBAAiB;YAC/B,MAAM,4BAA4B,CAAC,MAAM,OAAO,IAAI,eAAe;QACvE,SAAU;YACN,gBAAgB;QACpB;IACJ;IAEA,qBACI,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC;YAAI,WAAU;;8BAEX,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAG,WAAU;8CAA+C;;;;;;8CAC7D,8OAAC;oCAAO,SAAS;oCAAS,WAAU;8CAA4D,cAAA,8OAAC,iMAAC;wCAAC,MAAM;;;;;;;;;;;;;;;;;sCAI7G,8OAAC;4BAAI,WAAU;sCACV;gCAAC;gCAAO;gCAAQ;gCAAS;6BAAQ,CAAC,GAAG,CAAC,CAAA,oBACnC,8OAAC;oCAEG,SAAS,IAAM,kBAAkB;oCACjC,WAAW,CAAC;oCACR,EAAE,mBAAmB,MAAM,0CAA0C,iFAAiF;8CAEzJ;mCALI;;;;;;;;;;sCAWjB,8OAAC;4BAAI,WAAU;sCACV,iBAAiB,GAAG,CAAC,CAAC,kBACnB,8OAAC;oCAEG,SAAS,IAAM,UAAU;oCACzB,WAAU;;sDAEV,8OAAC;4CAAI,WAAU;;8DACX,8OAAC;oDAAI,WAAU;8DACV,gBAAgB,EAAE,QAAQ;;;;;;8DAE/B,8OAAC;oDAAK,WAAU;8DAA4D,EAAE,QAAQ;;;;;;;;;;;;sDAE1F,8OAAC;4CAAG,WAAU;sDAAuG,EAAE,IAAI;;;;;;sDAC3H,8OAAC;4CAAE,WAAU;;gDAAiD;gDAAI,OAAO,EAAE,KAAK,EAAE,cAAc;;;;;;;;mCAX3F,EAAE,EAAE;;;;;;;;;;;;;;;;8BAkBzB,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAI,WAAU;;8CACX,8OAAC,sOAAY;oCAAC,MAAM;oCAAI,WAAU;;;;;;8CAClC,8OAAC;oCAAG,WAAU;;wCAAuC;wCAAY,UAAU,MAAM;wCAAC;;;;;;;;;;;;;sCAGtF,8OAAC;4BAAI,WAAU;sCACV,UAAU,MAAM,KAAK,kBAClB,8OAAC;gCAAE,WAAU;0CAA2D;;;;;2EAExE,UAAU,GAAG,CAAC,CAAA,qBACV,8OAAC;oCAA0B,WAAU;;sDACjC,8OAAC;4CAAI,WAAU;;8DACX,8OAAC;oDAAK,WAAU;8DAAkE,KAAK,OAAO,CAAC,IAAI;;;;;;8DACnG,8OAAC;oDAAK,WAAU;;wDAAiD;wDAAI,CAAC,OAAO,KAAK,OAAO,CAAC,KAAK,IAAI,KAAK,GAAG,EAAE,cAAc;;;;;;;;;;;;;sDAE/H,8OAAC;4CAAI,WAAU;;8DACX,8OAAC;oDAAO,SAAS,IAAM,UAAU,KAAK,OAAO,CAAC,EAAE,EAAE,CAAC;oDAAI,WAAU;8DAAgG,cAAA,8OAAC,6MAAK;wDAAC,MAAM;;;;;;;;;;;8DAC9K,8OAAC;oDAAK,WAAU;8DAAgE,KAAK,GAAG;;;;;;8DACxF,8OAAC;oDAAO,SAAS,IAAM,UAAU,KAAK,OAAO,CAAC,EAAE,EAAE;oDAAI,WAAU;8DAAgG,cAAA,8OAAC,0MAAI;wDAAC,MAAM;;;;;;;;;;;;;;;;;;mCAR1K,KAAK,OAAO,CAAC,EAAE;;;;;;;;;;sCAerC,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAI,WAAU;;sDACX,8OAAC;4CAAK,WAAU;sDAA2B;;;;;;sDAC3C,8OAAC;4CAAK,WAAU;;gDAA2D;gDAAI,MAAM,cAAc;;;;;;;;;;;;;8CAEvG,8OAAC;oCACG,SAAS;oCACT,UAAU,UAAU,MAAM,KAAK,KAAK;oCACpC,WAAU;8CAET,eAAe,iBAAiB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO7D;AAEA,gBAAgB;AAChB,MAAM,cAAc,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,SAAS,EAAiE;IAC9G,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,iNAAQ,EAAC;IAC/B,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAoB;IAC9D,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAgB;IAClE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IAEjD,MAAM,kBAAkB,OAAO,MAAM,CAAC,CAAC,IAAW,EAAE,MAAM,KAAK,eAAe,EAAE,IAAI,KAAK;IAEzF,MAAM,eAAe,OAAO;QACxB,EAAE,cAAc;QAChB,IAAI,CAAC,iBAAiB,CAAC,cAAc;QAErC,gBAAgB;QAChB,IAAI;YACA,uCAAuC;YACvC,MAAM,MAAM,MAAM,MAAM,qBAAqB;gBACzC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBACjB;oBACA,OAAO;oBACP;oBACA;oBACA,aAAa,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;oBACnD,aAAa,IAAI,OAAO,YAAY,GAAG,KAAK,CAAC,GAAG;oBAChD,OAAO;gBACX;YACJ;YAEA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;YAE7B,gCAAgC;YAChC,MAAM,WAAW,MAAM,MAAM,CAAC,YAAY,EAAE,cAAc,MAAM,CAAC,EAAE;gBAC/D,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBACjB;oBACA,aAAa;gBACjB;YACJ;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;YAElC;QACJ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC;YACd,MAAM;QACV,SAAU;YACN,gBAAgB;QACpB;IACJ;IAEA,qBACI,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC;YAAI,WAAU;;8BACX,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAG,WAAU;sCAA+C;;;;;;sCAC7D,8OAAC;4BAAO,SAAS;4BAAS,WAAU;sCAA4D,cAAA,8OAAC,iMAAC;gCAAC,MAAM;;;;;;;;;;;;;;;;;8BAE7G,8OAAC;oBAAK,UAAU;oBAAc,WAAU;;sCACpC,8OAAC;;8CACG,8OAAC;oCAAM,WAAU;8CAAkE;;;;;;8CACnF,8OAAC;oCAAM,MAAK;oCAAO,OAAO;oCAAc,UAAU,CAAA,IAAK,gBAAgB,EAAE,MAAM,CAAC,KAAK;oCAAG,QAAQ;oCAC5F,WAAU;;;;;;;;;;;;sCAElB,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;;sDACG,8OAAC;4CAAM,WAAU;sDAAkE;;;;;;sDACnF,8OAAC;4CAAM,MAAK;4CAAS,KAAI;4CAAI,OAAO;4CAAK,UAAU,CAAA,IAAK,OAAO,OAAO,EAAE,MAAM,CAAC,KAAK;4CAChF,WAAU;;;;;;;;;;;;8CAElB,8OAAC;;sDACG,8OAAC;4CAAM,WAAU;sDAAkE;;;;;;sDACnF,8OAAC;4CAAO,OAAO;4CAAW,UAAU,CAAA,IAAK,aAAa,EAAE,MAAM,CAAC,KAAK;4CAChE,WAAU;;8DACV,8OAAC;oDAAO,OAAM;8DAAU;;;;;;8DACxB,8OAAC;oDAAO,OAAM;8DAAM;;;;;;;;;;;;;;;;;;;;;;;;sCAIhC,8OAAC;;8CACG,8OAAC;oCAAM,WAAU;8CAAkE;;;;;;8CACnF,8OAAC;oCAAI,WAAU;8CACV,gBAAgB,GAAG,CAAC,CAAC,kBAClB,8OAAC;4CAEG,MAAK;4CACL,SAAS,IAAM,iBAAiB,EAAE,EAAE;4CACpC,WAAW,CAAC,uDAAuD,EAAE,kBAAkB,EAAE,EAAE,GACrF,yEACA,yHACA;sDAEL,EAAE,IAAI;2CARF,EAAE,EAAE;;;;;;;;;;gCAYpB,gBAAgB,MAAM,KAAK,mBACxB,8OAAC;oCAAE,WAAU;8CAAoD;;;;;;;;;;;;sCAGzE,8OAAC;4BAAO,MAAK;4BAAS,UAAU,CAAC,iBAAiB,CAAC,gBAAgB;4BAC/D,WAAU;sCACT,eAAe,iBAAiB;;;;;;;;;;;;;;;;;;;;;;;AAMzD;AAEA,oBAAoB;AACpB,MAAM,mBAAmB,CAAC,EAAE,OAAO,EAAE,SAAS,EAAkD;IAC5F,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,iNAAQ,EAAC;IAC/B,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAoB;IAC9D,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;IACrF,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IAEjD,MAAM,eAAe,OAAO;QACxB,EAAE,cAAc;QAChB,gBAAgB;QAEhB,IAAI;YACA,MAAM,MAAM,MAAM,MAAM,qBAAqB;gBACzC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBACjB;oBACA;oBACA;oBACA;oBACA;oBACA;gBACJ;YACJ;YAEA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;YAC7B;QACJ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC;YACd,MAAM;QACV,SAAU;YACN,gBAAgB;QACpB;IACJ;IAEA,qBACI,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC;YAAI,WAAU;;8BACX,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAG,WAAU;sCAA+C;;;;;;sCAC7D,8OAAC;4BAAO,SAAS;4BAAS,WAAU;sCAA4D,cAAA,8OAAC,iMAAC;gCAAC,MAAM;;;;;;;;;;;;;;;;;8BAE7G,8OAAC;oBAAK,UAAU;oBAAc,WAAU;;sCACpC,8OAAC;;8CACG,8OAAC;oCAAM,WAAU;8CAAkE;;;;;;8CACnF,8OAAC;oCAAM,MAAK;oCAAO,OAAO;oCAAc,UAAU,CAAA,IAAK,gBAAgB,EAAE,MAAM,CAAC,KAAK;oCAAG,QAAQ;oCAC5F,WAAU;;;;;;;;;;;;sCAElB,8OAAC;;8CACG,8OAAC;oCAAM,WAAU;8CAAkE;;;;;;8CACnF,8OAAC;oCAAM,MAAK;oCAAM,OAAO;oCAAO,UAAU,CAAA,IAAK,SAAS,EAAE,MAAM,CAAC,KAAK;oCAAG,QAAQ;oCAC7E,WAAU;;;;;;;;;;;;sCAElB,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;;sDACG,8OAAC;4CAAM,WAAU;sDAAkE;;;;;;sDACnF,8OAAC;4CAAM,MAAK;4CAAS,KAAI;4CAAI,OAAO;4CAAK,UAAU,CAAA,IAAK,OAAO,OAAO,EAAE,MAAM,CAAC,KAAK;4CAChF,WAAU;;;;;;;;;;;;8CAElB,8OAAC;;sDACG,8OAAC;4CAAM,WAAU;sDAAkE;;;;;;sDACnF,8OAAC;4CAAO,OAAO;4CAAW,UAAU,CAAA,IAAK,aAAa,EAAE,MAAM,CAAC,KAAK;4CAChE,WAAU;;8DACV,8OAAC;oDAAO,OAAM;8DAAU;;;;;;8DACxB,8OAAC;oDAAO,OAAM;8DAAM;;;;;;;;;;;;;;;;;;;;;;;;sCAIhC,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;;sDACG,8OAAC;4CAAM,WAAU;sDAAkE;;;;;;sDACnF,8OAAC;4CAAM,MAAK;4CAAO,OAAO;4CAAa,UAAU,CAAA,IAAK,eAAe,EAAE,MAAM,CAAC,KAAK;4CAAG,QAAQ;4CAC1F,WAAU;;;;;;;;;;;;8CAElB,8OAAC;;sDACG,8OAAC;4CAAM,WAAU;sDAAkE;;;;;;sDACnF,8OAAC;4CAAM,MAAK;4CAAO,OAAO;4CAAa,UAAU,CAAA,IAAK,eAAe,EAAE,MAAM,CAAC,KAAK;4CAAG,QAAQ;4CAC1F,WAAU;;;;;;;;;;;;;;;;;;sCAGtB,8OAAC;4BAAO,MAAK;4BAAS,UAAU;4BAC5B,WAAU;sCACT,eAAe,iBAAiB;;;;;;;;;;;;;;;;;;;;;;;AAMzD;AAEe,SAAS;IACpB,MAAM,EAAE,SAAS,EAAE,GAAG,IAAA,mJAAQ;IAC9B,MAAM,EAAE,MAAM,UAAU,EAAE,MAAM,EAAE,GAAG,IAAA,yKAAM,EAAC,eAAe,SAAS;QAAE,iBAAiB;IAAM,IAAI,kBAAkB;IACnH,MAAM,SAAS,YAAY,QAAQ,EAAE;IAErC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAgB;IAC5D,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAkB;IAC1D,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAM;IAC1D,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAS;IACzD,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,iNAAQ,EAAC;IAC7D,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAkB,SAAS,8BAA8B;IACvG,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAC;IACvD,MAAM,CAAC,sBAAsB,wBAAwB,GAAG,IAAA,iNAAQ,EAAC;IAEjE,yBAAyB;IACzB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IAEjD,sCAAsC;IACtC,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAC;IACvD,MAAM,CAAC,WAAW,gBAAgB,GAAG,IAAA,sNAAa;IAElD,MAAM,gBAAgB,OAAO,IAAI,CAAC,CAAC,IAAW,EAAE,EAAE,KAAK;IAEvD,MAAM,iBAAiB,CAAC;QACpB,OAAQ;YACJ,KAAK;gBAAa,OAAO;YACzB,KAAK;gBAAU,OAAO;YACtB,KAAK;gBAAU,OAAO;YACtB,KAAK;gBAAY,OAAO;YACxB,KAAK;gBAAe,OAAO;YAC3B;gBAAS,OAAO;QACpB;IACJ;IAEA,MAAM,eAAe,IAAA,oNAAW,EAAC,OAAO,QAA0B,aAA+B;QAC7F,IAAI,CAAC,cAAc,iBAAiB;QAEpC,mBAAmB;QAEnB,2DAA2D;QAC3D,MAAM,iBAAiB;YACnB,GAAG,UAAU;YACb,MAAM,OAAO,GAAG,CAAC,CAAC,IACd,EAAE,EAAE,KAAK,aACH;oBAAE,GAAG,CAAC;oBAAE,QAAQ,WAAW,UAAU,WAAW;gBAAY,IAC5D;QAEd;QAEA,wBAAwB;QACxB,gBAAgB;YACZ,OAAO,gBAAgB,QAAQ,yCAAyC;QAC5E;QAEA,MAAM,YAAY,gBAAgB,YAAY,gBAAgB,gBAAgB;QAC9E,MAAM,OAAO,WAAW,UAAU;YAC9B,cAAc,aAAa;YAC3B,UAAU,gBAAgB;YAC1B,aAAa,eAAe;YAC5B,YAAY,OAAO,gBAAgB,WAAW,cAAc;QAChE,IAAI,CAAC;QAEL,IAAI;YACA,MAAM,MAAM,MAAM,MAAM,CAAC,YAAY,EAAE,WAAW,CAAC,EAAE,QAAQ,EAAE;gBAC3D,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;YACzB;YAEA,IAAI,CAAC,IAAI,EAAE,EAAE;gBACT,kBAAkB;gBAClB;gBACA,MAAM,MAAM,MAAM,IAAI,IAAI;gBAC1B,QAAQ,KAAK,CAAC,kBAAkB;YACpC,OAAO;gBACH,wBAAwB;gBACxB;YACJ;QACJ,EAAE,OAAO,GAAG;YACR,QAAQ,KAAK,CAAC,iBAAiB;YAC/B,UAAU,kBAAkB;QAChC,SAAU;YACN,mBAAmB;YACnB,kBAAkB;YAClB,gBAAgB;QACpB;IACJ,GAAG;QAAC;QAAY;QAAiB;QAAY;QAAQ;QAAgB;QAAc;KAAO;IAE1F,qBACI,8OAAC;QAAI,WAAU;;YAEV,sBAAsB,+BACnB,8OAAC;gBACG,YAAY,cAAc,UAAU,IAAI;gBACxC,SAAS,IAAM,sBAAsB;gBACrC,UAAU,CAAC,MAAM;oBACb,eAAe;oBACf,IAAI,MAAM,gBAAgB;oBAC1B,aAAa,SAAS,MAAM;oBAC5B,sBAAsB;gBAC1B;;;;;;0BAKR,8OAAC;gBAAK,WAAU;;kCAEZ,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCAAI,WAAU;;0DACX,8OAAC;gDAAG,WAAU;0DAA+C;;;;;;0DAC7D,8OAAC;gDAAO,SAAS,IAAM,WAAW;gDAAO,WAAU;0DAAkL,cAAA,8OAAC,sNAAQ;oDAAC,MAAM;;;;;;;;;;;;;;;;;kDAEzP,8OAAC;wCAAI,WAAU;;0DACX,8OAAC;gDAAI,WAAU;;;;;;4CAAuD;0DACtE,8OAAC;gDAAI,WAAU;;;;;;4CAA8D;0DAC7E,8OAAC;gDAAI,WAAU;;;;;;4CAA8C;;;;;;;;;;;;;0CAGrE,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCACG,SAAS,IAAM,YAAY;wCAC3B,WAAW,CAAC;oCACJ,EAAE,aAAa,SAAS,qFAAqF,mGAAmG;gCACpN,CAAC;;0DAEL,8OAAC,gOAAU;gDAAC,MAAM;;;;;;4CAAM;;;;;;;kDAE5B,8OAAC;wCACG,SAAS,IAAM,YAAY;wCAC3B,WAAW,CAAC;oCACJ,EAAE,aAAa,SAAS,qFAAqF,mGAAmG;gCACpN,CAAC;;0DAEL,8OAAC,0MAAI;gDAAC,MAAM;;;;;;4CAAM;;;;;;;;;;;;;;;;;;;kCAM9B,8OAAC;wBAAI,WAAU;kCACV,aAAa,uBACV,8OAAC;4BAAI,WAAU;sCACV,OAAO,GAAG,CAAC,CAAC,sBACT,8OAAC;oCAEG,SAAS;wCACL,gEAAgE;wCAChE,IAAI,MAAM,MAAM,KAAK,YAAY;4CAC7B,CAAC;gDACG,IAAI;oDACA,MAAM,MAAM,CAAC,YAAY,EAAE,MAAM,EAAE,EAAE,EAAE;wDACnC,QAAQ;wDACR,SAAS;4DAAE,gBAAgB;wDAAmB;wDAC9C,MAAM,KAAK,SAAS,CAAC;4DAAE,QAAQ;wDAAY;oDAC/C;oDACA,MAAM;oDACN,UAAU,WAAW,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC;gDACvD,EAAE,OAAO,GAAG;oDACR,UAAU,SAAS;gDACvB;4CACJ,CAAC;wCACL,OAAO;4CACH,cAAc,MAAM,EAAE;wCAC1B;oCACJ;oCACA,WAAW,CAAC;0BACtB,EAAE,eAAe,MAAM,MAAM,EAAE;0BAC/B,EAAE,eAAe,MAAM,EAAE,GAAG,4BAA4B,GAAG;wBAC7D,CAAC;;sDAGW,8OAAC;4CAAI,WAAU;;8DACX,8OAAC;oDAAI,WAAU;;sEACX,8OAAC;4DAAK,WAAU;sEAAkC,MAAM,IAAI;;;;;;sEAC5D,8OAAC;4DAAK,WAAU;;gEAAmE,MAAM,IAAI,IAAI;gEAAU;;;;;;;;;;;;;gDAE9G,MAAM,MAAM,KAAK,0BAAY,8OAAC;oDAAI,WAAU;;;;;;;;;;;;sDAIjD,8OAAC;4CAAI,WAAU;sDACV,MAAM,MAAM,KAAK,YAAY,MAAM,aAAa,iBAC7C,8OAAC;gDACG,WAAW,MAAM,aAAa,CAAC,SAAS;gDACxC,SAAS,MAAM,aAAa,CAAC,OAAO;gDACpC,YAAY,MAAM,UAAU,IAAI;gDAChC,UAAU,MAAM,aAAa,CAAC,MAAM,KAAK;gDACzC,WAAW;oDACP,IAAI,eAAe,MAAM,EAAE,EAAE;wDACzB,MAAM;oDACV;gDACJ;gDACA,UAAU;oDACN,IAAI,eAAe,MAAM,EAAE,IAAI,CAAC,YAAY;wDACxC,cAAc,MAAM,EAAE;wDACtB,gBAAgB;oDACpB;gDACJ;;;;;qEAGJ,8OAAC;gDAAI,WAAU;;kEACX,8OAAC;wDAAI,WAAU;kEACX,cAAA,8OAAC,0MAAI;4DAAC,MAAM;;;;;;;;;;;kEAEhB,8OAAC;wDAAK,WAAU;kEAAuB,MAAM,MAAM;;;;;;;;;;;;;;;;;sDAM/D,8OAAC;4CAAI,WAAU;;8DACX,8OAAC;oDAAI,WAAU;;sEACX,8OAAC,6MAAK;4DAAC,MAAM;;;;;;sEACb,8OAAC;4DAAK,WAAU;sEAA0B,MAAM,aAAa,EAAE,gBAAgB;;;;;;;;;;;;gDAElF,MAAM,aAAa,kBAChB,8OAAC;oDAAI,WAAU;;sEACX,8OAAC,6MAAK;4DAAC,MAAM;;;;;;sEACb,8OAAC;4DAAK,WAAU;sEACX,IAAI,KAAK,MAAM,aAAa,CAAC,SAAS,EAAE,kBAAkB,CAAC,EAAE,EAAE;gEAAE,MAAM;gEAAW,QAAQ;4DAAU;;;;;;;;;;;;;;;;;;;mCA3EhH,MAAM,EAAE;;;;;;;;;iDAoFzB,8OAAC;4BAAI,WAAU;sCACV,OAAO,GAAG,CAAC,CAAC,sBACT,8OAAC;oCAEG,SAAS,IAAM,cAAc,MAAM,EAAE;oCACrC,WAAW,CAAC;4CACJ,EAAE,eAAe,MAAM,EAAE,GAAG,uDAAuD,wDAAwD;wCAC/I,CAAC;;sDAEL,8OAAC;4CAAI,WAAU;;8DACX,8OAAC;oDAAI,WAAW,CAAC,oBAAoB,EAAE,MAAM,MAAM,KAAK,WAAW,6CAC/D,MAAM,MAAM,KAAK,WAAW,iCACxB,MAAM,MAAM,KAAK,gBAAgB,iBAAiB,gBACpD;;;;;;8DACN,8OAAC;;sEACG,8OAAC;4DAAG,WAAU;sEAAgD,MAAM,IAAI;;;;;;sEACxE,8OAAC;4DAAE,WAAU;;gEAAoC,MAAM,IAAI,IAAI;gEAAU;;;;;;;;;;;;;;;;;;;sDAIjF,8OAAC;4CAAI,WAAU;;gDACV,MAAM,MAAM,KAAK,YAAY,MAAM,aAAa,kBAC7C,8OAAC;oDACG,WAAW,MAAM,aAAa,CAAC,SAAS;oDACxC,YAAY,MAAM,UAAU,IAAI;;;;;;8DAGxC,8OAAC;oDAAI,WAAU;;sEACX,8OAAC,6MAAK;4DAAC,MAAM;;;;;;sEACb,8OAAC;4DAAK,WAAU;sEAAuB,MAAM,aAAa,EAAE,gBAAgB;;;;;;;;;;;;;;;;;;;mCA1B/E,MAAM,EAAE;;;;;;;;;;;;;;;;;;;;;0BAqCrC,8OAAC;gBAAM,WAAU;0BACZ,gBACG,qBAAqB;8BACrB;;sCACI,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAI,WAAU;;sDACX,8OAAC;;8DACG,8OAAC;oDAAG,WAAU;8DAAiD,cAAc,IAAI;;;;;;8DACjF,8OAAC;oDAAE,WAAU;;wDAAoC,cAAc,IAAI,IAAI;wDAAU;wDAAoB,cAAc,QAAQ,IAAI;;;;;;;;;;;;;sDAEnI,8OAAC;4CAAO,SAAS,IAAM,cAAc;4CAAO,WAAU;sDAA4D,cAAA,8OAAC,iMAAC;gDAAC,MAAM;;;;;;;;;;;;;;;;;8CAE/H,8OAAC;oCAAI,WAAU;;sDACX,8OAAC;4CACG,SAAS;gDACL,IAAI,cAAc,MAAM,KAAK,YAAY;oDACrC,IAAI;wDACA,MAAM,MAAM,CAAC,YAAY,EAAE,YAAY,EAAE;4DACrC,QAAQ;4DACR,SAAS;gEAAE,gBAAgB;4DAAmB;4DAC9C,MAAM,KAAK,SAAS,CAAC;gEAAE,QAAQ;4DAAY;wDAC/C;wDACA,MAAM;wDACN,UAAU,WAAW;oDACzB,EAAE,OAAO,GAAG;wDACR,UAAU,SAAS;oDACvB;gDACJ;4CACJ;4CACA,WAAW,CAAC,2CAA2C,EAAE,eAAe,cAAc,MAAM,EAAE,eAAe,EAAE,cAAc,MAAM,KAAK,aAAa,yEAAyE,IAAI;sDAEjO,cAAc,MAAM;;;;;;wCAExB,cAAc,MAAM,KAAK,0BAAY,8OAAC;4CAAK,WAAU;sDAA2D;;;;;;wCAChH,cAAc,MAAM,KAAK,4BAAc,8OAAC;4CAAK,WAAU;sDAA0B;;;;;;;;;;;;;;;;;;sCAI1F,8OAAC;4BAAI,WAAU;;gCAEV,cAAc,MAAM,KAAK,6BACtB,8OAAC;oCAAI,WAAU;;sDACX,8OAAC;4CAAM,WAAU;sDAAkE;;;;;;sDACnF,8OAAC;4CAAI,WAAU;;8DACX,8OAAC;oDACG,MAAK;oDACL,aAAY;oDACZ,OAAO,gBAAgB,YAAY;oDACnC,WAAU;oDACV,UAAU,OAAO;wDACb,MAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;wDAC5B,gBAAgB;wDAChB,kBAAkB;wDAElB,+BAA+B;wDAC/B,IAAI,MAAM,MAAM,GAAG,GAAG;4DAClB,MAAM,UAAU,MAAM,aAAa;4DACnC,IAAI,QAAQ,MAAM,GAAG,GAAG,kBAAkB,OAAO,CAAC,EAAE;wDACxD;oDACJ;oDACA,WAAW,CAAC;wDACR,IAAI,EAAE,GAAG,KAAK,WAAW,cAAc,MAAM,KAAK,YAAY,CAAC,iBAAiB;4DAC5E,sBAAsB;wDAC1B;oDACJ;;;;;;gDAEH,gCACG,8OAAC;oDAAI,WAAU;;sEACX,8OAAC,6MAAK;4DAAC,MAAM;;;;;;wDAAM;;;;;;;;;;;;;;;;;;;8CAOvC,8OAAC;oCAAI,WAAU;;sDACX,8OAAC;4CACG,SAAS,IAAM,sBAAsB;4CACrC,UAAU,cAAc,MAAM,KAAK,YAAY;4CAC/C,WAAU;;gDAET,gCACG,8OAAC,6NAAS;oDAAC,MAAM;oDAAI,WAAU;;;;;yEAE/B,8OAAC,0MAAI;oDAAC,MAAM;oDAAI,WAAU;;;;;;8DAE9B,8OAAC;oDAAK,WAAU;8DAAqC;;;;;;;;;;;;sDAEzD,8OAAC;4CACG,SAAS;gDACL,IAAI,CAAC,cAAc,iBAAiB;gDACpC,mBAAmB;gDACnB,IAAI;oDACA,MAAM,MAAM,CAAC,YAAY,EAAE,WAAW,MAAM,CAAC,EAAE;wDAAE,QAAQ;oDAAO;oDAChE;gDACJ,SAAU;oDACN,mBAAmB;gDACvB;4CACJ;4CACA,UAAU,AAAC,cAAc,MAAM,KAAK,YAAY,cAAc,MAAM,KAAK,YAAa;4CACtF,WAAU;;gDAET,gCACG,8OAAC,6NAAS;oDAAC,MAAM;oDAAI,WAAU;;;;;yEAE/B,8OAAC,6MAAK;oDAAC,MAAM;oDAAI,WAAU;;;;;;8DAE/B,8OAAC;oDAAK,WAAU;8DACX,cAAc,aAAa,EAAE,WAAW,WAAW,WAAW;;;;;;;;;;;;sDAGvE,8OAAC;4CACG,SAAS;gDACL,IAAI,CAAC,cAAc,aAAa,EAAE;gDAClC,gBAAgB;4CACpB;4CACA,UAAU,cAAc,MAAM,KAAK,YAAY;4CAC/C,WAAU;;8DAEV,8OAAC,gNAAM;oDAAC,MAAM;oDAAI,WAAU;;;;;;8DAC5B,8OAAC;oDAAK,WAAU;8DAAqC;;;;;;;;;;;;;;;;;;8CAK7D,8OAAC;oCACG,SAAS,IAAM,gBAAgB;oCAC/B,WAAU;;sDAEV,8OAAC,gPAAc;4CAAC,MAAM;;;;;;sDACtB,8OAAC;4CAAK,WAAU;sDAAsB;;;;;;;;;;;;8CAG1C,8OAAC;oCAAG,WAAU;8CAA2E;;;;;;8CACzF,8OAAC;oCAAI,WAAU;8CACX,cAAA,8OAAC;wCACG,SAAS,IAAM,gBAAgB;wCAC/B,UAAU,cAAc,MAAM,KAAK;wCACnC,WAAU;kDAEV,cAAA,8OAAC;4CAAI,WAAU;;8DACX,8OAAC;oDAAI,WAAU;8DAAyE,cAAA,8OAAC,gNAAM;wDAAC,MAAM;;;;;;;;;;;8DACtG,8OAAC;oDAAK,WAAU;8DAA4E;;;;;;;;;;;;;;;;;;;;;;8CAKxG,8OAAC;oCACG,SAAS,IAAM,gBAAgB;oCAC/B,UAAU,cAAc,MAAM,KAAK;oCACnC,WAAU;;sDAEV,8OAAC,mNAAO;4CAAC,MAAM;;;;;;wCAAM;;;;;;;gCAIxB,cAAc,MAAM,KAAK,YAAY,cAAc,aAAa,kBAC7D,8OAAC;oCAAI,WAAU;8CACX,cAAA,8OAAC;wCAAI,WAAU;;0DACX,8OAAC;gDAAK,WAAU;0DAAuC;;;;;;0DACvD,8OAAC;gDACG,WAAW,cAAc,aAAa,CAAC,SAAS;gDAChD,YAAY,cAAc,UAAU,IAAI;;;;;;;;;;;;;;;;;;;;;;;;mCAQhE,sCAAsC;8BACtC,8OAAC;oBACG,cAAc,IAAM,mBAAmB;oBACvC,mBAAmB,IAAM,wBAAwB;;;;;;;;;;;YAK5D,gBAAgB,+BACb,8OAAC,oJAAa;gBACV,OAAO;gBACP,SAAS,IAAM,gBAAgB;gBAC/B,WAAW,OAAO,QAAQ,MAAM,OAAO;oBACnC,IAAI;wBACA,gDAAgD;wBAChD,MAAM,UAAU,MAAM,MAAM,CAAC,YAAY,EAAE,cAAc,EAAE,CAAC,KAAK,CAAC,EAAE;4BAAE,QAAQ;wBAAO;wBACrF,MAAM,WAAW,MAAM,QAAQ,IAAI;wBAEnC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,OAAO,EAAE;4BAClC,MAAM,IAAI,MAAM,SAAS,KAAK,IAAI;wBACtC;wBAEA,MAAM,YAAY,SAAS,IAAI,EAAE;wBAEjC,wCAAwC;wBACxC,MAAM,WAAW,MAAM,MAAM,qBAAqB;4BAC9C,QAAQ;4BACR,SAAS;gCAAE,gBAAgB;4BAAmB;4BAC9C,MAAM,KAAK,SAAS,CAAC;gCACjB;gCACA,cAAc,cAAc,aAAa,EAAE;gCAC3C,eAAe;gCACf,OAAO,MAAM,0CAA0C;4BAC3D;wBACJ;wBAEA,MAAM,YAAY,MAAM,SAAS,IAAI;wBACrC,QAAQ,GAAG,CAAC,yBAAyB,YAAY,QAAQ;wBAEzD,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,UAAU,OAAO,EAAE;4BACpC,8BAA8B;4BAC9B,MAAM,SAAS,UAAU,OAAO,GAC1B,KAAK,SAAS,CAAC,UAAU,OAAO,IAChC,UAAU,KAAK,IAAI;4BACzB,MAAM,IAAI,MAAM;wBACpB;wBAEA,MAAM;wBACN,gBAAgB;wBAChB,cAAc;wBACd,UAAU,WAAW,CAAC,uBAAuB,EAAE,MAAM,cAAc,GAAG,gBAAgB,CAAC;oBAC3F,EAAE,OAAO,GAAQ;wBACb,QAAQ,KAAK,CAAC,mBAAmB;wBACjC,UAAU,SAAS,EAAE,OAAO,IAAI;oBACpC;gBACJ;;;;;;YAIP,gBAAgB,+BACb,8OAAC;gBACG,aAAa;gBACb,QAAQ;gBACR,SAAS,IAAM,gBAAgB;gBAC/B,WAAW,OAAO;oBACd,IAAI;wBACA,MAAM,MAAM,MAAM,MAAM,wBAAwB;4BAC5C,QAAQ;4BACR,SAAS;gCAAE,gBAAgB;4BAAmB;4BAC9C,MAAM,KAAK,SAAS,CAAC;gCAAE,aAAa,cAAc,EAAE;gCAAE,WAAW;4BAAS;wBAC9E;wBAEA,IAAI,CAAC,IAAI,EAAE,EAAE;4BACT,MAAM,MAAM,MAAM,IAAI,IAAI;4BAC1B,MAAM,IAAI,KAAK,IAAI;4BACnB;wBACJ;wBAEA,MAAM,UAAU,eAAe;wBAC/B,gBAAgB;wBAChB,cAAc;oBAClB,EAAE,OAAO,GAAG;wBACR,QAAQ,KAAK,CAAC,mBAAmB;wBACjC,MAAM;oBACV;gBACJ;;;;;;YAIP,yBACG,8OAAC;gBACG,UAAS;gBACT,SAAS,IAAM,WAAW;gBAC1B,WAAW;oBAAQ,WAAW;oBAAQ,gBAAgB;gBAAO;;;;;;YAGpE,8BAAgB,8OAAC;gBAAqB,SAAS,IAAM,gBAAgB;;;;;;YAErE,gBAAgB,eAAe,+BAC5B,8OAAC;gBACG,WAAW,cAAc,aAAa,CAAC,EAAE;gBACzC,SAAS,IAAM,gBAAgB;gBAC/B,WAAW;oBAAQ,gBAAgB;oBAAQ;gBAAU;;;;;;YAI5D,iCACG,8OAAC;gBACG,QAAQ;gBACR,SAAS,IAAM,mBAAmB;gBAClC,WAAW;oBACP,mBAAmB;oBACnB;gBACJ;;;;;;YAIP,sCACG,8OAAC;gBACG,SAAS,IAAM,wBAAwB;gBACvC,WAAW;oBACP,wBAAwB;oBACxB;gBACJ;;;;;;;;;;;;AAKpB"}}]
}