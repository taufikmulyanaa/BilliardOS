module.exports=[73570,a=>{"use strict";let b=(0,a.i(70106).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);a.s(["AlertTriangle",()=>b],73570)},71931,a=>{"use strict";let b=(0,a.i(70106).default)("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);a.s(["Printer",()=>b],71931)},32860,a=>{"use strict";let b=(0,a.i(70106).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);a.s(["ArrowRight",()=>b],32860)},10550,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(72596),e=a.i(73570),f=a.i(71931),g=a.i(32860);let h=(0,a.i(70106).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),i=a=>fetch(a).then(a=>a.json());function j(){let{data:a,mutate:j}=(0,d.default)("/api/reports/shift",i),k=a?.data,[l,m]=(0,c.useState)(1),[n,o]=(0,c.useState)(0),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(!1);if(!a)return(0,b.jsx)("div",{className:"p-10 text-slate-500",children:"Loading Report Module..."});let t=!!k,u=k?Number(k.openingCash)+Number(k.cashSales):0,v=n-u,w=async()=>{s(!0);try{if(!(await fetch("/api/reports/shift/close",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shiftId:k.shiftId,actualCash:n,varianceReason:p})})).ok)throw Error("Failed to close shift");m(4),j()}catch(a){alert("Error closing shift"),console.error(a)}finally{s(!1)}};return(0,b.jsxs)("div",{className:"flex min-h-screen bg-[#050a07]",children:[(0,b.jsxs)("div",{className:"w-64 bg-[#0f1a14] border-r border-[#1e3328] p-6 hidden md:block print:hidden",children:[(0,b.jsx)("h1",{className:"text-xl font-bold text-[#22c55e] mb-8",children:"BilliardPOS"}),(0,b.jsxs)("nav",{className:"space-y-2",children:[(0,b.jsx)("a",{href:"/dashboard",className:"block p-3 rounded text-slate-400 hover:text-white hover:bg-[#1e3328]",children:"Dashboard"}),(0,b.jsx)("a",{href:"/reports",className:"block p-3 rounded bg-[#22c55e]/10 text-[#22c55e] font-bold",children:"Reports"})]})]}),(0,b.jsx)("main",{className:"flex-1 p-8",children:t||4===l?(0,b.jsxs)("div",{className:"max-w-3xl mx-auto",children:[4!==l&&(0,b.jsxs)("div",{className:"flex items-center justify-between mb-8 print:hidden",children:[(0,b.jsxs)("div",{className:`flex items-center gap-2 ${l>=1?"text-[#22c55e]":"text-slate-600"}`,children:[(0,b.jsx)("div",{className:"size-8 rounded-full border-2 flex items-center justify-center font-bold border-current",children:"1"}),(0,b.jsx)("span",{className:"font-bold hidden sm:inline",children:"Overview"})]}),(0,b.jsx)("div",{className:"h-0.5 flex-1 bg-[#1e3328] mx-4"}),(0,b.jsxs)("div",{className:`flex items-center gap-2 ${l>=2?"text-[#eab308]":"text-slate-600"}`,children:[(0,b.jsx)("div",{className:"size-8 rounded-full border-2 flex items-center justify-center font-bold border-current",children:"2"}),(0,b.jsx)("span",{className:"font-bold hidden sm:inline",children:"Cash Count"})]}),(0,b.jsx)("div",{className:"h-0.5 flex-1 bg-[#1e3328] mx-4"}),(0,b.jsxs)("div",{className:`flex items-center gap-2 ${l>=3?"text-white":"text-slate-600"}`,children:[(0,b.jsx)("div",{className:"size-8 rounded-full border-2 flex items-center justify-center font-bold border-current",children:"3"}),(0,b.jsx)("span",{className:"font-bold hidden sm:inline",children:"Review"})]})]}),1===l&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-[#16261d] p-6 rounded-xl border border-[#1e3328]",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"Ringkasan Shift Berjalan"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-slate-400 text-sm",children:"Shift ID"}),(0,b.jsxs)("p",{className:"text-white font-mono",children:["#",k?.shiftId]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-slate-400 text-sm",children:"Dibuka"}),(0,b.jsx)("p",{className:"text-white font-mono",children:new Date(k?.openedAt).toLocaleTimeString()})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-slate-400 text-sm",children:"Kas Awal"}),(0,b.jsxs)("p",{className:"text-white font-mono",children:["Rp ",Number(k?.openingCash).toLocaleString()]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-slate-400 text-sm",children:"Penjualan Tunai (Sistem)"}),(0,b.jsxs)("p",{className:"text-[#22c55e] font-bold font-mono",children:["Rp ",Number(k?.cashSales).toLocaleString()]})]})]})]}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsxs)("button",{onClick:()=>m(2),className:"bg-[#22c55e] hover:bg-[#16a34a] text-black px-6 py-3 rounded-lg font-bold flex items-center gap-2",children:["Mulai Tutup Shift ",(0,b.jsx)(g.ArrowRight,{size:20})]})})]}),2===l&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-[#16261d] p-6 rounded-xl border border-[#1e3328]",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:"Hitung Uang Fisik (Cash Count)"}),(0,b.jsx)("p",{className:"text-slate-400 text-sm mb-6",children:"Silakan hitung total uang tunai yang ada di laci kasir saat ini."}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("label",{className:"block text-slate-500 text-xs font-bold uppercase mb-2",children:"Total Uang di Laci"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 font-bold",children:"Rp"}),(0,b.jsx)("input",{type:"number",autoFocus:!0,className:"w-full bg-black border border-[#1e3328] rounded-lg py-4 pl-12 pr-4 text-3xl text-white font-mono focus:border-[#22c55e] outline-none",value:n||"",onChange:a=>o(Number(a.target.value))})]})]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("button",{onClick:()=>m(1),className:"text-slate-400 hover:text-white font-medium",children:"Kembali"}),(0,b.jsxs)("button",{onClick:()=>m(3),disabled:n<=0,className:"bg-[#eab308] hover:bg-yellow-500 text-black px-6 py-3 rounded-lg font-bold flex items-center gap-2 disabled:opacity-50",children:["Lanjut: Review Selisih ",(0,b.jsx)(g.ArrowRight,{size:20})]})]})]}),3===l&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-[#16261d] p-6 rounded-xl border border-[#1e3328]",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-white mb-6",children:"Review & Validasi"}),(0,b.jsxs)("div",{className:"bg-[#050a07] border border-[#1e3328] rounded-lg p-4 space-y-3 mb-6",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-slate-400",children:"Total System (Start + Sales)"}),(0,b.jsxs)("span",{className:"text-white font-mono",children:["Rp ",u.toLocaleString()]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-slate-400",children:"Actual Cash (Input)"}),(0,b.jsxs)("span",{className:"text-white font-mono",children:["Rp ",n.toLocaleString()]})]}),(0,b.jsx)("div",{className:"h-px bg-[#1e3328] my-2"}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-lg font-bold text-white",children:"Variance (Selisih)"}),(0,b.jsxs)("span",{className:`text-xl font-bold font-mono ${0===v?"text-[#22c55e]":"text-red-500"}`,children:[v>0?"+":"","Rp ",v.toLocaleString()]})]})]}),0!==v&&(0,b.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 p-4 rounded-lg mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-red-500 mb-2 font-bold",children:[(0,b.jsx)(e.AlertTriangle,{size:20}),(0,b.jsx)("span",{children:"Terjadi Selisih!"})]}),(0,b.jsx)("p",{className:"text-sm text-slate-300 mb-3",children:"Mohon berikan alasan untuk selisih ini sebelum menutup shift."}),(0,b.jsx)("textarea",{className:"w-full bg-black/50 border border-red-500/30 rounded p-3 text-white text-sm focus:border-red-500 outline-none",placeholder:"Contoh: Salah kembalian, uang hilang, dll...",rows:3,value:p,onChange:a=>q(a.target.value)})]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("button",{onClick:()=>m(2),className:"text-slate-400 hover:text-white font-medium",children:"Kembali Hitung"}),(0,b.jsxs)("button",{onClick:w,disabled:0!==v&&p.length<5||r,className:"bg-[#22c55e] hover:bg-[#16a34a] text-black px-6 py-3 rounded-lg font-bold flex items-center gap-2 disabled:opacity-50",children:[r?"Memproses...":"Konfirmasi & Tutup Shift"," ",(0,b.jsx)(h,{size:20})]})]})]}),4===l&&(0,b.jsxs)("div",{className:"text-center py-10",children:[(0,b.jsx)("div",{className:"size-20 bg-[#22c55e]/20 text-[#22c55e] rounded-full flex items-center justify-center mx-auto mb-6",children:(0,b.jsx)(h,{size:48})}),(0,b.jsx)("h2",{className:"text-3xl font-bold text-white mb-2",children:"Shift Berhasil Ditutup!"}),(0,b.jsx)("p",{className:"text-slate-400 mb-8 max-w-md mx-auto",children:"Laporan Z-Report telah dibuat. Silakan cetak laporan ini untuk arsip fisik."}),(0,b.jsxs)("div",{className:"flex justify-center gap-4 print:hidden",children:[(0,b.jsxs)("button",{onClick:()=>{window.print()},className:"bg-[#eab308] hover:bg-yellow-500 text-black px-6 py-3 rounded-lg font-bold flex items-center gap-2 shadow-lg shadow-yellow-500/20",children:[(0,b.jsx)(f.Printer,{size:20})," Cetak Z-Report"]}),(0,b.jsx)("a",{href:"/dashboard",className:"bg-[#1e3328] hover:bg-[#22c55e] hover:text-black text-white px-6 py-3 rounded-lg font-bold flex items-center gap-2",children:"Kembali ke Dashboard"})]}),(0,b.jsxs)("div",{className:"hidden print:block mt-10 text-left border p-4 font-mono text-black",children:[(0,b.jsx)("h1",{className:"text-center font-bold text-xl border-b pb-2 mb-4",children:"Z-REPORT"}),(0,b.jsxs)("p",{children:["Shift ID: #",k?.shiftId]}),(0,b.jsxs)("p",{children:["Date: ",new Date().toLocaleDateString()]}),(0,b.jsx)("hr",{className:"my-2"}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Opening"}),(0,b.jsx)("span",{children:Number(k?.openingCash).toLocaleString()})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Sales (Cash)"}),(0,b.jsx)("span",{children:Number(k?.cashSales).toLocaleString()})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Total Expected"}),(0,b.jsx)("span",{children:u.toLocaleString()})]}),(0,b.jsx)("hr",{className:"my-2"}),(0,b.jsxs)("div",{className:"flex justify-between font-bold",children:[(0,b.jsx)("span",{children:"ACTUAL COUNT"}),(0,b.jsx)("span",{children:n.toLocaleString()})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Variance"}),(0,b.jsx)("span",{children:v.toLocaleString()})]}),p&&(0,b.jsxs)("p",{className:"mt-2 text-xs italic",children:["Note: ",p]}),(0,b.jsx)("hr",{className:"my-4"}),(0,b.jsx)("p",{className:"text-center text-xs",children:"** END OF REPORT **"}),(0,b.jsx)("p",{className:"text-center text-xs",children:new Date().toLocaleString()})]})]})]}):(0,b.jsx)("div",{className:"flex h-full items-center justify-center text-slate-500",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(e.AlertTriangle,{size:48,className:"mx-auto mb-4 opacity-50"}),(0,b.jsx)("h2",{className:"text-xl font-bold",children:"Tidak ada Shift Aktif"}),(0,b.jsx)("p",{children:"Buka shift baru dari Dashboard untuk memulai."}),(0,b.jsx)("a",{href:"/dashboard",className:"text-[#22c55e] hover:underline mt-4 block",children:"Kembali ke Dashboard"})]})})})]})}a.s(["default",()=>j],10550)}];

//# sourceMappingURL=_47e73bd2._.js.map