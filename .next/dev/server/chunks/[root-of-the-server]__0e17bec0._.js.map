{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Lenovo/Documents/BilliardOS/app/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\r\n\r\nconst prismaClientSingleton = () => {\r\n    return new PrismaClient();\r\n};\r\n\r\ntype PrismaClientSingleton = ReturnType<typeof prismaClientSingleton>;\r\n\r\nconst globalForPrisma = globalThis as unknown as {\r\n    prisma: PrismaClientSingleton | undefined;\r\n};\r\n\r\nexport const prisma = globalForPrisma.prisma ?? prismaClientSingleton();\r\n\r\nif (process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = prisma;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,wBAAwB;IAC1B,OAAO,IAAI,6IAAY;AAC3B;AAIA,MAAM,kBAAkB;AAIjB,MAAM,SAAS,gBAAgB,MAAM,IAAI;AAEhD,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Lenovo/Documents/BilliardOS/app/src/app/api/reservations/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport { prisma } from \"@/lib/prisma\";\r\nimport { z } from \"zod\";\r\n\r\nexport const dynamic = 'force-dynamic';\r\n\r\nconst reservationSchema = z.object({\r\n    customerName: z.string(),\r\n    phone: z.string(),\r\n    bookingDate: z.string(), // YYYY-MM-DD\r\n    bookingTime: z.string(), // HH:MM\r\n    pax: z.number(),\r\n    tableType: z.enum(['VIP', 'REGULAR']),\r\n    notes: z.string().optional(),\r\n});\r\n\r\nexport async function GET() {\r\n    try {\r\n        const reservations = await prisma.reservation.findMany({\r\n            where: {\r\n                // filter by date? for now return upcoming\r\n                bookingDate: { gte: new Date() }\r\n            },\r\n            orderBy: { bookingDate: 'asc' }\r\n        });\r\n        return NextResponse.json({ success: true, data: reservations });\r\n    } catch (error) {\r\n        return NextResponse.json({ error: \"Internal Error\" }, { status: 500 });\r\n    }\r\n}\r\n\r\nexport async function POST(request: Request) {\r\n    try {\r\n        const body = await request.json();\r\n        const data = reservationSchema.parse(body);\r\n\r\n        // Parse Date/Time\r\n        const date = new Date(data.bookingDate);\r\n        // Combine date and time string? Or store as separate fields as defined in schema?\r\n        // Schema: bookingDate @db.Date, bookingTime @db.Time\r\n        // Prisma treats DateTime for both.\r\n\r\n        // For Time, we need a DateTime object.\r\n        const [hours, minutes] = data.bookingTime.split(':');\r\n        const timeDate = new Date();\r\n        timeDate.setHours(Number(hours), Number(minutes), 0, 0);\r\n\r\n        const reservation = await prisma.reservation.create({\r\n            data: {\r\n                customerName: data.customerName,\r\n                phone: data.phone,\r\n                bookingDate: date,\r\n                bookingTime: timeDate,\r\n                pax: data.pax,\r\n                tableType: data.tableType,\r\n                status: 'PENDING',\r\n                notes: data.notes\r\n            }\r\n        });\r\n\r\n        return NextResponse.json({ success: true, reservation });\r\n    } catch (error) {\r\n        console.error(\"Create Reservation Error:\", error);\r\n        return NextResponse.json({ error: \"Internal Error\" }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;;;;AAEO,MAAM,UAAU;AAEvB,MAAM,oBAAoB,oLAAC,CAAC,MAAM,CAAC;IAC/B,cAAc,oLAAC,CAAC,MAAM;IACtB,OAAO,oLAAC,CAAC,MAAM;IACf,aAAa,oLAAC,CAAC,MAAM;IACrB,aAAa,oLAAC,CAAC,MAAM;IACrB,KAAK,oLAAC,CAAC,MAAM;IACb,WAAW,oLAAC,CAAC,IAAI,CAAC;QAAC;QAAO;KAAU;IACpC,OAAO,oLAAC,CAAC,MAAM,GAAG,QAAQ;AAC9B;AAEO,eAAe;IAClB,IAAI;QACA,MAAM,eAAe,MAAM,gIAAM,CAAC,WAAW,CAAC,QAAQ,CAAC;YACnD,OAAO;gBACH,0CAA0C;gBAC1C,aAAa;oBAAE,KAAK,IAAI;gBAAO;YACnC;YACA,SAAS;gBAAE,aAAa;YAAM;QAClC;QACA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM,MAAM;QAAa;IACjE,EAAE,OAAO,OAAO;QACZ,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAiB,GAAG;YAAE,QAAQ;QAAI;IACxE;AACJ;AAEO,eAAe,KAAK,OAAgB;IACvC,IAAI;QACA,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,OAAO,kBAAkB,KAAK,CAAC;QAErC,kBAAkB;QAClB,MAAM,OAAO,IAAI,KAAK,KAAK,WAAW;QACtC,kFAAkF;QAClF,qDAAqD;QACrD,mCAAmC;QAEnC,uCAAuC;QACvC,MAAM,CAAC,OAAO,QAAQ,GAAG,KAAK,WAAW,CAAC,KAAK,CAAC;QAChD,MAAM,WAAW,IAAI;QACrB,SAAS,QAAQ,CAAC,OAAO,QAAQ,OAAO,UAAU,GAAG;QAErD,MAAM,cAAc,MAAM,gIAAM,CAAC,WAAW,CAAC,MAAM,CAAC;YAChD,MAAM;gBACF,cAAc,KAAK,YAAY;gBAC/B,OAAO,KAAK,KAAK;gBACjB,aAAa;gBACb,aAAa;gBACb,KAAK,KAAK,GAAG;gBACb,WAAW,KAAK,SAAS;gBACzB,QAAQ;gBACR,OAAO,KAAK,KAAK;YACrB;QACJ;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM;QAAY;IAC1D,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAiB,GAAG;YAAE,QAAQ;QAAI;IACxE;AACJ"}}]
}