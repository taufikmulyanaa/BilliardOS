{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Lenovo/Documents/BilliardOS/app/src/app/reports/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport useSWR from 'swr';\r\nimport {\r\n    AlertTriangle, Printer, FileText, ArrowRight, CheckCircle, Calculator, Banknote, History, Receipt, Search, Calendar, Filter, X, Download\r\n} from 'lucide-react';\r\nimport jsPDF from 'jspdf';\r\nimport autoTable from 'jspdf-autotable';\r\nimport ExcelJS from 'exceljs';\r\n\r\nconst fetcher = (url: string) => fetch(url).then(r => r.json());\r\n\r\nexport default function ReportsPage() {\r\n    const { data: shiftData, mutate } = useSWR('/api/reports/shift', fetcher);\r\n    const shift = shiftData?.data;\r\n\r\n    // View State: 'SHIFT' | 'TRANSACTIONS'\r\n    const [activeView, setActiveView] = useState<'SHIFT' | 'TRANSACTIONS'>('SHIFT');\r\n\r\n    // Shift Report State\r\n    const [step, setStep] = useState<number>(1);\r\n    const [actualCash, setActualCash] = useState<number>(0);\r\n    const [varianceReason, setVarianceReason] = useState<string>('');\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n    // Transactions State\r\n    const [page, setPage] = useState(1);\r\n    const limit = 20;\r\n\r\n    // Filters State\r\n    const [search, setSearch] = useState('');\r\n    const [paymentFilter, setPaymentFilter] = useState('ALL');\r\n    const [dateRange, setDateRange] = useState({\r\n        start: new Date(new Date().getFullYear(), new Date().getMonth(), 1).toISOString().split('T')[0], // Start of current month\r\n        end: new Date().toISOString().split('T')[0]\r\n    });\r\n    const [exportScope, setExportScope] = useState<'ALL' | 'PAGE'>('ALL');\r\n\r\n    // Debounce search\r\n    const [debouncedSearch, setDebouncedSearch] = useState('');\r\n    React.useEffect(() => {\r\n        const timer = setTimeout(() => setDebouncedSearch(search), 500);\r\n        return () => clearTimeout(timer);\r\n    }, [search]);\r\n\r\n    // Reset page on filter change\r\n    React.useEffect(() => {\r\n        setPage(1);\r\n    }, [debouncedSearch, paymentFilter, dateRange]);\r\n\r\n    const { data: transactionsData } = useSWR(\r\n        activeView === 'TRANSACTIONS'\r\n            ? `/api/transactions?page=${page}&limit=${limit}&search=${debouncedSearch}&paymentMethod=${paymentFilter}&startDate=${dateRange.start}&endDate=${dateRange.end}`\r\n            : null,\r\n        fetcher\r\n    );\r\n\r\n    // Export Handlers\r\n    const handleExportPDF = async () => {\r\n        if (!transactionsData?.data) return;\r\n\r\n        // Fetch all data for export (simple approach: fetch with large limit or specific export endpoint)\r\n        // For MVP, we'll fetch a larger set or just current view. Ideally, separate endpoint.\r\n        // Let's re-fetch without limit for export\r\n        const query = `?limit=1000&search=${search}&paymentMethod=${paymentFilter}&startDate=${dateRange.start}&endDate=${dateRange.end}`;\r\n        const res = await fetch(`/api/transactions${query}`);\r\n        const data = await res.json();\r\n\r\n        if (!data.success) return alert(\"Failed to fetch data for export\");\r\n\r\n        const doc = new jsPDF();\r\n        doc.text(\"Laporan Transaksi - BilliardPOS\", 14, 15);\r\n        doc.setFontSize(10);\r\n        doc.text(`Periode: ${dateRange.start} - ${dateRange.end}`, 14, 22);\r\n\r\n        const tableData = data.data.map((t: any) => [\r\n            t.invoiceNo,\r\n            new Date(t.createdAt).toLocaleString(),\r\n            t.resolvedCustomerName,\r\n            t.items.length,\r\n            Number(t.totalAmount).toLocaleString(),\r\n            t.paymentMethod\r\n        ]);\r\n\r\n        autoTable(doc, {\r\n            head: [['Invoice', 'Waktu', 'Customer', 'Items', 'Total', 'Metode']],\r\n            body: tableData,\r\n            startY: 30,\r\n        });\r\n\r\n        doc.save(`transactions-${Date.now()}.pdf`);\r\n    };\r\n\r\n    const handleExportExcel = async () => {\r\n        const query = `?limit=1000&search=${search}&paymentMethod=${paymentFilter}&startDate=${dateRange.start}&endDate=${dateRange.end}`;\r\n        const res = await fetch(`/api/transactions${query}`);\r\n        const data = await res.json();\r\n\r\n        if (!data.success) return alert(\"Failed to fetch data for export\");\r\n\r\n        const workbook = new ExcelJS.Workbook();\r\n        const sheet = workbook.addWorksheet('Transactions');\r\n\r\n        sheet.columns = [\r\n            { header: 'Invoice', key: 'invoiceNo', width: 25 },\r\n            { header: 'Waktu', key: 'createdAt', width: 20 },\r\n            { header: 'Customer', key: 'customer', width: 20 },\r\n            { header: 'Total', key: 'totalAmount', width: 15 },\r\n            { header: 'Metode', key: 'paymentMethod', width: 10 },\r\n            { header: 'Status', key: 'status', width: 10 },\r\n        ];\r\n\r\n        data.data.forEach((t: any) => {\r\n            sheet.addRow({\r\n                invoiceNo: t.invoiceNo,\r\n                createdAt: new Date(t.createdAt).toLocaleString(),\r\n                customer: t.resolvedCustomerName,\r\n                totalAmount: Number(t.totalAmount),\r\n                paymentMethod: t.paymentMethod,\r\n                status: 'PAID'\r\n            });\r\n        });\r\n\r\n        const buffer = await workbook.xlsx.writeBuffer();\r\n        const blob = new Blob([buffer], { type: \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\" });\r\n        const url = window.URL.createObjectURL(blob);\r\n        const anchor = document.createElement(\"a\");\r\n        anchor.href = url;\r\n        anchor.download = `transactions-${Date.now()}.xlsx`;\r\n        anchor.click();\r\n        window.URL.revokeObjectURL(url);\r\n    };\r\n\r\n    if (!shiftData) return <div className=\"p-10 text-[var(--text-muted)]\">Loading Report Module...</div>;\r\n\r\n    // Derived Shift State\r\n    const hasOpenShift = !!shift;\r\n    const systemCash = shift ? (Number(shift.openingCash) + Number(shift.cashSales)) : 0;\r\n    const variance = actualCash - systemCash;\r\n\r\n    const handleCloseShift = async () => {\r\n        setIsSubmitting(true);\r\n        try {\r\n            const res = await fetch('/api/reports/shift/close', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    shiftId: shift.shiftId,\r\n                    actualCash,\r\n                    varianceReason\r\n                })\r\n            });\r\n\r\n            if (!res.ok) throw new Error(\"Failed to close shift\");\r\n\r\n            setStep(4); // Success Step\r\n            mutate(); // Refresh data\r\n        } catch (error) {\r\n            alert(\"Error closing shift\");\r\n            console.error(error);\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n\r\n    const handlePrintZReport = () => {\r\n        window.print();\r\n    };\r\n\r\n    // --- STEPS UI (Shift Report) ---\r\n\r\n    const renderStep1_Overview = () => (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"bg-[var(--bg-card)] p-6 rounded-xl border border-[var(--border-default)]\">\r\n                <h3 className=\"text-xl font-bold text-[var(--text-primary)] mb-4\">Ringkasan Shift Berjalan</h3>\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                    <div>\r\n                        <p className=\"text-[var(--text-muted)] text-sm\">Shift ID</p>\r\n                        <p className=\"text-[var(--text-primary)] font-mono\">#{shift?.shiftId}</p>\r\n                    </div>\r\n                    <div>\r\n                        <p className=\"text-[var(--text-muted)] text-sm\">Dibuka</p>\r\n                        <p className=\"text-[var(--text-primary)] font-mono\">{new Date(shift?.openedAt).toLocaleTimeString()}</p>\r\n                    </div>\r\n                    <div>\r\n                        <p className=\"text-[var(--text-muted)] text-sm\">Kas Awal</p>\r\n                        <p className=\"text-[var(--text-primary)] font-mono\">Rp {Number(shift?.openingCash).toLocaleString()}</p>\r\n                    </div>\r\n                    <div>\r\n                        <p className=\"text-[var(--text-muted)] text-sm\">Penjualan Tunai (Sistem)</p>\r\n                        <p className=\"text-[var(--accent-primary)] font-bold font-mono\">Rp {Number(shift?.cashSales).toLocaleString()}</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"flex justify-end\">\r\n                <button\r\n                    onClick={() => setStep(2)}\r\n                    className=\"bg-[var(--accent-primary)] hover:bg-[#16a34a] text-black px-6 py-3 rounded-lg font-bold flex items-center gap-2\"\r\n                >\r\n                    Mulai Tutup Shift <ArrowRight size={20} />\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    const renderStep2_CashCount = () => (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"bg-[var(--bg-card)] p-6 rounded-xl border border-[var(--border-default)]\">\r\n                <h3 className=\"text-xl font-bold text-[var(--text-primary)] mb-2\">Hitung Uang Fisik (Cash Count)</h3>\r\n                <p className=\"text-[var(--text-muted)] text-sm mb-6\">Silakan hitung total uang tunai yang ada di laci kasir saat ini.</p>\r\n\r\n                <div className=\"mb-6\">\r\n                    <label className=\"block text-[var(--text-muted)] text-xs font-bold uppercase mb-2\">Total Uang di Laci</label>\r\n                    <div className=\"relative\">\r\n                        <span className=\"absolute left-4 top-1/2 -translate-y-1/2 text-[var(--text-muted)] font-bold\">Rp</span>\r\n                        <input\r\n                            type=\"number\"\r\n                            autoFocus\r\n                            className=\"w-full bg-black border border-[var(--border-default)] rounded-lg py-4 pl-12 pr-4 text-3xl text-[var(--text-primary)] font-mono focus:border-[var(--accent-primary)] outline-none\"\r\n                            value={actualCash || ''}\r\n                            onChange={(e) => setActualCash(Number(e.target.value))}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"flex justify-between\">\r\n                <button onClick={() => setStep(1)} className=\"text-[var(--text-muted)] hover:text-[var(--text-primary)] font-medium\">Kembali</button>\r\n                <button\r\n                    onClick={() => setStep(3)}\r\n                    disabled={actualCash <= 0}\r\n                    className=\"bg-[var(--accent-secondary)] hover:bg-yellow-500 text-black px-6 py-3 rounded-lg font-bold flex items-center gap-2 disabled:opacity-50\"\r\n                >\r\n                    Lanjut: Review Selisih <ArrowRight size={20} />\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    const renderStep3_Review = () => (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"bg-[var(--bg-card)] p-6 rounded-xl border border-[var(--border-default)]\">\r\n                <h3 className=\"text-xl font-bold text-[var(--text-primary)] mb-6\">Review & Validasi</h3>\r\n\r\n                <div className=\"bg-[var(--bg-base)] border border-[var(--border-default)] rounded-lg p-4 space-y-3 mb-6\">\r\n                    <div className=\"flex justify-between\">\r\n                        <span className=\"text-[var(--text-muted)]\">Total System (Start + Sales)</span>\r\n                        <span className=\"text-[var(--text-primary)] font-mono\">Rp {systemCash.toLocaleString()}</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                        <span className=\"text-[var(--text-muted)]\">Actual Cash (Input)</span>\r\n                        <span className=\"text-[var(--text-primary)] font-mono\">Rp {actualCash.toLocaleString()}</span>\r\n                    </div>\r\n                    <div className=\"h-px bg-[var(--bg-elevated)] my-2\"></div>\r\n                    <div className=\"flex justify-between items-center\">\r\n                        <span className=\"text-lg font-bold text-[var(--text-primary)]\">Variance (Selisih)</span>\r\n                        <span className={`text-xl font-bold font-mono ${variance === 0 ? 'text-[var(--accent-primary)]' : 'text-red-500'}`}>\r\n                            {variance > 0 ? '+' : ''}Rp {variance.toLocaleString()}\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n\r\n                {variance !== 0 && (\r\n                    <div className=\"bg-red-500/10 border border-red-500/30 p-4 rounded-lg mb-4\">\r\n                        <div className=\"flex items-center gap-2 text-red-500 mb-2 font-bold\">\r\n                            <AlertTriangle size={20} />\r\n                            <span>Terjadi Selisih!</span>\r\n                        </div>\r\n                        <p className=\"text-sm text-[var(--text-muted)] mb-3\">Mohon berikan alasan untuk selisih ini sebelum menutup shift.</p>\r\n                        <textarea\r\n                            className=\"w-full bg-[var(--bg-overlay)] border border-red-500/30 rounded p-3 text-[var(--text-primary)] text-sm focus:border-red-500 outline-none\"\r\n                            placeholder=\"Contoh: Salah kembalian, uang hilang, dll...\"\r\n                            rows={3}\r\n                            value={varianceReason}\r\n                            onChange={(e) => setVarianceReason(e.target.value)}\r\n                        />\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            <div className=\"flex justify-between\">\r\n                <button onClick={() => setStep(2)} className=\"text-[var(--text-muted)] hover:text-[var(--text-primary)] font-medium\">Kembali Hitung</button>\r\n                <button\r\n                    onClick={handleCloseShift}\r\n                    disabled={variance !== 0 && varianceReason.length < 5 || isSubmitting}\r\n                    className=\"bg-[var(--accent-primary)] hover:bg-[#16a34a] text-black px-6 py-3 rounded-lg font-bold flex items-center gap-2 disabled:opacity-50\"\r\n                >\r\n                    {isSubmitting ? 'Memproses...' : 'Konfirmasi & Tutup Shift'} <CheckCircle size={20} />\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    const renderStep4_Success = () => (\r\n        <div className=\"text-center py-10\">\r\n            <div className=\"size-20 bg-[var(--accent-primary)]/20 text-[var(--accent-primary)] rounded-full flex items-center justify-center mx-auto mb-6\">\r\n                <CheckCircle size={48} />\r\n            </div>\r\n            <h2 className=\"text-3xl font-bold text-[var(--text-primary)] mb-2\">Shift Berhasil Ditutup!</h2>\r\n            <p className=\"text-[var(--text-muted)] mb-8 max-w-md mx-auto\">Laporan Z-Report telah dibuat. Silakan cetak laporan ini untuk arsip fisik.</p>\r\n\r\n            <div className=\"flex justify-center gap-4 print:hidden\">\r\n                <button onClick={handlePrintZReport} className=\"bg-[var(--accent-secondary)] hover:bg-yellow-500 text-black px-6 py-3 rounded-lg font-bold flex items-center gap-2 shadow-lg shadow-yellow-500/20\">\r\n                    <Printer size={20} /> Cetak Z-Report\r\n                </button>\r\n                <a href=\"/dashboard\" className=\"bg-[var(--bg-elevated)] hover:bg-[var(--accent-primary)] hover:text-black text-[var(--text-primary)] px-6 py-3 rounded-lg font-bold flex items-center gap-2\">\r\n                    Kembali ke Dashboard\r\n                </a>\r\n            </div>\r\n\r\n            {/* Print Preview Area */}\r\n            <div className=\"hidden print:block mt-10 text-left border p-4 font-mono text-black\">\r\n                <h1 className=\"text-center font-bold text-xl border-b pb-2 mb-4\">Z-REPORT</h1>\r\n                <p>Shift ID: #{shift?.shiftId}</p>\r\n                <p>Date: {new Date().toLocaleDateString()}</p>\r\n                <hr className=\"my-2\" />\r\n                <div className=\"flex justify-between\"><span>Opening</span><span>{Number(shift?.openingCash).toLocaleString()}</span></div>\r\n                <div className=\"flex justify-between\"><span>Sales (Cash)</span><span>{Number(shift?.cashSales).toLocaleString()}</span></div>\r\n                <div className=\"flex justify-between\"><span>Total Expected</span><span>{systemCash.toLocaleString()}</span></div>\r\n                <hr className=\"my-2\" />\r\n                <div className=\"flex justify-between font-bold\"><span>ACTUAL COUNT</span><span>{actualCash.toLocaleString()}</span></div>\r\n                <div className=\"flex justify-between\"><span>Variance</span><span>{variance.toLocaleString()}</span></div>\r\n                {varianceReason && <p className=\"mt-2 text-xs italic\">Note: {varianceReason}</p>}\r\n                <hr className=\"my-4\" />\r\n                <p className=\"text-center text-xs\">** END OF REPORT **</p>\r\n                <p className=\"text-center text-xs\">{new Date().toLocaleString()}</p>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    // --- TRANSACTIONS UI ---\r\n\r\n    const renderTransactions = () => {\r\n        if (!transactionsData) return <div className=\"text-[var(--text-muted)] p-8\">Loading transactions...</div>;\r\n\r\n        return (\r\n            <div className=\"space-y-6\">\r\n                <div className=\"flex flex-col md:flex-row items-start md:items-center justify-between mb-6 gap-4\">\r\n                    <div>\r\n                        <h2 className=\"text-2xl font-bold text-[var(--text-primary)]\">Riwayat Transaksi</h2>\r\n                        <div className=\"text-sm text-[var(--text-muted)]\">Total {transactionsData?.meta?.total || 0} transaksi</div>\r\n                    </div>\r\n                    <div className=\"flex flex-wrap gap-2 items-center\">\r\n                        <select\r\n                            value={exportScope}\r\n                            onChange={(e) => setExportScope(e.target.value as 'ALL' | 'PAGE')}\r\n                            className=\"bg-[var(--bg-surface)] border border-[var(--border-default)] rounded px-3 py-2 text-[var(--text-primary)] text-xs focus:border-[var(--accent-primary)] outline-none\"\r\n                        >\r\n                            <option value=\"ALL\">Semua Data</option>\r\n                            <option value=\"PAGE\">Halaman Ini</option>\r\n                        </select>\r\n                        <button onClick={handleExportPDF} className=\"bg-red-500/10 hover:bg-red-500/20 text-red-500 border border-red-500/50 px-3 py-2 rounded text-xs font-bold flex items-center gap-2\">\r\n                            <FileText size={16} /> PDF\r\n                        </button>\r\n                        <button onClick={handleExportExcel} className=\"bg-green-500/10 hover:bg-green-500/20 text-green-500 border border-green-500/50 px-3 py-2 rounded text-xs font-bold flex items-center gap-2\">\r\n                            <Download size={16} /> Excel\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Filters */}\r\n                <div className=\"bg-[var(--bg-card)] p-4 rounded-xl border border-[var(--border-default)] mb-6 flex flex-col xl:flex-row xl:items-end gap-4\">\r\n                    <div className=\"flex-1 w-full xl:w-auto\">\r\n                        <label className=\"text-xs text-[var(--text-muted)] mb-1 block\">Cari Invoice / Customer</label>\r\n                        <div className=\"relative\">\r\n                            <Search className=\"absolute left-3 top-2.5 text-[var(--text-muted)]\" size={16} />\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Search...\"\r\n                                value={search}\r\n                                onChange={(e) => setSearch(e.target.value)}\r\n                                className=\"w-full bg-[var(--bg-base)] border border-[var(--border-default)] rounded pl-10 pr-4 py-2 text-[var(--text-primary)] text-sm focus:border-[var(--accent-primary)] outline-none\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"text-xs text-[var(--text-muted)] mb-1 block\">Metode Bayar</label>\r\n                        <select\r\n                            value={paymentFilter}\r\n                            onChange={(e) => setPaymentFilter(e.target.value)}\r\n                            className=\"bg-[var(--bg-base)] border border-[var(--border-default)] rounded px-4 py-2 text-[var(--text-primary)] text-sm focus:border-[var(--accent-primary)] outline-none\"\r\n                        >\r\n                            <option value=\"ALL\">Semua</option>\r\n                            <option value=\"CASH\">Cash</option>\r\n                            <option value=\"QRIS\">QRIS</option>\r\n                            <option value=\"DEBIT\">Debit</option>\r\n                            <option value=\"CREDIT\">Credit</option>\r\n                        </select>\r\n                    </div>\r\n                    <div className=\"flex gap-2\">\r\n                        <div>\r\n                            <label className=\"text-xs text-[var(--text-muted)] mb-1 block\">Dari Tanggal</label>\r\n                            <input\r\n                                type=\"date\"\r\n                                value={dateRange.start}\r\n                                onChange={(e) => setDateRange({ ...dateRange, start: e.target.value })}\r\n                                className=\"bg-[var(--bg-base)] border border-[var(--border-default)] rounded px-3 py-2 text-[var(--text-primary)] text-sm focus:border-[var(--accent-primary)] outline-none\"\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <label className=\"text-xs text-[var(--text-muted)] mb-1 block\">Sampai Tanggal</label>\r\n                            <input\r\n                                type=\"date\"\r\n                                value={dateRange.end}\r\n                                onChange={(e) => setDateRange({ ...dateRange, end: e.target.value })}\r\n                                className=\"bg-[var(--bg-base)] border border-[var(--border-default)] rounded px-3 py-2 text-[var(--text-primary)] text-sm focus:border-[var(--accent-primary)] outline-none\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"bg-[var(--bg-card)] rounded-xl border border-[var(--border-default)] flex flex-col\">\r\n                    <div className=\"overflow-x-auto rounded-t-xl\">\r\n                        <table className=\"w-full text-left text-sm\">\r\n                            <thead className=\"bg-[var(--bg-surface)] text-[var(--text-muted)] border-b border-[var(--border-default)] text-xs uppercase font-bold tracking-wider\">\r\n                                <tr>\r\n                                    <th className=\"p-2 font-medium\">Invoice</th>\r\n                                    <th className=\"p-2 font-medium\">Waktu</th>\r\n                                    <th className=\"p-2 font-medium\">Customer</th>\r\n                                    <th className=\"p-2 font-medium text-center\">Items</th>\r\n                                    <th className=\"p-2 font-medium text-right\">Total</th>\r\n                                    <th className=\"p-2 font-medium text-center\">Metode</th>\r\n                                    <th className=\"p-2 font-medium text-center\">Status</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody className=\"text-[var(--text-primary)] divide-y divide-[#1e3328] text-xs opacity-90\">\r\n                                {transactionsData.data?.map((trx: any) => (\r\n                                    <tr key={trx.id} className=\"hover:bg-[var(--bg-elevated)]/50 transition-colors\">\r\n                                        <td className=\"p-2 font-mono text-[var(--accent-primary)]\">{trx.invoiceNo}</td>\r\n                                        <td className=\"p-2 text-[var(--text-muted)]\">{new Date(trx.createdAt).toLocaleString()}</td>\r\n                                        <td className=\"p-2 font-medium\">{trx.resolvedCustomerName || trx.member?.fullName || 'Guest'}</td>\r\n                                        <td className=\"p-2 text-center\">\r\n                                            <span className=\"px-1.5 py-0.5 bg-[var(--bg-base)] rounded text-[10px] border border-[var(--border-default)]\">\r\n                                                {trx.items?.length || 0} items\r\n                                            </span>\r\n                                        </td>\r\n                                        <td className=\"p-2 text-right font-mono font-bold\">\r\n                                            Rp {Number(trx.totalAmount).toLocaleString()}\r\n                                        </td>\r\n                                        <td className=\"p-2 text-center\">\r\n                                            <span className=\"text-[10px] px-1.5 py-0.5 rounded border border-[var(--border-default)] uppercase text-[var(--text-muted)]\">\r\n                                                {trx.paymentMethod}\r\n                                            </span>\r\n                                        </td>\r\n                                        <td className=\"p-2 text-center\">\r\n                                            <span className=\"text-[10px] px-1.5 py-0.5 rounded bg-[var(--accent-primary)]/10 text-[var(--accent-primary)] border border-[var(--accent-primary)]/20 font-bold\">\r\n                                                PAID\r\n                                            </span>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n\r\n                    {transactionsData.data?.length === 0 && (\r\n                        <div className=\"p-8 text-center text-[var(--text-muted)] border-b border-[var(--border-default)]\">\r\n                            Belum ada data transaksi untuk periode ini.\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Pagination Controls - Numbered */}\r\n                    {transactionsData && (\r\n                        <div className=\"bg-[var(--bg-surface)] border-t border-[var(--border-default)] p-3 flex items-center justify-between rounded-b-xl\">\r\n                            <div className=\"text-xs text-[var(--text-muted)]\">\r\n                                Total {transactionsData.meta?.total || 0} results\r\n                            </div>\r\n                            <div className=\"flex gap-1\">\r\n                                <button\r\n                                    onClick={() => setPage(p => Math.max(1, p - 1))}\r\n                                    disabled={!transactionsData.meta?.hasPrevPage}\r\n                                    className=\"px-3 py-1 bg-[var(--bg-card)] border border-[var(--border-default)] rounded text-xs text-[var(--text-primary)] disabled:opacity-30 hover:bg-[var(--accent-primary)] hover:text-black hover:border-transparent transition-all\"\r\n                                >\r\n                                    Prev\r\n                                </button>\r\n\r\n                                {Array.from({ length: Math.min(5, transactionsData.meta?.totalPages || 1) }, (_, i) => {\r\n                                    // Logic to show a window of pages around current page\r\n                                    let pNum = i + 1;\r\n                                    const total = transactionsData.meta?.totalPages || 1;\r\n\r\n                                    if (total > 5) {\r\n                                        if (page > 3) pNum = page - 2 + i;\r\n                                        // Clamp to max\r\n                                        if (pNum > total) pNum = total - (4 - i);\r\n                                    }\r\n\r\n                                    // Safety check if pNum becomes invalid (e.g. total < 5 loop logic)\r\n                                    if (pNum <= 0) return null;\r\n\r\n                                    return (\r\n                                        <button\r\n                                            key={i}\r\n                                            onClick={() => setPage(pNum)}\r\n                                            className={`w-8 h-7 flex items-center justify-center rounded text-xs border transition-all\r\n                                                ${page === pNum\r\n                                                    ? 'bg-[var(--accent-primary)] text-black border-[var(--accent-primary)] font-bold'\r\n                                                    : 'bg-[var(--bg-card)] text-[var(--text-muted)] border-[var(--border-default)] hover:text-[var(--text-primary)] hover:border-[var(--accent-primary)]'\r\n                                                }`}\r\n                                        >\r\n                                            {pNum}\r\n                                        </button>\r\n                                    );\r\n                                })}\r\n\r\n                                <button\r\n                                    onClick={() => setPage(p => p + 1)}\r\n                                    disabled={!transactionsData.meta?.hasNextPage}\r\n                                    className=\"px-3 py-1 bg-[var(--bg-card)] border border-[var(--border-default)] rounded text-xs text-[var(--text-primary)] disabled:opacity-30 hover:bg-[var(--accent-primary)] hover:text-black hover:border-transparent transition-all\"\r\n                                >\r\n                                    Next\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex min-h-screen bg-[var(--bg-base)]\">\r\n            {/* Sidebar */}\r\n            <div className=\"w-64 bg-[var(--bg-surface)] border-r border-[var(--border-default)] p-4 hidden md:block print:hidden\">\r\n                <nav className=\"space-y-1 mt-4\">\r\n                    <button\r\n                        onClick={() => setActiveView('SHIFT')}\r\n                        className={`w-full text-left p-3 rounded-lg flex items-center gap-3 transition-colors ${activeView === 'SHIFT'\r\n                            ? 'bg-[var(--accent-primary)]/10 text-[var(--accent-primary)] font-bold border border-[var(--accent-primary)]/20'\r\n                            : 'text-[var(--text-muted)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-elevated)]'\r\n                            }`}\r\n                    >\r\n                        <FileText size={18} />\r\n                        Laporan Shift\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setActiveView('TRANSACTIONS')}\r\n                        className={`w-full text-left p-3 rounded-lg flex items-center gap-3 transition-colors ${activeView === 'TRANSACTIONS'\r\n                            ? 'bg-[var(--accent-primary)]/10 text-[var(--accent-primary)] font-bold border border-[var(--accent-primary)]/20'\r\n                            : 'text-[var(--text-muted)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-elevated)]'\r\n                            }`}\r\n                    >\r\n                        <History size={18} />\r\n                        Riwayat Transaksi\r\n                    </button>\r\n                </nav>\r\n            </div>\r\n\r\n            {/* Main Content */}\r\n            <div className=\"flex-1 flex flex-col h-screen overflow-hidden\">\r\n                <main className=\"flex-1 overflow-y-auto p-4 md:p-8 pb-32\">\r\n                    {activeView === 'SHIFT' ? (\r\n                        <>\r\n                            {/* Shift Report Content */}\r\n                            {!hasOpenShift && step !== 4 ? (\r\n                                <div className=\"flex h-full items-center justify-center text-[var(--text-muted)] pt-20\">\r\n                                    <div className=\"text-center\">\r\n                                        <AlertTriangle size={48} className=\"mx-auto mb-4 opacity-50\" />\r\n                                        <h2 className=\"text-xl font-bold\">Tidak ada Shift Aktif</h2>\r\n                                        <p>Buka shift baru dari Dashboard untuk memulai laporan.</p>\r\n                                    </div>\r\n                                </div>\r\n                            ) : (\r\n                                <div className=\"max-w-3xl mx-auto\">\r\n                                    {/* Steps Indicator */}\r\n                                    {step !== 4 && (\r\n                                        <div className=\"flex items-center justify-between mb-8 print:hidden\">\r\n                                            <div className={`flex items-center gap-2 ${step >= 1 ? 'text-[var(--accent-primary)]' : 'text-slate-600'}`}>\r\n                                                <div className=\"size-8 rounded-full border-2 flex items-center justify-center font-bold border-current\">1</div>\r\n                                                <span className=\"font-bold hidden sm:inline\">Overview</span>\r\n                                            </div>\r\n                                            <div className=\"h-0.5 flex-1 bg-[var(--bg-elevated)] mx-4\"></div>\r\n                                            <div className={`flex items-center gap-2 ${step >= 2 ? 'text-[var(--accent-secondary)]' : 'text-slate-600'}`}>\r\n                                                <div className=\"size-8 rounded-full border-2 flex items-center justify-center font-bold border-current\">2</div>\r\n                                                <span className=\"font-bold hidden sm:inline\">Cash Count</span>\r\n                                            </div>\r\n                                            <div className=\"h-0.5 flex-1 bg-[var(--bg-elevated)] mx-4\"></div>\r\n                                            <div className={`flex items-center gap-2 ${step >= 3 ? 'text-[var(--text-primary)]' : 'text-slate-600'}`}>\r\n                                                <div className=\"size-8 rounded-full border-2 flex items-center justify-center font-bold border-current\">3</div>\r\n                                                <span className=\"font-bold hidden sm:inline\">Review</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    {/* Step Content */}\r\n                                    {step === 1 && renderStep1_Overview()}\r\n                                    {step === 2 && renderStep2_CashCount()}\r\n                                    {step === 3 && renderStep3_Review()}\r\n                                    {step === 4 && renderStep4_Success()}\r\n                                </div>\r\n                            )}\r\n                        </>\r\n                    ) : (\r\n                        renderTransactions()\r\n                    )}\r\n                </main>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}