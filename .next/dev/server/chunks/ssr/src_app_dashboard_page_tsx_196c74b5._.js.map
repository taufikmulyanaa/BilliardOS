{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Lenovo/Documents/BilliardOS/app/src/app/dashboard/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport useSWR from 'swr';\r\nimport {\r\n    Clock, Plus, Users, Play, Pause, Square,\r\n    Receipt, ArrowRightLeft, X, LayoutGrid, List, RefreshCw, ChevronRight,\r\n    Banknote, QrCode, CreditCard, Coffee, Printer, Settings, Minus, ShoppingCart,\r\n    Utensils, Cookie, Tag, Star, FileText, Trash2\r\n} from 'lucide-react';\r\nimport { CheckoutModal } from '@/components/CheckoutModal';\r\n\r\nconst fetcher = (url: string) => fetch(url).then(r => r.json());\r\n\r\n// Real-time timer component that calculates billing client-side\r\nconst RealTimeTimer = ({\r\n    startTime,\r\n    endTime,\r\n    hourlyRate,\r\n    isPaused,\r\n    onTimeUp,\r\n    onWarning\r\n}: {\r\n    startTime: string,\r\n    endTime?: string | null,\r\n    hourlyRate: number,\r\n    isPaused?: boolean,\r\n    onTimeUp?: () => void,\r\n    onWarning?: () => void\r\n}) => {\r\n    const [elapsedSeconds, setElapsedSeconds] = useState(0);\r\n    const [warned, setWarned] = useState(false);\r\n    const [expired, setExpired] = useState(false);\r\n\r\n    const isFixedPackage = !!endTime;\r\n    const endTimeMs = endTime ? new Date(endTime).getTime() : 0;\r\n    const startTimeMs = new Date(startTime).getTime();\r\n    const totalPackageSeconds = isFixedPackage ? Math.floor((endTimeMs - startTimeMs) / 1000) : 0;\r\n\r\n    useEffect(() => {\r\n        if (isPaused) return;\r\n\r\n        const updateTimer = () => {\r\n            const now = Date.now();\r\n            const seconds = Math.floor((now - startTimeMs) / 1000);\r\n            setElapsedSeconds(seconds);\r\n\r\n            // For fixed packages, check if time is almost up or expired\r\n            if (isFixedPackage && !expired) {\r\n                const remainingSeconds = Math.floor((endTimeMs - now) / 1000);\r\n\r\n                // Warning at 5 minutes (300 seconds)\r\n                if (remainingSeconds <= 300 && remainingSeconds > 0 && !warned) {\r\n                    setWarned(true);\r\n                    onWarning?.();\r\n                }\r\n\r\n                // Time's up\r\n                if (remainingSeconds <= 0) {\r\n                    setExpired(true);\r\n                    onTimeUp?.();\r\n                }\r\n            }\r\n        };\r\n\r\n        updateTimer(); // Initial\r\n        const interval = setInterval(updateTimer, 1000);\r\n        return () => clearInterval(interval);\r\n    }, [startTimeMs, endTimeMs, isFixedPackage, isPaused, warned, expired, onTimeUp, onWarning]);\r\n\r\n    const totalMinutes = Math.floor(elapsedSeconds / 60);\r\n    const hours = Math.floor(totalMinutes / 60);\r\n    const mins = totalMinutes % 60;\r\n    const secs = elapsedSeconds % 60;\r\n\r\n    // For fixed package: show fixed price, for open: calculate\r\n    const bill = isFixedPackage\r\n        ? Math.ceil((totalPackageSeconds / 3600) * hourlyRate)\r\n        : Math.ceil((elapsedSeconds / 3600) * hourlyRate);\r\n\r\n    // Countdown display for fixed packages\r\n    const remainingSeconds = isFixedPackage ? Math.max(0, totalPackageSeconds - elapsedSeconds) : 0;\r\n    const remainMins = Math.floor(remainingSeconds / 60);\r\n    const remainSecs = remainingSeconds % 60;\r\n\r\n    // Time display - show elapsed or remaining based on package type\r\n    const timeDisplay = hours > 0\r\n        ? `${hours.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`\r\n        : `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\r\n\r\n    // Determine styling based on remaining time\r\n    const isAlmostUp = isFixedPackage && remainingSeconds <= 300 && remainingSeconds > 0;\r\n    const isTimeUp = isFixedPackage && remainingSeconds <= 0;\r\n    const timerColor = isTimeUp ? 'text-red-500' : isAlmostUp ? 'text-[#eab308]' : 'text-white';\r\n    const billColor = isTimeUp ? 'text-red-500' : 'text-[#22c55e]';\r\n\r\n    return (\r\n        <div className=\"text-center w-full\">\r\n            <div className={`text-4xl font-mono font-bold tracking-widest ${timerColor} drop-shadow-md mb-2`}>\r\n                {timeDisplay}\r\n            </div>\r\n\r\n            {/* Countdown info for fixed packages */}\r\n            {isFixedPackage && (\r\n                <div className={`text-xs font-mono mb-2 ${isTimeUp ? 'text-red-500 animate-pulse' : isAlmostUp ? 'text-[#eab308]' : 'text-slate-400'}`}>\r\n                    {isTimeUp ? '⏰ WAKTU HABIS!' : `Sisa: ${remainMins}:${remainSecs.toString().padStart(2, '0')}`}\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"bg-black/40 rounded-lg py-1.5 px-3 border border-white/10 w-full flex justify-between items-center\">\r\n                <span className=\"text-[10px] uppercase text-slate-400 font-bold tracking-wider\">\r\n                    {isFixedPackage ? 'Paket' : 'Bill'}\r\n                </span>\r\n                <span className={`font-mono font-bold ${billColor} text-sm`}>\r\n                    Rp {bill.toLocaleString()}\r\n                </span>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// Compact timer for list view\r\nconst ListViewTimer = ({ startTime, hourlyRate }: { startTime: string, hourlyRate: number }) => {\r\n    const [elapsedSeconds, setElapsedSeconds] = useState(0);\r\n\r\n    useEffect(() => {\r\n        const start = new Date(startTime).getTime();\r\n\r\n        const updateTimer = () => {\r\n            const now = Date.now();\r\n            const seconds = Math.floor((now - start) / 1000);\r\n            setElapsedSeconds(seconds);\r\n        };\r\n\r\n        updateTimer();\r\n        const interval = setInterval(updateTimer, 1000);\r\n        return () => clearInterval(interval);\r\n    }, [startTime]);\r\n\r\n    const totalMinutes = Math.floor(elapsedSeconds / 60);\r\n    const hours = Math.floor(totalMinutes / 60);\r\n    const mins = totalMinutes % 60;\r\n    const secs = elapsedSeconds % 60;\r\n    // Calculate bill per second for real-time update\r\n    const bill = Math.ceil((elapsedSeconds / 3600) * hourlyRate);\r\n\r\n    const timeDisplay = hours > 0\r\n        ? `${hours.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`\r\n        : `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\r\n\r\n    return (\r\n        <>\r\n            <div className=\"flex flex-col items-end\">\r\n                <span className=\"text-xs text-slate-400 uppercase font-bold\">Duration</span>\r\n                <span className=\"font-mono font-bold text-white text-lg\">\r\n                    {timeDisplay}\r\n                </span>\r\n            </div>\r\n            <div className=\"flex flex-col items-end min-w-[100px]\">\r\n                <span className=\"text-xs text-slate-400 uppercase font-bold\">Current Bill</span>\r\n                <span className=\"font-mono font-bold text-[#22c55e] text-lg\">Rp {bill.toLocaleString()}</span>\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\n// Real-time bill display for sidebar\r\nconst RealTimeBill = ({ startTime, hourlyRate }: { startTime: string, hourlyRate: number }) => {\r\n    const [elapsedSeconds, setElapsedSeconds] = useState(0);\r\n\r\n    useEffect(() => {\r\n        const start = new Date(startTime).getTime();\r\n\r\n        const updateTimer = () => {\r\n            const now = Date.now();\r\n            const seconds = Math.floor((now - start) / 1000);\r\n            setElapsedSeconds(seconds);\r\n        };\r\n\r\n        updateTimer();\r\n        const interval = setInterval(updateTimer, 1000);\r\n        return () => clearInterval(interval);\r\n    }, [startTime]);\r\n\r\n    const bill = Math.ceil((elapsedSeconds / 3600) * hourlyRate);\r\n\r\n    return (\r\n        <span className=\"font-bold text-lg text-[#22c55e] font-mono\">\r\n            Rp {bill.toLocaleString()}\r\n        </span>\r\n    );\r\n};\r\n\r\nconst WaitingListSidebar = () => {\r\n    const { data: resData } = useSWR('/api/reservations', fetcher);\r\n    const reservations = resData?.data || [];\r\n    const [activeTab, setActiveTab] = useState<'walkin' | 'reservation'>('walkin');\r\n\r\n    const walkIns = reservations.filter((r: any) => r.notes?.includes('WALK-IN') && r.status === 'PENDING');\r\n    const futureReservations = reservations.filter((r: any) => !r.notes?.includes('WALK-IN') && r.status === 'CONFIRMED');\r\n\r\n    const list = activeTab === 'walkin' ? walkIns : futureReservations;\r\n\r\n    return (\r\n        <>\r\n            <div className=\"p-4 border-b border-[#1e3328] bg-[#16261d]\">\r\n                <h3 className=\"text-lg font-bold text-white mb-3\">Antrian & Jadwal</h3>\r\n                <div className=\"flex bg-[#050a07] rounded p-1 border border-[#1e3328]\">\r\n                    <button\r\n                        onClick={() => setActiveTab('walkin')}\r\n                        className={`flex-1 py-1.5 text-xs font-bold rounded transition-colors ${activeTab === 'walkin' ? 'bg-[#22c55e] text-black' : 'text-slate-400 hover:text-white'}`}\r\n                    >\r\n                        Walk-In ({walkIns.length})\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setActiveTab('reservation')}\r\n                        className={`flex-1 py-1.5 text-xs font-bold rounded transition-colors ${activeTab === 'reservation' ? 'bg-[#eab308] text-black' : 'text-slate-400 hover:text-white'}`}\r\n                    >\r\n                        Reservasi ({futureReservations.length})\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"p-4 border-b border-[#1e3328]\">\r\n                <button className=\"w-full py-2 bg-[#1e3328] hover:bg-[#22c55e] hover:text-black text-white text-sm font-bold rounded border border-[#22c55e]/30 transition-colors flex items-center justify-center gap-2\">\r\n                    <Plus size={16} /> {activeTab === 'walkin' ? 'Tambah Walk-In' : 'Buat Reservasi'}\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"flex-1 overflow-y-auto p-2\">\r\n                {list.length === 0 ? (\r\n                    <div className=\"text-center text-slate-500 py-8 text-sm italic\">\r\n                        Belum ada data.\r\n                    </div>\r\n                ) : (\r\n                    list.map((item: any, idx: number) => (\r\n                        <div key={item.id} className=\"flex items-center gap-3 p-3 border-b border-[#1e3328] hover:bg-[#16261d] rounded transition-colors group\">\r\n                            <div className={`size-8 rounded-full flex items-center justify-center text-xs font-bold border \r\n                            ${activeTab === 'walkin' ? 'bg-[#1e3328] text-slate-400 border-[#1e3328]' : 'bg-[#eab308]/10 text-[#eab308] border-[#eab308]/30'}`}>\r\n                                {activeTab === 'walkin' ? idx + 1 : <Clock size={14} />}\r\n                            </div>\r\n                            <div className=\"flex-1\">\r\n                                <div className=\"flex justify-between mb-0.5\">\r\n                                    <span className=\"font-bold text-sm text-white\">{item.customerName}</span>\r\n                                    <span className=\"text-xs font-mono text-[#eab308]\">{new Date(item.bookingTime).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</span>\r\n                                </div>\r\n                                <div className=\"flex gap-2 text-xs text-slate-500\">\r\n                                    <span>{item.pax} Org</span>\r\n                                    <span>•</span>\r\n                                    <span>{item.tableType}</span>\r\n                                </div>\r\n                            </div>\r\n                            <button className=\"p-2 hover:bg-[#22c55e]/20 hover:text-[#22c55e] rounded text-slate-500 transition-colors\">\r\n                                <ChevronRight size={16} />\r\n                            </button>\r\n                        </div>\r\n                    ))\r\n                )}\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\n\r\nconst fetchMembers = async (query: string) => {\r\n    if (!query) return [];\r\n    const res = await fetch(`/api/members?q=${query}`);\r\n    const data = await res.json();\r\n    return data.data || [];\r\n};\r\n\r\n// Billing Options Modal - Fixed Hours or Open Bill\r\nconst BillingOptionsModal = ({\r\n    hourlyRate,\r\n    onClose,\r\n    onSelect\r\n}: {\r\n    hourlyRate: number,\r\n    onClose: () => void,\r\n    onSelect: (type: 'open' | number) => void\r\n}) => {\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n            <div className=\"bg-[#0f1a14] border border-[#1e3328] rounded-xl shadow-2xl w-full max-w-md overflow-hidden\">\r\n                <div className=\"p-5 border-b border-[#1e3328] flex justify-between items-center\">\r\n                    <h3 className=\"text-lg font-bold text-white\">Pilih Jenis Billing</h3>\r\n                    <button onClick={onClose} className=\"text-slate-400 hover:text-white\">\r\n                        <X size={20} />\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"p-5 space-y-4\">\r\n                    {/* Open Bill Option */}\r\n                    <button\r\n                        onClick={() => onSelect('open')}\r\n                        className=\"w-full p-4 bg-[#16261d] border border-[#1e3328] rounded-lg hover:border-[#22c55e] transition-all flex items-center gap-4\"\r\n                    >\r\n                        <div className=\"p-3 bg-[#22c55e]/20 rounded-lg text-[#22c55e]\">\r\n                            <Clock size={24} />\r\n                        </div>\r\n                        <div className=\"text-left flex-1\">\r\n                            <h4 className=\"font-bold text-white\">Open Bill</h4>\r\n                            <p className=\"text-xs text-slate-400\">Bayar sesuai durasi bermain</p>\r\n                        </div>\r\n                        <span className=\"text-xs text-[#22c55e] font-mono\">Rp {hourlyRate.toLocaleString()}/jam</span>\r\n                    </button>\r\n\r\n                    {/* Fixed Hours Options */}\r\n                    <div className=\"pt-2\">\r\n                        <h4 className=\"text-xs font-bold text-slate-500 uppercase tracking-wider mb-3\">\r\n                            Paket Jam (Fixed)\r\n                        </h4>\r\n                        <div className=\"grid grid-cols-5 gap-2\">\r\n                            {[1, 2, 3, 4, 5].map((hours) => (\r\n                                <button\r\n                                    key={hours}\r\n                                    onClick={() => onSelect(hours)}\r\n                                    className=\"p-3 bg-[#050a07] border border-[#1e3328] rounded-lg hover:border-[#eab308] transition-all flex flex-col items-center\"\r\n                                >\r\n                                    <span className=\"text-xl font-bold text-white\">{hours}</span>\r\n                                    <span className=\"text-[10px] text-slate-400\">JAM</span>\r\n                                    <span className=\"text-[10px] text-[#eab308] font-mono mt-1\">\r\n                                        Rp {(hours * hourlyRate).toLocaleString()}\r\n                                    </span>\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst CheckoutModal = ({ table, onClose, onConfirm }: { table: any, onClose: () => void, onConfirm: (method: string, cash: number, total: number, items: any[], pointsRedeemed: number) => void }) => {\r\n    const [splitMode, setSplitMode] = useState<'none' | 'item'>('none');\r\n    const [paymentMethod, setPaymentMethod] = useState<'CASH' | 'QRIS' | 'DEBIT'>('CASH');\r\n    const [cashReceived, setCashReceived] = useState<number>(0);\r\n    const [selectedItems, setSelectedItems] = useState<Set<string>>(new Set());\r\n    const [pointsRedeemed, setPointsRedeemed] = useState<number>(0);\r\n\r\n    // Member Info\r\n    const member = table.activeSession?.member;\r\n    const maxPoints = member?.pointsBalance || 0;\r\n    const discount = pointsRedeemed * 1000;\r\n\r\n    // 1. Prepare Items - Calculate duration real-time\r\n    const startTime = table.activeSession?.startTime ? new Date(table.activeSession.startTime).getTime() : Date.now();\r\n    const elapsedSeconds = Math.floor((Date.now() - startTime) / 1000);\r\n    const durationCost = Math.ceil((elapsedSeconds / 3600) * table.hourlyRate);\r\n    const durationMinutes = Math.floor(elapsedSeconds / 60);\r\n    const durationHours = Math.floor(durationMinutes / 60);\r\n    const durationMins = durationMinutes % 60;\r\n\r\n    const fnbOrders = table.activeSession?.orders || [];\r\n    const fnbItems = fnbOrders.flatMap((o: any) => o.items.map((i: any) => ({ ...i, orderId: o.id })));\r\n\r\n    // Initialize selection (all selected by default)\r\n    useEffect(() => {\r\n        const allIds = new Set(['duration']);\r\n        fnbItems.forEach((i: any) => allIds.add(`item-${i.id}`));\r\n        setSelectedItems(allIds);\r\n    }, [table]);\r\n\r\n    // 2. Calculate Totals based on selection\r\n    const calculateTotal = () => {\r\n        let sub = 0;\r\n        if (splitMode === 'none') {\r\n            sub = durationCost + fnbItems.reduce((acc: number, i: any) => acc + (i.unitPrice * i.quantity), 0);\r\n        } else {\r\n            if (selectedItems.has('duration')) sub += durationCost;\r\n            fnbItems.forEach((i: any) => {\r\n                if (selectedItems.has(`item-${i.id}`)) sub += (i.unitPrice * i.quantity);\r\n            });\r\n        }\r\n        return sub;\r\n    };\r\n\r\n    const subtotal = calculateTotal();\r\n    const taxableAfterDiscount = Math.max(0, subtotal - discount);\r\n    const tax = Math.floor(taxableAfterDiscount * 0.1); // 10% Tax\r\n    const totalBill = taxableAfterDiscount + tax;\r\n    const change = Math.max(0, cashReceived - totalBill);\r\n\r\n    const toggleItem = (id: string) => {\r\n        const newSet = new Set(selectedItems);\r\n        if (newSet.has(id)) newSet.delete(id);\r\n        else newSet.add(id);\r\n        setSelectedItems(newSet);\r\n    };\r\n\r\n    const handlePrint = () => {\r\n        const printContent = document.getElementById('receipt-area')?.innerHTML;\r\n        const win = window.open('', '', 'width=400,height=600');\r\n        if (win && printContent) {\r\n            win.document.write(`<html><head><title>Receipt</title><style>body{font-family:monospace; padding:20px;} .line{display:flex;justify-content:space-between;border-bottom:1px dashed #000;padding:5px 0;} .bold{font-weight:bold;}</style></head><body>${printContent}</body></html>`);\r\n            win.document.close();\r\n            win.print();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n            <div className=\"bg-[#0f1a14] border border-[#1e3328] rounded-xl shadow-2xl w-full max-w-5xl h-[600px] flex overflow-hidden\">\r\n\r\n                {/* LEFT PANEL: Bill Details */}\r\n                <div className=\"w-1/2 flex flex-col border-r border-[#1e3328] bg-[#050a07]\">\r\n                    <div className=\"p-6 border-b border-[#1e3328] flex justify-between items-center\">\r\n                        <div>\r\n                            <h2 className=\"text-xl font-bold text-white\">Checkout: {table.name}</h2>\r\n                            <p className=\"text-sm text-slate-400\">\r\n                                {member ? <span className=\"text-[#eab308] font-bold\">{member.fullName} ({member.pointsBalance} pts)</span> : `Session: #${table.activeSession?.id || '---'}`}\r\n                            </p>\r\n                        </div>\r\n                        <div className=\"flex gap-2\">\r\n                            <button onClick={() => setSplitMode('none')} className={`px-3 py-1 text-xs font-bold rounded border ${splitMode === 'none' ? 'bg-[#22c55e] text-black border-[#22c55e]' : 'text-slate-400 border-[#1e3328]'}`}>Full</button>\r\n                            <button onClick={() => setSplitMode('item')} className={`px-3 py-1 text-xs font-bold rounded border ${splitMode === 'item' ? 'bg-[#22c55e] text-black border-[#22c55e]' : 'text-slate-400 border-[#1e3328]'}`}>Split Item</button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex-1 overflow-y-auto p-6\" id=\"receipt-area\">\r\n                        <div className=\"space-y-4\">\r\n                            {/* Duration Item */}\r\n                            <button\r\n                                onClick={() => splitMode === 'item' && toggleItem('duration')}\r\n                                className={`w-full flex justify-between items-start text-left p-2 rounded transition-colors ${splitMode === 'item' && selectedItems.has('duration') ? 'bg-[#22c55e]/10 border border-[#22c55e]/50' : ''}`}\r\n                            >\r\n                                <div className=\"flex items-center gap-3\">\r\n                                    <div className=\"p-2 bg-[#1e3328] rounded text-[#22c55e]\"><Clock size={16} /></div>\r\n                                    <div>\r\n                                        <p className=\"text-sm font-medium text-white\">Durasi Main ({durationHours}h {durationMins}m)</p>\r\n                                        <p className=\"text-xs text-slate-500\">{table.type} Table @ {parseInt(table.hourlyRate).toLocaleString()}/jam</p>\r\n                                    </div>\r\n                                </div>\r\n                                <span className=\"font-mono text-white\">Rp {durationCost.toLocaleString()}</span>\r\n                            </button>\r\n\r\n                            {/* F&B Items */}\r\n                            {fnbItems.map((item: any) => (\r\n                                <button\r\n                                    key={item.id}\r\n                                    onClick={() => splitMode === 'item' && toggleItem(`item-${item.id}`)}\r\n                                    className={`w-full flex justify-between items-start text-left p-2 rounded transition-colors ${splitMode === 'item' && selectedItems.has(`item-${item.id}`) ? 'bg-[#22c55e]/10 border border-[#22c55e]/50' : ''}`}\r\n                                >\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                        <div className=\"p-2 bg-[#1e3328] rounded text-[#eab308]\"><Coffee size={16} /></div>\r\n                                        <div>\r\n                                            <p className=\"text-sm font-medium text-white\">{item.itemName} (x{item.quantity})</p>\r\n                                            <p className=\"text-xs text-slate-500\">@{item.unitPrice.toLocaleString()}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <span className=\"font-mono text-white\">Rp {(item.unitPrice * item.quantity).toLocaleString()}</span>\r\n                                </button>\r\n                            ))}\r\n\r\n                            {fnbItems.length === 0 && <p className=\"text-center text-slate-500 text-xs italic py-2\">Tidak ada pesanan F&B</p>}\r\n                        </div>\r\n\r\n                        {/* Totals for Print (Hidden in UI usually, but using this div for simple print) */}\r\n                        <div className=\"mt-8 pt-4 border-t border-dashed border-slate-600 hidden print-only\">\r\n                            <div className=\"flex justify-between font-bold\"><span>TOTAL</span><span>Rp {totalBill.toLocaleString()}</span></div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"p-6 border-t border-[#1e3328] bg-[#0f1a14]\">\r\n                        {/* Loyalty Section */}\r\n                        {member && splitMode === 'none' && (\r\n                            <div className=\"mb-4 bg-[#1e3328]/30 p-3 rounded border border-[#1e3328] flex items-center justify-between\">\r\n                                <div>\r\n                                    <p className=\"text-xs text-[#eab308] font-bold\">Redeem Poin (Max: {maxPoints})</p>\r\n                                    <p className=\"text-[10px] text-slate-400\">1 Poin = Rp 1.000 diskon</p>\r\n                                </div>\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <button onClick={() => setPointsRedeemed(Math.max(0, pointsRedeemed - 1))} className=\"p-1 bg-[#1e3328] rounded border border-slate-600 text-white\">-</button>\r\n                                    <span className=\"w-8 text-center font-mono text-white text-sm\">{pointsRedeemed}</span>\r\n                                    <button onClick={() => setPointsRedeemed(Math.min(maxPoints, pointsRedeemed + 1))} className=\"p-1 bg-[#1e3328] rounded border border-slate-600 text-white\">+</button>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        <div className=\"flex justify-between items-center mb-1\">\r\n                            <span className=\"text-slate-400\">Subtotal</span>\r\n                            <span className=\"font-mono text-white\">Rp {subtotal.toLocaleString()}</span>\r\n                        </div>\r\n                        {discount > 0 && (\r\n                            <div className=\"flex justify-between items-center mb-1 text-[#eab308]\">\r\n                                <span className=\"text-sm\">Discount ({pointsRedeemed} pts)</span>\r\n                                <span className=\"font-mono\">- Rp {discount.toLocaleString()}</span>\r\n                            </div>\r\n                        )}\r\n                        <div className=\"flex justify-between items-center mb-4\">\r\n                            <span className=\"text-slate-400\">Tax (10%)</span>\r\n                            <span className=\"font-mono text-white\">Rp {tax.toLocaleString()}</span>\r\n                        </div>\r\n                        <div className=\"flex justify-between items-center pt-4 border-t border-[#1e3328]\">\r\n                            <span className=\"text-xl font-bold text-white\">TOTAL {splitMode === 'item' ? '(Selected)' : ''}</span>\r\n                            <span className=\"text-2xl font-bold text-[#22c55e] font-mono\">Rp {totalBill.toLocaleString()}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* RIGHT PANEL: Payment */}\r\n                <div className=\"w-1/2 flex flex-col bg-[#0f1a14]\">\r\n                    <div className=\"p-6 flex-1\">\r\n                        <div className=\"flex justify-between items-center mb-4\">\r\n                            <h3 className=\"text-lg font-bold text-white\">Metode Pembayaran</h3>\r\n                            <button onClick={handlePrint} className=\"p-2 bg-[#1e3328] rounded text-slate-400 hover:text-white\"><Printer size={16} /></button>\r\n                        </div>\r\n\r\n                        <div className=\"grid grid-cols-3 gap-3 mb-8\">\r\n                            {['CASH', 'QRIS', 'DEBIT'].map(m => (\r\n                                <button\r\n                                    key={m}\r\n                                    onClick={() => setPaymentMethod(m as any)}\r\n                                    className={`py-6 rounded-lg border flex flex-col items-center justify-center gap-2 transition-all\r\n                            ${paymentMethod === m ? 'bg-[#22c55e]/10 border-[#22c55e] text-[#22c55e]' : 'bg-[#050a07] border-[#1e3328] text-slate-400 hover:border-slate-500'}\r\n                        `}\r\n                                >\r\n                                    {m === 'CASH' && <Banknote size={24} />}\r\n                                    {m === 'QRIS' && <QrCode size={24} />}\r\n                                    {m === 'DEBIT' && <CreditCard size={24} />}\r\n                                    <span className=\"text-xs font-bold\">{m}</span>\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n\r\n                        {paymentMethod === 'CASH' && (\r\n                            <div className=\"bg-[#050a07] p-6 rounded-xl border border-[#1e3328]\">\r\n                                <label className=\"text-xs text-slate-500 uppercase font-bold text-center block mb-2\">Uang Diterima</label>\r\n                                <div className=\"relative mb-6\">\r\n                                    <span className=\"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 text-lg\">Rp</span>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        className=\"w-full bg-black border border-[#1e3328] rounded-lg py-3 pl-12 pr-4 text-3xl font-mono text-white focus:border-[#22c55e] outline-none text-center\"\r\n                                        value={cashReceived || ''}\r\n                                        onChange={e => setCashReceived(Number(e.target.value))}\r\n                                        autoFocus\r\n                                    />\r\n                                </div>\r\n\r\n                                <div className=\"grid grid-cols-4 gap-2 mb-6\">\r\n                                    {[50000, 100000, 20000].map(amt => (\r\n                                        <button key={amt} onClick={() => setCashReceived(amt)} className=\"py-2 bg-[#1e3328] rounded text-xs text-[#22c55e] font-mono border border-[#1e3328] hover:border-[#22c55e]\">\r\n                                            {amt / 1000}k\r\n                                        </button>\r\n                                    ))}\r\n                                    <button onClick={() => setCashReceived(totalBill)} className=\"py-2 bg-[#1e3328] rounded text-xs text-[#eab308] font-mono border border-[#1e3328] hover:border-[#eab308]\">\r\n                                        Pas\r\n                                    </button>\r\n                                </div>\r\n\r\n                                <div className=\"flex justify-between items-center p-4 bg-[#1e3328]/30 rounded-lg border border-[#1e3328]\">\r\n                                    <span className=\"text-slate-400\">Kembalian</span>\r\n                                    <span className={`text-xl font-mono font-bold ${change < 0 ? 'text-red-500' : 'text-white'}`}>\r\n                                        Rp {change.toLocaleString()}\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"p-6 border-t border-[#1e3328]\">\r\n                        <button\r\n                            onClick={() => {\r\n                                // Filter items based on selection\r\n                                const itemsToPay = [];\r\n                                if (splitMode === 'none' || selectedItems.has('duration')) {\r\n                                    itemsToPay.push({ type: 'TABLE_BILL', name: 'Table Duration', price: Number(durationCost), qty: 1 });\r\n                                }\r\n                                fnbItems.forEach((i: any) => {\r\n                                    if (splitMode === 'none' || selectedItems.has(`item-${i.id}`)) {\r\n                                        itemsToPay.push({ type: 'PRODUCT', id: i.productId, name: i.itemName, price: Number(i.unitPrice), qty: i.quantity });\r\n                                    }\r\n                                });\r\n                                onConfirm(paymentMethod, cashReceived, totalBill, itemsToPay, pointsRedeemed);\r\n                            }}\r\n                            disabled={paymentMethod === 'CASH' && cashReceived < totalBill}\r\n                            className=\"w-full py-4 bg-[#22c55e] hover:bg-[#16a34a] text-black font-bold text-lg rounded-lg shadow-lg shadow-[#22c55e]/20 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\r\n                        >\r\n                            <Printer size={20} />\r\n                            Proses & Cetak\r\n                        </button>\r\n                        <button onClick={onClose} className=\"w-full mt-3 py-3 text-slate-400 hover:text-white font-medium\">Batal</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst TableTransferModal = ({ sourceTable, tables, onClose, onConfirm }: { sourceTable: any, tables: any[], onClose: () => void, onConfirm: (targetId: string) => void }) => {\r\n    const [selectedTarget, setSelectedTarget] = useState<string | null>(null);\r\n    const availableTables = tables.filter(t => t.status === 'AVAILABLE' && t.id !== sourceTable.id);\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n            <div className=\"bg-[#0f1a14] border border-[#1e3328] rounded-xl shadow-2xl w-full max-w-md overflow-hidden\">\r\n                <div className=\"p-4 border-b border-[#1e3328] bg-[#16261d] flex justify-between items-center\">\r\n                    <h3 className=\"text-lg font-bold text-white\">Pindah Meja</h3>\r\n                    <button onClick={onClose} className=\"text-slate-400 hover:text-white\"><X size={20} /></button>\r\n                </div>\r\n\r\n                <div className=\"p-6\">\r\n                    <p className=\"text-slate-400 text-sm mb-4\">Pindahkan sesi dari <strong className=\"text-white\">{sourceTable.name}</strong> ke:</p>\r\n\r\n                    <div className=\"grid grid-cols-2 gap-3 max-h-[300px] overflow-y-auto mb-6\">\r\n                        {availableTables.map(t => (\r\n                            <button\r\n                                key={t.id}\r\n                                onClick={() => setSelectedTarget(t.id)}\r\n                                className={`p-3 rounded border text-left transition-all\r\n                                    ${selectedTarget === t.id ? 'bg-[#22c55e]/20 border-[#22c55e] text-white' : 'bg-[#050a07] border-[#1e3328] text-slate-400 hover:border-slate-500'}\r\n                                `}\r\n                            >\r\n                                <span className=\"font-bold block\">{t.name}</span>\r\n                                <span className=\"text-xs opacity-70\">{t.type}</span>\r\n                            </button>\r\n                        ))}\r\n                        {availableTables.length === 0 && (\r\n                            <div className=\"col-span-2 text-center text-slate-500 py-4 italic\">\r\n                                Tidak ada meja kosong tersedia.\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    <button\r\n                        onClick={() => selectedTarget && onConfirm(selectedTarget)}\r\n                        disabled={!selectedTarget}\r\n                        className=\"w-full py-3 bg-[#eab308] hover:bg-yellow-500 text-black font-bold rounded-lg shadow-lg disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                    >\r\n                        Konfirmasi Pindah\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst PinModal = ({ validPin, onClose, onSuccess }: { validPin: string, onClose: () => void, onSuccess: () => void }) => {\r\n    const [pin, setPin] = useState('');\r\n    const [error, setError] = useState(false);\r\n\r\n    const handleSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (pin === validPin) {\r\n            onSuccess();\r\n        } else {\r\n            setError(true);\r\n            setPin('');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n            <div className=\"bg-[#16261d] border border-[#1e3328] rounded-xl p-6 w-80\">\r\n                <h3 className=\"text-white font-bold text-center mb-4\">Manager PIN Required</h3>\r\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                    <input\r\n                        type=\"password\"\r\n                        maxLength={6}\r\n                        autoFocus\r\n                        className={`w-full bg-black border rounded-lg text-center text-2xl tracking-widest py-3 text-white outline-none ${error ? 'border-red-500' : 'border-[#1e3328] focus:border-[#22c55e]'}`}\r\n                        value={pin}\r\n                        onChange={e => { setPin(e.target.value); setError(false); }}\r\n                        placeholder=\"••••••\"\r\n                    />\r\n                    {error && <p className=\"text-red-500 text-xs text-center\">PIN Salah</p>}\r\n                    <div className=\"grid grid-cols-2 gap-2\">\r\n                        <button type=\"button\" onClick={onClose} className=\"py-2 text-slate-400 hover:text-white\">Cancel</button>\r\n                        <button type=\"submit\" className=\"py-2 bg-[#22c55e] text-black font-bold rounded hover:bg-[#16a34a]\">Enter</button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst PrinterSettingsModal = ({ onClose }: { onClose: () => void }) => {\r\n    const [saved, setSaved] = useState(false);\r\n\r\n    // Simulate settings (in real app, useLocalStorage)\r\n    const [settings, setSettings] = useState({\r\n        barPrinter: '192.168.1.101',\r\n        kitchenPrinter: '192.168.1.102',\r\n        cashierPrinter: 'USB-001'\r\n    });\r\n\r\n    const handleSave = () => {\r\n        // localStorage.setItem('printer_settings', JSON.stringify(settings)); \r\n        setSaved(true);\r\n        setTimeout(() => { setSaved(false); onClose(); }, 1500);\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n            <div className=\"bg-[#0f1a14] border border-[#1e3328] rounded-xl p-6 w-full max-w-md\">\r\n                <h3 className=\"text-xl font-bold text-white mb-6 flex items-center gap-2\"><Printer size={20} /> Printer Configuration</h3>\r\n\r\n                <div className=\"space-y-4 mb-8\">\r\n                    <div>\r\n                        <label className=\"text-xs text-slate-500 uppercase font-bold block mb-1\">Bar Printer (Drinks)</label>\r\n                        <input type=\"text\" value={settings.barPrinter} onChange={e => setSettings({ ...settings, barPrinter: e.target.value })} className=\"w-full bg-[#050a07] border border-[#1e3328] rounded p-2 text-white text-sm\" />\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"text-xs text-slate-500 uppercase font-bold block mb-1\">Kitchen Printer (Food)</label>\r\n                        <input type=\"text\" value={settings.kitchenPrinter} onChange={e => setSettings({ ...settings, kitchenPrinter: e.target.value })} className=\"w-full bg-[#050a07] border border-[#1e3328] rounded p-2 text-white text-sm\" />\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"text-xs text-slate-500 uppercase font-bold block mb-1\">Cashier Printer (Receipts)</label>\r\n                        <input type=\"text\" value={settings.cashierPrinter} onChange={e => setSettings({ ...settings, cashierPrinter: e.target.value })} className=\"w-full bg-[#050a07] border border-[#1e3328] rounded p-2 text-white text-sm\" />\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex gap-2\">\r\n                    <button onClick={onClose} className=\"flex-1 py-3 text-slate-400 hover:text-white font-bold border border-[#1e3328] rounded-lg\">Cancel</button>\r\n                    <button onClick={handleSave} className=\"flex-1 py-3 bg-[#22c55e] text-black font-bold rounded-lg hover:bg-[#16a34a]\">\r\n                        {saved ? 'Saved!' : 'Save Configuration'}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// Add Order Modal (F&B)\r\nconst AddOrderModal = ({ sessionId, onClose, onSuccess }: { sessionId: number, onClose: () => void, onSuccess: () => void }) => {\r\n    const { data: productsData } = useSWR('/api/products', fetcher);\r\n    const products = productsData?.data || [];\r\n    const [cart, setCart] = useState<{ [id: string]: { product: any, qty: number } }>({});\r\n    const [categoryFilter, setCategoryFilter] = useState<string>('ALL');\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n    const addToCart = (product: any) => {\r\n        setCart(prev => {\r\n            const existing = prev[product.id];\r\n            return {\r\n                ...prev,\r\n                [product.id]: {\r\n                    product,\r\n                    qty: existing ? existing.qty + 1 : 1\r\n                }\r\n            };\r\n        });\r\n    };\r\n\r\n    const updateQty = (id: string, delta: number) => {\r\n        setCart(prev => {\r\n            const existing = prev[id];\r\n            if (!existing) return prev;\r\n            const newQty = existing.qty + delta;\r\n            if (newQty <= 0) {\r\n                const { [id]: _, ...rest } = prev;\r\n                return rest;\r\n            }\r\n            return { ...prev, [id]: { ...existing, qty: newQty } };\r\n        });\r\n    };\r\n\r\n    const cartItems = Object.values(cart);\r\n    const total = cartItems.reduce((sum, item) => sum + (Number(item.product.price) * item.qty), 0);\r\n\r\n    const filteredProducts = products.filter((p: any) => categoryFilter === 'ALL' || p.category === categoryFilter);\r\n\r\n    const getCategoryIcon = (cat: string) => {\r\n        switch (cat) {\r\n            case 'FOOD': return <Utensils size={16} />;\r\n            case 'DRINK': return <Coffee size={16} />;\r\n            case 'SNACK': return <Cookie size={16} />;\r\n            default: return <Coffee size={16} />;\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async () => {\r\n        if (cartItems.length === 0) return;\r\n        setIsSubmitting(true);\r\n\r\n        try {\r\n            const items = cartItems.map(item => ({\r\n                id: item.product.id,\r\n                name: item.product.name,\r\n                price: Number(item.product.price),\r\n                qty: item.qty,\r\n                type: 'PRODUCT'\r\n            }));\r\n\r\n            const res = await fetch('/api/transactions', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    sessionId,\r\n                    paymentMethod: 'CASH', // Quick order, payment later at checkout\r\n                    items\r\n                })\r\n            });\r\n\r\n            if (!res.ok) {\r\n                const errorData = await res.json();\r\n                throw new Error(errorData.error || 'Failed to create order');\r\n            }\r\n            onSuccess();\r\n        } catch (error: any) {\r\n            console.error('Order failed:', error);\r\n            alert('Gagal membuat pesanan: ' + (error.message || 'Unknown error'));\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n            <div className=\"bg-[#0f1a14] border border-[#1e3328] rounded-xl shadow-2xl w-full max-w-4xl h-[600px] flex overflow-hidden\">\r\n                {/* Products Grid */}\r\n                <div className=\"flex-1 flex flex-col border-r border-[#1e3328]\">\r\n                    <div className=\"p-4 border-b border-[#1e3328] bg-[#16261d] flex justify-between items-center\">\r\n                        <h3 className=\"text-lg font-bold text-white\">Tambah Pesanan F&B</h3>\r\n                        <button onClick={onClose} className=\"text-slate-400 hover:text-white\"><X size={20} /></button>\r\n                    </div>\r\n\r\n                    {/* Category Tabs */}\r\n                    <div className=\"p-3 border-b border-[#1e3328] flex gap-2\">\r\n                        {['ALL', 'FOOD', 'DRINK', 'SNACK'].map(cat => (\r\n                            <button\r\n                                key={cat}\r\n                                onClick={() => setCategoryFilter(cat)}\r\n                                className={`px-3 py-1.5 text-xs font-bold rounded transition-colors\r\n                                    ${categoryFilter === cat ? 'bg-[#22c55e] text-black' : 'bg-[#16261d] text-slate-400 hover:text-white'}`}\r\n                            >\r\n                                {cat}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n\r\n                    {/* Products */}\r\n                    <div className=\"flex-1 overflow-y-auto p-4 grid grid-cols-3 gap-3 content-start\">\r\n                        {filteredProducts.map((p: any) => (\r\n                            <button\r\n                                key={p.id}\r\n                                onClick={() => addToCart(p)}\r\n                                className=\"bg-[#050a07] border border-[#1e3328] rounded-lg p-3 text-left hover:border-[#22c55e] transition-colors group\"\r\n                            >\r\n                                <div className=\"flex items-center gap-2 mb-2\">\r\n                                    <div className=\"p-1.5 rounded bg-[#22c55e]/10 text-[#22c55e]\">\r\n                                        {getCategoryIcon(p.category)}\r\n                                    </div>\r\n                                    <span className=\"text-[10px] text-slate-500 uppercase font-bold\">{p.category}</span>\r\n                                </div>\r\n                                <h4 className=\"font-bold text-white text-sm truncate mb-1 group-hover:text-[#22c55e]\">{p.name}</h4>\r\n                                <p className=\"text-[#22c55e] font-mono text-sm\">Rp {Number(p.price).toLocaleString()}</p>\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Cart */}\r\n                <div className=\"w-[280px] flex flex-col bg-[#050a07]\">\r\n                    <div className=\"p-4 border-b border-[#1e3328] flex items-center gap-2\">\r\n                        <ShoppingCart size={18} className=\"text-[#22c55e]\" />\r\n                        <h4 className=\"font-bold text-white\">Keranjang ({cartItems.length})</h4>\r\n                    </div>\r\n\r\n                    <div className=\"flex-1 overflow-y-auto p-3 space-y-2\">\r\n                        {cartItems.length === 0 ? (\r\n                            <p className=\"text-center text-slate-500 text-sm py-8 italic\">Keranjang kosong</p>\r\n                        ) : (\r\n                            cartItems.map(item => (\r\n                                <div key={item.product.id} className=\"bg-[#0f1a14] border border-[#1e3328] rounded p-2\">\r\n                                    <div className=\"flex justify-between items-start mb-2\">\r\n                                        <span className=\"font-medium text-white text-sm truncate flex-1\">{item.product.name}</span>\r\n                                        <span className=\"text-[#22c55e] font-mono text-xs\">Rp {(Number(item.product.price) * item.qty).toLocaleString()}</span>\r\n                                    </div>\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <button onClick={() => updateQty(item.product.id, -1)} className=\"p-1 bg-[#1e3328] rounded text-slate-400 hover:text-white\"><Minus size={12} /></button>\r\n                                        <span className=\"text-white text-sm font-mono w-6 text-center\">{item.qty}</span>\r\n                                        <button onClick={() => updateQty(item.product.id, 1)} className=\"p-1 bg-[#1e3328] rounded text-slate-400 hover:text-white\"><Plus size={12} /></button>\r\n                                    </div>\r\n                                </div>\r\n                            ))\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"p-4 border-t border-[#1e3328]\">\r\n                        <div className=\"flex justify-between items-center mb-4\">\r\n                            <span className=\"text-slate-400\">Total</span>\r\n                            <span className=\"text-xl font-bold text-[#22c55e] font-mono\">Rp {total.toLocaleString()}</span>\r\n                        </div>\r\n                        <button\r\n                            onClick={handleSubmit}\r\n                            disabled={cartItems.length === 0 || isSubmitting}\r\n                            className=\"w-full py-3 bg-[#22c55e] hover:bg-[#16a34a] text-black font-bold rounded-lg disabled:opacity-50\"\r\n                        >\r\n                            {isSubmitting ? 'Memproses...' : 'Tambah ke Bill'}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default function DashboardPage() {\r\n    const { data: tablesData, mutate } = useSWR('/api/tables', fetcher, { refreshInterval: 5000 });\r\n    const tables = tablesData?.data || [];\r\n\r\n    const [selectedId, setSelectedId] = useState<number | null>(null);\r\n    const [viewMode, setViewMode] = useState<'grid' | 'list'>('grid');\r\n    const [showCheckout, setShowCheckout] = useState(false);\r\n    const [showTransfer, setShowTransfer] = useState(false);\r\n    const [showAddOrder, setShowAddOrder] = useState(false);\r\n    const [selectedMember, setSelectedMember] = useState<any>(null);\r\n    const [customerName, setCustomerName] = useState<string>('');\r\n    const [showBillingOptions, setShowBillingOptions] = useState(false);\r\n    const [billingType, setBillingType] = useState<'open' | number>('open'); // 'open' or fixed hours (1-5)\r\n\r\n    // Auth & Settings States\r\n    const [showPin, setShowPin] = useState(false);\r\n    const [showSettings, setShowSettings] = useState(false);\r\n\r\n    const selectedTable = tables.find((t: any) => t.id === selectedId);\r\n\r\n    const getStatusColor = (status: string) => {\r\n        switch (status) {\r\n            case 'AVAILABLE': return 'bg-[#16261d] border-[#1e3328] text-white hover:border-[#22c55e]/50';\r\n            case 'ACTIVE': return 'bg-[#0f391e] border-[#22c55e] text-white ring-1 ring-[#22c55e]/50';\r\n            case 'BOOKED': return 'bg-[#3f2e0b] border-[#eab308] text-[#eab308]';\r\n            case 'CLEANING': return 'bg-[#2a1b3d] border-[#a855f7] text-[#a855f7]';\r\n            case 'MAINTENANCE': return 'bg-[#0e2a36] border-[#0ea5e9] text-[#0ea5e9]';\r\n            default: return 'bg-[#16261d] border-[#1e3328] text-white';\r\n        }\r\n    };\r\n\r\n    const handleAction = async (action: 'start' | 'stop', billingType?: 'open' | number) => {\r\n        if (!selectedId) return;\r\n        // Use selectedMember name, or typed customerName, or default to empty\r\n        const nameToUse = selectedMember?.fullName || customerName || '';\r\n        const body = action === 'start' ? {\r\n            customerName: nameToUse || undefined,\r\n            memberId: selectedMember?.id,\r\n            billingType: billingType || 'open', // 'open' or fixed hours (1-5)\r\n            fixedHours: typeof billingType === 'number' ? billingType : undefined\r\n        } : {};\r\n\r\n        await fetch(`/api/tables/${selectedId}/${action}`, {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify(body)\r\n        });\r\n        setSelectedMember(null);\r\n        setCustomerName(''); // Reset after start\r\n        mutate();\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex flex-1 overflow-hidden relative h-full\">\r\n            {/* Billing Options Modal */}\r\n            {showBillingOptions && selectedTable && (\r\n                <BillingOptionsModal\r\n                    hourlyRate={selectedTable.hourlyRate || 50000}\r\n                    onClose={() => setShowBillingOptions(false)}\r\n                    onSelect={(type) => {\r\n                        setBillingType(type);\r\n                        handleAction('start', type);\r\n                        setShowBillingOptions(false);\r\n                    }}\r\n                />\r\n            )}\r\n\r\n            {/* Visual Floor Plan */}\r\n            <main className=\"flex-1 flex flex-col bg-[#050a07] overflow-hidden\">\r\n                {/* Top Control Bar */}\r\n                <div className=\"px-6 py-4 border-b border-[#1e3328] bg-[#0f1a14] flex justify-between items-center z-20 shadow-md\">\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <h2 className=\"text-xl font-bold text-white\">Lantai 1 - Main Hall</h2>\r\n                            <button onClick={() => setShowPin(true)} className=\"p-1.5 hover:bg-[#16261d] rounded text-slate-500 hover:text-white border border-transparent hover:border-[#1e3328] transition-all\"><Settings size={18} /></button>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-2 text-xs bg-[#16261d] px-2 py-1 rounded border border-[#1e3328]\">\r\n                            <div className=\"size-2 rounded-full bg-[#22c55e]\"></div> Active\r\n                            <div className=\"size-2 rounded-full bg-[#eab308] ml-2\"></div> Booked\r\n                            <div className=\"size-2 rounded-full bg-slate-500 ml-2\"></div> Available\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"flex gap-2\">\r\n                        <button\r\n                            onClick={() => setViewMode('grid')}\r\n                            className={`flex items-center gap-2 border px-3 py-2 rounded text-sm font-medium transition-colors\r\n                                    ${viewMode === 'grid' ? 'bg-[#16261d] text-white border-[#22c55e]/50' : 'bg-transparent text-slate-400 border-[#1e3328] hover:bg-[#16261d]'}\r\n                                `}\r\n                        >\r\n                            <LayoutGrid size={16} /> Grid View\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setViewMode('list')}\r\n                            className={`flex items-center gap-2 border px-3 py-2 rounded text-sm font-medium transition-colors\r\n                                    ${viewMode === 'list' ? 'bg-[#16261d] text-white border-[#22c55e]/50' : 'bg-transparent text-slate-400 border-[#1e3328] hover:bg-[#16261d]'}\r\n                                `}\r\n                        >\r\n                            <List size={16} /> List View\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Grid Area */}\r\n                <div className=\"flex-1 overflow-y-auto p-6\">\r\n                    {viewMode === 'grid' ? (\r\n                        <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\r\n                            {tables.map((table: any) => (\r\n                                <div\r\n                                    key={table.id}\r\n                                    onClick={() => setSelectedId(table.id)}\r\n                                    className={`relative p-4 rounded-xl border transition-all hover:scale-[1.02] flex flex-col justify-between h-48 shadow-lg group cursor-pointer\r\n                          ${getStatusColor(table.status)}\r\n                          ${selectedId === table.id ? 'ring-2 ring-white ring-offset-2 ring-offset-[#050a07]' : ''}\r\n                        `}\r\n                                >\r\n                                    {/* Header */}\r\n                                    <div className=\"flex justify-between items-start mb-2\">\r\n                                        <div className=\"flex flex-col\">\r\n                                            <span className=\"font-bold text-lg leading-none\">{table.name}</span>\r\n                                            <span className=\"text-[10px] opacity-70 mt-1 uppercase tracking-wide font-medium\">Regular Table</span>\r\n                                        </div>\r\n                                        {table.status === 'ACTIVE' && <div className=\"animate-pulse size-3 rounded-full bg-[#22c55e] shadow-[0_0_10px_#22c55e]\"></div>}\r\n                                    </div>\r\n\r\n                                    {/* Body */}\r\n                                    <div className=\"flex flex-col items-center justify-center flex-1 w-full\">\r\n                                        {table.status === 'ACTIVE' && table.activeSession ? (\r\n                                            <RealTimeTimer\r\n                                                startTime={table.activeSession.startTime}\r\n                                                endTime={table.activeSession.endTime}\r\n                                                hourlyRate={table.hourlyRate || 50000}\r\n                                                isPaused={table.activeSession.status === 'PAUSED'}\r\n                                                onWarning={() => {\r\n                                                    if (selectedId === table.id) {\r\n                                                        alert('⏰ Peringatan: Waktu tersisa 5 menit!');\r\n                                                    }\r\n                                                }}\r\n                                                onTimeUp={() => {\r\n                                                    if (selectedId === table.id || !selectedId) {\r\n                                                        setSelectedId(table.id);\r\n                                                        setShowCheckout(true);\r\n                                                    }\r\n                                                }}\r\n                                            />\r\n                                        ) : (\r\n                                            <div className=\"flex flex-col items-center opacity-30 group-hover:opacity-60 transition-opacity\">\r\n                                                <div className=\"size-12 rounded-full border-2 border-dashed border-white flex items-center justify-center mb-1\">\r\n                                                    <Plus size={20} />\r\n                                                </div>\r\n                                                <span className=\"text-xs font-medium\">{table.status}</span>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n\r\n                                    {/* Footer */}\r\n                                    <div className=\"flex justify-between items-center text-xs opacity-80 border-t border-white/10 pt-3 mt-1\">\r\n                                        <div className=\"flex items-center gap-1.5 truncate max-w-[60%]\">\r\n                                            <Users size={14} />\r\n                                            <span className=\"font-medium truncate\">{table.activeSession?.customerName || '-'}</span>\r\n                                        </div>\r\n                                        {table.activeSession && (\r\n                                            <div className=\"flex items-center gap-1 text-slate-400\">\r\n                                                <Clock size={12} />\r\n                                                <span className=\"font-mono text-[10px]\">\r\n                                                    {new Date(table.activeSession.startTime).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n                                                </span>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"flex flex-col gap-2\">\r\n                            {tables.map((table: any) => (\r\n                                <div\r\n                                    key={table.id}\r\n                                    onClick={() => setSelectedId(table.id)}\r\n                                    className={`flex items-center justify-between p-4 rounded-lg border transition-all cursor-pointer hover:bg-[#16261d]\r\n                                            ${selectedId === table.id ? 'border-[#22c55e] bg-[#16261d]' : 'border-[#1e3328] bg-[#0f1a14]'}\r\n                                        `}\r\n                                >\r\n                                    <div className=\"flex items-center gap-4\">\r\n                                        <div className={`size-3 rounded-full ${table.status === 'ACTIVE' ? 'bg-[#22c55e] animate-pulse' :\r\n                                            table.status === 'BOOKED' ? 'bg-[#eab308]' :\r\n                                                table.status === 'MAINTENANCE' ? 'bg-[#0ea5e9]' : 'bg-slate-500'\r\n                                            }`}></div>\r\n                                        <div>\r\n                                            <h3 className=\"font-bold text-white text-lg\">{table.name}</h3>\r\n                                            <p className=\"text-xs text-slate-400\">Regular Table</p>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"flex items-center gap-8\">\r\n                                        {table.status === 'ACTIVE' && table.activeSession && (\r\n                                            <ListViewTimer\r\n                                                startTime={table.activeSession.startTime}\r\n                                                hourlyRate={table.hourlyRate || 50000}\r\n                                            />\r\n                                        )}\r\n                                        <div className=\"flex items-center gap-2 text-slate-500 min-w-[150px] justify-end\">\r\n                                            <Users size={16} />\r\n                                            <span className=\"text-sm font-medium\">{table.activeSession?.customerName || '-'}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </main>\r\n\r\n            {/* Smart Context Sidebar */}\r\n            <aside className=\"w-[360px] bg-[#0f1a14] border-l border-[#1e3328] flex flex-col shrink-0 z-30 shadow-xl\">\r\n                {selectedTable ? (\r\n                    // TABLE CONTROL MODE\r\n                    <>\r\n                        <div className=\"p-5 border-b border-[#1e3328] bg-[#16261d]\">\r\n                            <div className=\"flex justify-between items-start mb-2\">\r\n                                <div>\r\n                                    <h3 className=\"text-2xl font-bold text-white\">{selectedTable.name}</h3>\r\n                                    <p className=\"text-sm text-slate-400\">Regular Table • Kapasitas 6</p>\r\n                                </div>\r\n                                <button onClick={() => setSelectedId(null)} className=\"text-slate-400 hover:text-white\"><X size={20} /></button>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2 mt-4\">\r\n                                <div className={`px-2 py-1 rounded text-xs font-bold border ${getStatusColor(selectedTable.status)} bg-opacity-20`}>\r\n                                    {selectedTable.status}\r\n                                </div>\r\n                                {selectedTable.status === 'ACTIVE' && <span className=\"text-[#22c55e] text-sm font-mono font-bold\">Billing berjalan</span>}\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex-1 overflow-y-auto p-5\">\r\n                            {/* Member Search - Only when Available */}\r\n                            {selectedTable.status === 'AVAILABLE' && (\r\n                                <div className=\"mb-4\">\r\n                                    <label className=\"text-xs text-slate-500 uppercase font-bold mb-1 block\">Nama Customer / Cari Member</label>\r\n                                    <div className=\"relative\">\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            placeholder=\"Ketik nama customer...\"\r\n                                            value={selectedMember?.fullName || customerName}\r\n                                            className=\"w-full bg-[#050a07] border border-[#1e3328] rounded p-2 text-sm text-white focus:border-[#22c55e] outline-none\"\r\n                                            onChange={async (e) => {\r\n                                                const value = e.target.value;\r\n                                                setCustomerName(value);\r\n                                                setSelectedMember(null);\r\n\r\n                                                // Try to find member if typing\r\n                                                if (value.length > 2) {\r\n                                                    const members = await fetchMembers(value);\r\n                                                    if (members.length > 0) setSelectedMember(members[0]);\r\n                                                }\r\n                                            }}\r\n                                        />\r\n                                        {selectedMember && (\r\n                                            <div className=\"absolute right-2 top-2 text-xs text-[#22c55e] font-bold flex items-center gap-1\">\r\n                                                <Users size={12} /> Member\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n\r\n                            <div className=\"grid grid-cols-3 gap-2 mb-6\">\r\n                                <button\r\n                                    onClick={() => setShowBillingOptions(true)}\r\n                                    disabled={selectedTable.status === 'ACTIVE'}\r\n                                    className=\"flex flex-col items-center justify-center p-3 bg-[#16261d] hover:bg-[#1e3328] border border-[#1e3328] rounded transition-colors group disabled:opacity-50\"\r\n                                >\r\n                                    <Play size={24} className=\"text-[#22c55e] mb-1\" />\r\n                                    <span className=\"text-xs font-medium text-slate-300\">Start</span>\r\n                                </button>\r\n                                <button\r\n                                    onClick={async () => {\r\n                                        if (!selectedId) return;\r\n                                        await fetch(`/api/tables/${selectedId}/pause`, { method: 'POST' });\r\n                                        mutate();\r\n                                    }}\r\n                                    disabled={selectedTable.status !== 'ACTIVE' && selectedTable.status !== 'BOOKED'}\r\n                                    className=\"flex flex-col items-center justify-center p-3 bg-[#16261d] hover:bg-[#1e3328] border border-[#1e3328] rounded transition-colors group disabled:opacity-50\"\r\n                                >\r\n                                    <Pause size={24} className=\"text-[#eab308] mb-1\" />\r\n                                    <span className=\"text-xs font-medium text-slate-300\">\r\n                                        {selectedTable.activeSession?.status === 'PAUSED' ? 'Resume' : 'Pause'}\r\n                                    </span>\r\n                                </button>\r\n                                <button\r\n                                    onClick={async () => {\r\n                                        if (!selectedTable.activeSession) return;\r\n                                        // Stop and directly open checkout\r\n                                        setShowCheckout(true);\r\n                                    }}\r\n                                    disabled={selectedTable.status !== 'ACTIVE'}\r\n                                    className=\"flex flex-col items-center justify-center p-3 bg-[#16261d] hover:bg-[#1e3328] border border-[#1e3328] rounded transition-colors group disabled:opacity-50\"\r\n                                >\r\n                                    <Square size={24} className=\"text-[#ef4444] mb-1\" />\r\n                                    <span className=\"text-xs font-medium text-slate-300\">Stop</span>\r\n                                </button>\r\n                            </div>\r\n\r\n                            <button\r\n                                onClick={() => setShowTransfer(true)}\r\n                                className=\"w-full flex items-center justify-center gap-2 p-2 mb-4 bg-[#0f1a14] hover:bg-[#1e3328] border border-[#1e3328] rounded text-slate-400 hover:text-white transition-colors group\"\r\n                            >\r\n                                <ArrowRightLeft size={16} />\r\n                                <span className=\"text-sm font-medium\">Pindah Meja</span>\r\n                            </button>\r\n\r\n                            <h4 className=\"text-xs font-bold text-slate-500 uppercase tracking-wider mb-3\">Quick Actions</h4>\r\n                            <div className=\"space-y-2 mb-6\">\r\n                                <button\r\n                                    onClick={() => setShowAddOrder(true)}\r\n                                    disabled={selectedTable.status !== 'ACTIVE'}\r\n                                    className=\"w-full flex items-center justify-between p-3 bg-[#050a07] border border-[#1e3328] rounded hover:border-[#22c55e] transition-colors group disabled:opacity-50\"\r\n                                >\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                        <div className=\"p-2 bg-[#22c55e]/10 rounded text-[#22c55e]\"><Coffee size={18} /></div>\r\n                                        <span className=\"text-sm font-medium text-slate-300 group-hover:text-white\">Tambah Pesanan F&B</span>\r\n                                    </div>\r\n                                </button>\r\n                            </div>\r\n\r\n                            <button\r\n                                onClick={() => setShowCheckout(true)}\r\n                                disabled={selectedTable.status !== 'ACTIVE'}\r\n                                className=\"w-full mb-6 py-3 bg-[#eab308] hover:bg-yellow-500 text-black font-bold rounded-lg shadow-lg flex items-center justify-center gap-2 disabled:opacity-50\"\r\n                            >\r\n                                <Receipt size={20} />\r\n                                Checkout & Bayar\r\n                            </button>\r\n\r\n                            {selectedTable.status === 'ACTIVE' && selectedTable.activeSession && (\r\n                                <div className=\"bg-[#050a07] border border-[#1e3328] rounded p-4\">\r\n                                    <div className=\"flex justify-between items-center\">\r\n                                        <span className=\"font-bold text-white\">Total Tagihan</span>\r\n                                        <RealTimeBill\r\n                                            startTime={selectedTable.activeSession.startTime}\r\n                                            hourlyRate={selectedTable.hourlyRate || 50000}\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </>\r\n                ) : (\r\n                    // WAITING LIST & RESERVATIONS SIDEBAR\r\n                    <WaitingListSidebar />\r\n                )}\r\n            </aside>\r\n\r\n            {showCheckout && selectedTable && (\r\n                <CheckoutModal\r\n                    table={selectedTable}\r\n                    onClose={() => setShowCheckout(false)}\r\n                    onConfirm={async (method, cash, total, items) => {\r\n                        try {\r\n                            // 1. Stop Session (Required to close main loop)\r\n                            const stopRes = await fetch(`/api/tables/${selectedTable.id}/stop`, { method: 'POST' });\r\n                            const stopData = await stopRes.json();\r\n\r\n                            if (!stopRes.ok || !stopData.success) {\r\n                                throw new Error(stopData.error || 'Gagal menghentikan sesi');\r\n                            }\r\n\r\n                            const sessionId = stopData.data?.sessionId;\r\n\r\n                            // 2. Create Transaction with REAL items\r\n                            const transRes = await fetch('/api/transactions', {\r\n                                method: 'POST',\r\n                                headers: { 'Content-Type': 'application/json' },\r\n                                body: JSON.stringify({\r\n                                    sessionId,\r\n                                    paymentMethod: method,\r\n                                    items: items // Use the items passed from CheckoutModal\r\n                                })\r\n                            });\r\n\r\n                            const transData = await transRes.json();\r\n                            console.log(\"Transaction Response:\", transData); // Debug\r\n\r\n                            if (!transRes.ok || !transData.success) {\r\n                                // Show detailed error message\r\n                                const errMsg = transData.details\r\n                                    ? JSON.stringify(transData.details)\r\n                                    : transData.error || 'Gagal memproses transaksi';\r\n                                throw new Error(errMsg);\r\n                            }\r\n\r\n                            await mutate();\r\n                            setShowCheckout(false);\r\n                            setSelectedId(null);\r\n                            alert(`Pembayaran Berhasil Rp ${total.toLocaleString()}! Struk dicetak.`);\r\n                        } catch (e: any) {\r\n                            console.error(\"Checkout failed\", e);\r\n                            alert(e.message || 'Pembayaran Gagal');\r\n                        }\r\n                    }}\r\n                />\r\n            )}\r\n\r\n            {showTransfer && selectedTable && (\r\n                <TableTransferModal\r\n                    sourceTable={selectedTable}\r\n                    tables={tables}\r\n                    onClose={() => setShowTransfer(false)}\r\n                    onConfirm={async (targetId) => {\r\n                        try {\r\n                            const res = await fetch('/api/tables/transfer', {\r\n                                method: 'POST',\r\n                                headers: { 'Content-Type': 'application/json' },\r\n                                body: JSON.stringify({ fromTableId: selectedTable.id, toTableId: targetId })\r\n                            });\r\n\r\n                            if (!res.ok) {\r\n                                const err = await res.json();\r\n                                alert(err.error || 'Gagal memindahkan meja');\r\n                                return;\r\n                            }\r\n\r\n                            await mutate(); // Refresh data\r\n                            setShowTransfer(false);\r\n                            setSelectedId(null);\r\n                        } catch (e) {\r\n                            console.error(\"Transfer failed\", e);\r\n                            alert('Terjadi kesalahan saat memindahkan meja');\r\n                        }\r\n                    }}\r\n                />\r\n            )}\r\n\r\n            {showPin && (\r\n                <PinModal\r\n                    validPin=\"123456\"\r\n                    onClose={() => setShowPin(false)}\r\n                    onSuccess={() => { setShowPin(false); setShowSettings(true); }}\r\n                />\r\n            )}\r\n            {showSettings && <PrinterSettingsModal onClose={() => setShowSettings(false)} />}\r\n\r\n            {showAddOrder && selectedTable?.activeSession && (\r\n                <AddOrderModal\r\n                    sessionId={selectedTable.activeSession.id}\r\n                    onClose={() => setShowAddOrder(false)}\r\n                    onSuccess={() => { setShowAddOrder(false); mutate(); }}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAJA;;;;;AAYA,MAAM,UAAU,CAAC,MAAgB,MAAM,KAAK,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI;AAE5D,gEAAgE;AAChE,MAAM,gBAAgB,CAAC,EACnB,SAAS,EACT,OAAO,EACP,UAAU,EACV,QAAQ,EACR,QAAQ,EACR,SAAS,EAQZ;IACG,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IACrD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,MAAM,iBAAiB,CAAC,CAAC;IACzB,MAAM,YAAY,UAAU,IAAI,KAAK,SAAS,OAAO,KAAK;IAC1D,MAAM,cAAc,IAAI,KAAK,WAAW,OAAO;IAC/C,MAAM,sBAAsB,iBAAiB,KAAK,KAAK,CAAC,CAAC,YAAY,WAAW,IAAI,QAAQ;IAE5F,IAAA,kNAAS,EAAC;QACN,IAAI,UAAU;QAEd,MAAM,cAAc;YAChB,MAAM,MAAM,KAAK,GAAG;YACpB,MAAM,UAAU,KAAK,KAAK,CAAC,CAAC,MAAM,WAAW,IAAI;YACjD,kBAAkB;YAElB,4DAA4D;YAC5D,IAAI,kBAAkB,CAAC,SAAS;gBAC5B,MAAM,mBAAmB,KAAK,KAAK,CAAC,CAAC,YAAY,GAAG,IAAI;gBAExD,qCAAqC;gBACrC,IAAI,oBAAoB,OAAO,mBAAmB,KAAK,CAAC,QAAQ;oBAC5D,UAAU;oBACV;gBACJ;gBAEA,YAAY;gBACZ,IAAI,oBAAoB,GAAG;oBACvB,WAAW;oBACX;gBACJ;YACJ;QACJ;QAEA,eAAe,UAAU;QACzB,MAAM,WAAW,YAAY,aAAa;QAC1C,OAAO,IAAM,cAAc;IAC/B,GAAG;QAAC;QAAa;QAAW;QAAgB;QAAU;QAAQ;QAAS;QAAU;KAAU;IAE3F,MAAM,eAAe,KAAK,KAAK,CAAC,iBAAiB;IACjD,MAAM,QAAQ,KAAK,KAAK,CAAC,eAAe;IACxC,MAAM,OAAO,eAAe;IAC5B,MAAM,OAAO,iBAAiB;IAE9B,2DAA2D;IAC3D,MAAM,OAAO,iBACP,KAAK,IAAI,CAAC,AAAC,sBAAsB,OAAQ,cACzC,KAAK,IAAI,CAAC,AAAC,iBAAiB,OAAQ;IAE1C,uCAAuC;IACvC,MAAM,mBAAmB,iBAAiB,KAAK,GAAG,CAAC,GAAG,sBAAsB,kBAAkB;IAC9F,MAAM,aAAa,KAAK,KAAK,CAAC,mBAAmB;IACjD,MAAM,aAAa,mBAAmB;IAEtC,iEAAiE;IACjE,MAAM,cAAc,QAAQ,IACtB,GAAG,MAAM,QAAQ,GAAG,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAE,KAAK,QAAQ,GAAG,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAE,KAAK,QAAQ,GAAG,QAAQ,CAAC,GAAG,MAAM,GAC9G,GAAG,KAAK,QAAQ,GAAG,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAE,KAAK,QAAQ,GAAG,QAAQ,CAAC,GAAG,MAAM;IAE/E,4CAA4C;IAC5C,MAAM,aAAa,kBAAkB,oBAAoB,OAAO,mBAAmB;IACnF,MAAM,WAAW,kBAAkB,oBAAoB;IACvD,MAAM,aAAa,WAAW,iBAAiB,aAAa,mBAAmB;IAC/E,MAAM,YAAY,WAAW,iBAAiB;IAE9C,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAI,WAAW,CAAC,6CAA6C,EAAE,WAAW,oBAAoB,CAAC;0BAC3F;;;;;;YAIJ,gCACG,8OAAC;gBAAI,WAAW,CAAC,uBAAuB,EAAE,WAAW,+BAA+B,aAAa,mBAAmB,kBAAkB;0BACjI,WAAW,mBAAmB,CAAC,MAAM,EAAE,WAAW,CAAC,EAAE,WAAW,QAAQ,GAAG,QAAQ,CAAC,GAAG,MAAM;;;;;;0BAItG,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAK,WAAU;kCACX,iBAAiB,UAAU;;;;;;kCAEhC,8OAAC;wBAAK,WAAW,CAAC,oBAAoB,EAAE,UAAU,QAAQ,CAAC;;4BAAE;4BACrD,KAAK,cAAc;;;;;;;;;;;;;;;;;;;AAK3C;AAEA,8BAA8B;AAC9B,MAAM,gBAAgB,CAAC,EAAE,SAAS,EAAE,UAAU,EAA6C;IACvF,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IAErD,IAAA,kNAAS,EAAC;QACN,MAAM,QAAQ,IAAI,KAAK,WAAW,OAAO;QAEzC,MAAM,cAAc;YAChB,MAAM,MAAM,KAAK,GAAG;YACpB,MAAM,UAAU,KAAK,KAAK,CAAC,CAAC,MAAM,KAAK,IAAI;YAC3C,kBAAkB;QACtB;QAEA;QACA,MAAM,WAAW,YAAY,aAAa;QAC1C,OAAO,IAAM,cAAc;IAC/B,GAAG;QAAC;KAAU;IAEd,MAAM,eAAe,KAAK,KAAK,CAAC,iBAAiB;IACjD,MAAM,QAAQ,KAAK,KAAK,CAAC,eAAe;IACxC,MAAM,OAAO,eAAe;IAC5B,MAAM,OAAO,iBAAiB;IAC9B,iDAAiD;IACjD,MAAM,OAAO,KAAK,IAAI,CAAC,AAAC,iBAAiB,OAAQ;IAEjD,MAAM,cAAc,QAAQ,IACtB,GAAG,MAAM,QAAQ,GAAG,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAE,KAAK,QAAQ,GAAG,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAE,KAAK,QAAQ,GAAG,QAAQ,CAAC,GAAG,MAAM,GAC9G,GAAG,KAAK,QAAQ,GAAG,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAE,KAAK,QAAQ,GAAG,QAAQ,CAAC,GAAG,MAAM;IAE/E,qBACI;;0BACI,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAK,WAAU;kCAA6C;;;;;;kCAC7D,8OAAC;wBAAK,WAAU;kCACX;;;;;;;;;;;;0BAGT,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAK,WAAU;kCAA6C;;;;;;kCAC7D,8OAAC;wBAAK,WAAU;;4BAA6C;4BAAI,KAAK,cAAc;;;;;;;;;;;;;;;AAIpG;AAEA,qCAAqC;AACrC,MAAM,eAAe,CAAC,EAAE,SAAS,EAAE,UAAU,EAA6C;IACtF,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IAErD,IAAA,kNAAS,EAAC;QACN,MAAM,QAAQ,IAAI,KAAK,WAAW,OAAO;QAEzC,MAAM,cAAc;YAChB,MAAM,MAAM,KAAK,GAAG;YACpB,MAAM,UAAU,KAAK,KAAK,CAAC,CAAC,MAAM,KAAK,IAAI;YAC3C,kBAAkB;QACtB;QAEA;QACA,MAAM,WAAW,YAAY,aAAa;QAC1C,OAAO,IAAM,cAAc;IAC/B,GAAG;QAAC;KAAU;IAEd,MAAM,OAAO,KAAK,IAAI,CAAC,AAAC,iBAAiB,OAAQ;IAEjD,qBACI,8OAAC;QAAK,WAAU;;YAA6C;YACrD,KAAK,cAAc;;;;;;;AAGnC;AAEA,MAAM,qBAAqB;IACvB,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,IAAA,yKAAM,EAAC,qBAAqB;IACtD,MAAM,eAAe,SAAS,QAAQ,EAAE;IACxC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAA2B;IAErE,MAAM,UAAU,aAAa,MAAM,CAAC,CAAC,IAAW,EAAE,KAAK,EAAE,SAAS,cAAc,EAAE,MAAM,KAAK;IAC7F,MAAM,qBAAqB,aAAa,MAAM,CAAC,CAAC,IAAW,CAAC,EAAE,KAAK,EAAE,SAAS,cAAc,EAAE,MAAM,KAAK;IAEzG,MAAM,OAAO,cAAc,WAAW,UAAU;IAEhD,qBACI;;0BACI,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAG,WAAU;kCAAoC;;;;;;kCAClD,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCACG,SAAS,IAAM,aAAa;gCAC5B,WAAW,CAAC,0DAA0D,EAAE,cAAc,WAAW,4BAA4B,mCAAmC;;oCACnK;oCACa,QAAQ,MAAM;oCAAC;;;;;;;0CAE7B,8OAAC;gCACG,SAAS,IAAM,aAAa;gCAC5B,WAAW,CAAC,0DAA0D,EAAE,cAAc,gBAAgB,4BAA4B,mCAAmC;;oCACxK;oCACe,mBAAmB,MAAM;oCAAC;;;;;;;;;;;;;;;;;;;0BAKlD,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;oBAAO,WAAU;;sCACd,8OAAC,0MAAI;4BAAC,MAAM;;;;;;wBAAM;wBAAE,cAAc,WAAW,mBAAmB;;;;;;;;;;;;0BAIxE,8OAAC;gBAAI,WAAU;0BACV,KAAK,MAAM,KAAK,kBACb,8OAAC;oBAAI,WAAU;8BAAiD;;;;;+DAIhE,KAAK,GAAG,CAAC,CAAC,MAAW,oBACjB,8OAAC;wBAAkB,WAAU;;0CACzB,8OAAC;gCAAI,WAAW,CAAC;4BACjB,EAAE,cAAc,WAAW,iDAAiD,sDAAsD;0CAC7H,cAAc,WAAW,MAAM,kBAAI,8OAAC,6MAAK;oCAAC,MAAM;;;;;;;;;;;0CAErD,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCAAI,WAAU;;0DACX,8OAAC;gDAAK,WAAU;0DAAgC,KAAK,YAAY;;;;;;0DACjE,8OAAC;gDAAK,WAAU;0DAAoC,IAAI,KAAK,KAAK,WAAW,EAAE,kBAAkB,CAAC,EAAE,EAAE;oDAAE,MAAM;oDAAW,QAAQ;gDAAU;;;;;;;;;;;;kDAE/I,8OAAC;wCAAI,WAAU;;0DACX,8OAAC;;oDAAM,KAAK,GAAG;oDAAC;;;;;;;0DAChB,8OAAC;0DAAK;;;;;;0DACN,8OAAC;0DAAM,KAAK,SAAS;;;;;;;;;;;;;;;;;;0CAG7B,8OAAC;gCAAO,WAAU;0CACd,cAAA,8OAAC,sOAAY;oCAAC,MAAM;;;;;;;;;;;;uBAjBlB,KAAK,EAAE;;;;;;;;;;;;AAyBzC;AAGA,MAAM,eAAe,OAAO;IACxB,IAAI,CAAC,OAAO,OAAO,EAAE;IACrB,MAAM,MAAM,MAAM,MAAM,CAAC,eAAe,EAAE,OAAO;IACjD,MAAM,OAAO,MAAM,IAAI,IAAI;IAC3B,OAAO,KAAK,IAAI,IAAI,EAAE;AAC1B;AAEA,mDAAmD;AACnD,MAAM,sBAAsB,CAAC,EACzB,UAAU,EACV,OAAO,EACP,QAAQ,EAKX;IACG,qBACI,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC;YAAI,WAAU;;8BACX,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAG,WAAU;sCAA+B;;;;;;sCAC7C,8OAAC;4BAAO,SAAS;4BAAS,WAAU;sCAChC,cAAA,8OAAC,iMAAC;gCAAC,MAAM;;;;;;;;;;;;;;;;;8BAIjB,8OAAC;oBAAI,WAAU;;sCAEX,8OAAC;4BACG,SAAS,IAAM,SAAS;4BACxB,WAAU;;8CAEV,8OAAC;oCAAI,WAAU;8CACX,cAAA,8OAAC,6MAAK;wCAAC,MAAM;;;;;;;;;;;8CAEjB,8OAAC;oCAAI,WAAU;;sDACX,8OAAC;4CAAG,WAAU;sDAAuB;;;;;;sDACrC,8OAAC;4CAAE,WAAU;sDAAyB;;;;;;;;;;;;8CAE1C,8OAAC;oCAAK,WAAU;;wCAAmC;wCAAI,WAAW,cAAc;wCAAG;;;;;;;;;;;;;sCAIvF,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAG,WAAU;8CAAiE;;;;;;8CAG/E,8OAAC;oCAAI,WAAU;8CACV;wCAAC;wCAAG;wCAAG;wCAAG;wCAAG;qCAAE,CAAC,GAAG,CAAC,CAAC,sBAClB,8OAAC;4CAEG,SAAS,IAAM,SAAS;4CACxB,WAAU;;8DAEV,8OAAC;oDAAK,WAAU;8DAAgC;;;;;;8DAChD,8OAAC;oDAAK,WAAU;8DAA6B;;;;;;8DAC7C,8OAAC;oDAAK,WAAU;;wDAA4C;wDACpD,CAAC,QAAQ,UAAU,EAAE,cAAc;;;;;;;;2CAPtC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiBzC;AAEA,MAAM,gBAAgB,CAAC,EAAE,KAAK,EAAE,OAAO,EAAE,SAAS,EAA+I;IAC7L,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAkB;IAC5D,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAA4B;IAC9E,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAS;IACzD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAc,IAAI;IACpE,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAS;IAE7D,cAAc;IACd,MAAM,SAAS,MAAM,aAAa,EAAE;IACpC,MAAM,YAAY,QAAQ,iBAAiB;IAC3C,MAAM,WAAW,iBAAiB;IAElC,kDAAkD;IAClD,MAAM,YAAY,MAAM,aAAa,EAAE,YAAY,IAAI,KAAK,MAAM,aAAa,CAAC,SAAS,EAAE,OAAO,KAAK,KAAK,GAAG;IAC/G,MAAM,iBAAiB,KAAK,KAAK,CAAC,CAAC,KAAK,GAAG,KAAK,SAAS,IAAI;IAC7D,MAAM,eAAe,KAAK,IAAI,CAAC,AAAC,iBAAiB,OAAQ,MAAM,UAAU;IACzE,MAAM,kBAAkB,KAAK,KAAK,CAAC,iBAAiB;IACpD,MAAM,gBAAgB,KAAK,KAAK,CAAC,kBAAkB;IACnD,MAAM,eAAe,kBAAkB;IAEvC,MAAM,YAAY,MAAM,aAAa,EAAE,UAAU,EAAE;IACnD,MAAM,WAAW,UAAU,OAAO,CAAC,CAAC,IAAW,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC,IAAW,CAAC;gBAAE,GAAG,CAAC;gBAAE,SAAS,EAAE,EAAE;YAAC,CAAC;IAE/F,iDAAiD;IACjD,IAAA,kNAAS,EAAC;QACN,MAAM,SAAS,IAAI,IAAI;YAAC;SAAW;QACnC,SAAS,OAAO,CAAC,CAAC,IAAW,OAAO,GAAG,CAAC,CAAC,KAAK,EAAE,EAAE,EAAE,EAAE;QACtD,iBAAiB;IACrB,GAAG;QAAC;KAAM;IAEV,yCAAyC;IACzC,MAAM,iBAAiB;QACnB,IAAI,MAAM;QACV,IAAI,cAAc,QAAQ;YACtB,MAAM,eAAe,SAAS,MAAM,CAAC,CAAC,KAAa,IAAW,MAAO,EAAE,SAAS,GAAG,EAAE,QAAQ,EAAG;QACpG,OAAO;YACH,IAAI,cAAc,GAAG,CAAC,aAAa,OAAO;YAC1C,SAAS,OAAO,CAAC,CAAC;gBACd,IAAI,cAAc,GAAG,CAAC,CAAC,KAAK,EAAE,EAAE,EAAE,EAAE,GAAG,OAAQ,EAAE,SAAS,GAAG,EAAE,QAAQ;YAC3E;QACJ;QACA,OAAO;IACX;IAEA,MAAM,WAAW;IACjB,MAAM,uBAAuB,KAAK,GAAG,CAAC,GAAG,WAAW;IACpD,MAAM,MAAM,KAAK,KAAK,CAAC,uBAAuB,MAAM,UAAU;IAC9D,MAAM,YAAY,uBAAuB;IACzC,MAAM,SAAS,KAAK,GAAG,CAAC,GAAG,eAAe;IAE1C,MAAM,aAAa,CAAC;QAChB,MAAM,SAAS,IAAI,IAAI;QACvB,IAAI,OAAO,GAAG,CAAC,KAAK,OAAO,MAAM,CAAC;aAC7B,OAAO,GAAG,CAAC;QAChB,iBAAiB;IACrB;IAEA,MAAM,cAAc;QAChB,MAAM,eAAe,SAAS,cAAc,CAAC,iBAAiB;QAC9D,MAAM,MAAM,OAAO,IAAI,CAAC,IAAI,IAAI;QAChC,IAAI,OAAO,cAAc;YACrB,IAAI,QAAQ,CAAC,KAAK,CAAC,CAAC,gOAAgO,EAAE,aAAa,cAAc,CAAC;YAClR,IAAI,QAAQ,CAAC,KAAK;YAClB,IAAI,KAAK;QACb;IACJ;IAEA,qBACI,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC;YAAI,WAAU;;8BAGX,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;;sDACG,8OAAC;4CAAG,WAAU;;gDAA+B;gDAAW,MAAM,IAAI;;;;;;;sDAClE,8OAAC;4CAAE,WAAU;sDACR,uBAAS,8OAAC;gDAAK,WAAU;;oDAA4B,OAAO,QAAQ;oDAAC;oDAAG,OAAO,aAAa;oDAAC;;;;;;2FAAe,CAAC,UAAU,EAAE,MAAM,aAAa,EAAE,MAAM,OAAO;;;;;;;;;;;;8CAGpK,8OAAC;oCAAI,WAAU;;sDACX,8OAAC;4CAAO,SAAS,IAAM,aAAa;4CAAS,WAAW,CAAC,2CAA2C,EAAE,cAAc,SAAS,6CAA6C,mCAAmC;sDAAE;;;;;;sDAC/M,8OAAC;4CAAO,SAAS,IAAM,aAAa;4CAAS,WAAW,CAAC,2CAA2C,EAAE,cAAc,SAAS,6CAA6C,mCAAmC;sDAAE;;;;;;;;;;;;;;;;;;sCAIvN,8OAAC;4BAAI,WAAU;4BAA6B,IAAG;;8CAC3C,8OAAC;oCAAI,WAAU;;sDAEX,8OAAC;4CACG,SAAS,IAAM,cAAc,UAAU,WAAW;4CAClD,WAAW,CAAC,gFAAgF,EAAE,cAAc,UAAU,cAAc,GAAG,CAAC,cAAc,+CAA+C,IAAI;;8DAEzM,8OAAC;oDAAI,WAAU;;sEACX,8OAAC;4DAAI,WAAU;sEAA0C,cAAA,8OAAC,6MAAK;gEAAC,MAAM;;;;;;;;;;;sEACtE,8OAAC;;8EACG,8OAAC;oEAAE,WAAU;;wEAAiC;wEAAc;wEAAc;wEAAG;wEAAa;;;;;;;8EAC1F,8OAAC;oEAAE,WAAU;;wEAA0B,MAAM,IAAI;wEAAC;wEAAU,SAAS,MAAM,UAAU,EAAE,cAAc;wEAAG;;;;;;;;;;;;;;;;;;;8DAGhH,8OAAC;oDAAK,WAAU;;wDAAuB;wDAAI,aAAa,cAAc;;;;;;;;;;;;;wCAIzE,SAAS,GAAG,CAAC,CAAC,qBACX,8OAAC;gDAEG,SAAS,IAAM,cAAc,UAAU,WAAW,CAAC,KAAK,EAAE,KAAK,EAAE,EAAE;gDACnE,WAAW,CAAC,gFAAgF,EAAE,cAAc,UAAU,cAAc,GAAG,CAAC,CAAC,KAAK,EAAE,KAAK,EAAE,EAAE,IAAI,+CAA+C,IAAI;;kEAEhN,8OAAC;wDAAI,WAAU;;0EACX,8OAAC;gEAAI,WAAU;0EAA0C,cAAA,8OAAC,gNAAM;oEAAC,MAAM;;;;;;;;;;;0EACvE,8OAAC;;kFACG,8OAAC;wEAAE,WAAU;;4EAAkC,KAAK,QAAQ;4EAAC;4EAAI,KAAK,QAAQ;4EAAC;;;;;;;kFAC/E,8OAAC;wEAAE,WAAU;;4EAAyB;4EAAE,KAAK,SAAS,CAAC,cAAc;;;;;;;;;;;;;;;;;;;kEAG7E,8OAAC;wDAAK,WAAU;;4DAAuB;4DAAI,CAAC,KAAK,SAAS,GAAG,KAAK,QAAQ,EAAE,cAAc;;;;;;;;+CAXrF,KAAK,EAAE;;;;;wCAenB,SAAS,MAAM,KAAK,mBAAK,8OAAC;4CAAE,WAAU;sDAAiD;;;;;;;;;;;;8CAI5F,8OAAC;oCAAI,WAAU;8CACX,cAAA,8OAAC;wCAAI,WAAU;;0DAAiC,8OAAC;0DAAK;;;;;;0DAAY,8OAAC;;oDAAK;oDAAI,UAAU,cAAc;;;;;;;;;;;;;;;;;;;;;;;;sCAI5G,8OAAC;4BAAI,WAAU;;gCAEV,UAAU,cAAc,wBACrB,8OAAC;oCAAI,WAAU;;sDACX,8OAAC;;8DACG,8OAAC;oDAAE,WAAU;;wDAAmC;wDAAmB;wDAAU;;;;;;;8DAC7E,8OAAC;oDAAE,WAAU;8DAA6B;;;;;;;;;;;;sDAE9C,8OAAC;4CAAI,WAAU;;8DACX,8OAAC;oDAAO,SAAS,IAAM,kBAAkB,KAAK,GAAG,CAAC,GAAG,iBAAiB;oDAAK,WAAU;8DAA8D;;;;;;8DACnJ,8OAAC;oDAAK,WAAU;8DAAgD;;;;;;8DAChE,8OAAC;oDAAO,SAAS,IAAM,kBAAkB,KAAK,GAAG,CAAC,WAAW,iBAAiB;oDAAK,WAAU;8DAA8D;;;;;;;;;;;;;;;;;;8CAKvK,8OAAC;oCAAI,WAAU;;sDACX,8OAAC;4CAAK,WAAU;sDAAiB;;;;;;sDACjC,8OAAC;4CAAK,WAAU;;gDAAuB;gDAAI,SAAS,cAAc;;;;;;;;;;;;;gCAErE,WAAW,mBACR,8OAAC;oCAAI,WAAU;;sDACX,8OAAC;4CAAK,WAAU;;gDAAU;gDAAW;gDAAe;;;;;;;sDACpD,8OAAC;4CAAK,WAAU;;gDAAY;gDAAM,SAAS,cAAc;;;;;;;;;;;;;8CAGjE,8OAAC;oCAAI,WAAU;;sDACX,8OAAC;4CAAK,WAAU;sDAAiB;;;;;;sDACjC,8OAAC;4CAAK,WAAU;;gDAAuB;gDAAI,IAAI,cAAc;;;;;;;;;;;;;8CAEjE,8OAAC;oCAAI,WAAU;;sDACX,8OAAC;4CAAK,WAAU;;gDAA+B;gDAAO,cAAc,SAAS,eAAe;;;;;;;sDAC5F,8OAAC;4CAAK,WAAU;;gDAA8C;gDAAI,UAAU,cAAc;;;;;;;;;;;;;;;;;;;;;;;;;8BAMtG,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAI,WAAU;;sDACX,8OAAC;4CAAG,WAAU;sDAA+B;;;;;;sDAC7C,8OAAC;4CAAO,SAAS;4CAAa,WAAU;sDAA2D,cAAA,8OAAC,mNAAO;gDAAC,MAAM;;;;;;;;;;;;;;;;;8CAGtH,8OAAC;oCAAI,WAAU;8CACV;wCAAC;wCAAQ;wCAAQ;qCAAQ,CAAC,GAAG,CAAC,CAAA,kBAC3B,8OAAC;4CAEG,SAAS,IAAM,iBAAiB;4CAChC,WAAW,CAAC;4BACpB,EAAE,kBAAkB,IAAI,oDAAoD,sEAAsE;wBACtJ,CAAC;;gDAEY,MAAM,wBAAU,8OAAC,sNAAQ;oDAAC,MAAM;;;;;;gDAChC,MAAM,wBAAU,8OAAC,oNAAM;oDAAC,MAAM;;;;;;gDAC9B,MAAM,yBAAW,8OAAC,gOAAU;oDAAC,MAAM;;;;;;8DACpC,8OAAC;oDAAK,WAAU;8DAAqB;;;;;;;2CAThC;;;;;;;;;;gCAchB,kBAAkB,wBACf,8OAAC;oCAAI,WAAU;;sDACX,8OAAC;4CAAM,WAAU;sDAAoE;;;;;;sDACrF,8OAAC;4CAAI,WAAU;;8DACX,8OAAC;oDAAK,WAAU;8DAAkE;;;;;;8DAClF,8OAAC;oDACG,MAAK;oDACL,WAAU;oDACV,OAAO,gBAAgB;oDACvB,UAAU,CAAA,IAAK,gBAAgB,OAAO,EAAE,MAAM,CAAC,KAAK;oDACpD,SAAS;;;;;;;;;;;;sDAIjB,8OAAC;4CAAI,WAAU;;gDACV;oDAAC;oDAAO;oDAAQ;iDAAM,CAAC,GAAG,CAAC,CAAA,oBACxB,8OAAC;wDAAiB,SAAS,IAAM,gBAAgB;wDAAM,WAAU;;4DAC5D,MAAM;4DAAK;;uDADH;;;;;8DAIjB,8OAAC;oDAAO,SAAS,IAAM,gBAAgB;oDAAY,WAAU;8DAA4G;;;;;;;;;;;;sDAK7K,8OAAC;4CAAI,WAAU;;8DACX,8OAAC;oDAAK,WAAU;8DAAiB;;;;;;8DACjC,8OAAC;oDAAK,WAAW,CAAC,4BAA4B,EAAE,SAAS,IAAI,iBAAiB,cAAc;;wDAAE;wDACtF,OAAO,cAAc;;;;;;;;;;;;;;;;;;;;;;;;;sCAO7C,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCACG,SAAS;wCACL,kCAAkC;wCAClC,MAAM,aAAa,EAAE;wCACrB,IAAI,cAAc,UAAU,cAAc,GAAG,CAAC,aAAa;4CACvD,WAAW,IAAI,CAAC;gDAAE,MAAM;gDAAc,MAAM;gDAAkB,OAAO,OAAO;gDAAe,KAAK;4CAAE;wCACtG;wCACA,SAAS,OAAO,CAAC,CAAC;4CACd,IAAI,cAAc,UAAU,cAAc,GAAG,CAAC,CAAC,KAAK,EAAE,EAAE,EAAE,EAAE,GAAG;gDAC3D,WAAW,IAAI,CAAC;oDAAE,MAAM;oDAAW,IAAI,EAAE,SAAS;oDAAE,MAAM,EAAE,QAAQ;oDAAE,OAAO,OAAO,EAAE,SAAS;oDAAG,KAAK,EAAE,QAAQ;gDAAC;4CACtH;wCACJ;wCACA,UAAU,eAAe,cAAc,WAAW,YAAY;oCAClE;oCACA,UAAU,kBAAkB,UAAU,eAAe;oCACrD,WAAU;;sDAEV,8OAAC,mNAAO;4CAAC,MAAM;;;;;;wCAAM;;;;;;;8CAGzB,8OAAC;oCAAO,SAAS;oCAAS,WAAU;8CAA+D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM3H;AAEA,MAAM,qBAAqB,CAAC,EAAE,WAAW,EAAE,MAAM,EAAE,OAAO,EAAE,SAAS,EAAmG;IACpK,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAgB;IACpE,MAAM,kBAAkB,OAAO,MAAM,CAAC,CAAA,IAAK,EAAE,MAAM,KAAK,eAAe,EAAE,EAAE,KAAK,YAAY,EAAE;IAE9F,qBACI,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC;YAAI,WAAU;;8BACX,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAG,WAAU;sCAA+B;;;;;;sCAC7C,8OAAC;4BAAO,SAAS;4BAAS,WAAU;sCAAkC,cAAA,8OAAC,iMAAC;gCAAC,MAAM;;;;;;;;;;;;;;;;;8BAGnF,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAE,WAAU;;gCAA8B;8CAAoB,8OAAC;oCAAO,WAAU;8CAAc,YAAY,IAAI;;;;;;gCAAU;;;;;;;sCAEzH,8OAAC;4BAAI,WAAU;;gCACV,gBAAgB,GAAG,CAAC,CAAA,kBACjB,8OAAC;wCAEG,SAAS,IAAM,kBAAkB,EAAE,EAAE;wCACrC,WAAW,CAAC;oCACR,EAAE,mBAAmB,EAAE,EAAE,GAAG,gDAAgD,sEAAsE;gCACtJ,CAAC;;0DAED,8OAAC;gDAAK,WAAU;0DAAmB,EAAE,IAAI;;;;;;0DACzC,8OAAC;gDAAK,WAAU;0DAAsB,EAAE,IAAI;;;;;;;uCAPvC,EAAE,EAAE;;;;;gCAUhB,gBAAgB,MAAM,KAAK,mBACxB,8OAAC;oCAAI,WAAU;8CAAoD;;;;;;;;;;;;sCAM3E,8OAAC;4BACG,SAAS,IAAM,kBAAkB,UAAU;4BAC3C,UAAU,CAAC;4BACX,WAAU;sCACb;;;;;;;;;;;;;;;;;;;;;;;AAOrB;AAEA,MAAM,WAAW,CAAC,EAAE,QAAQ,EAAE,OAAO,EAAE,SAAS,EAAoE;IAChH,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,iNAAQ,EAAC;IAC/B,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IAEnC,MAAM,eAAe,CAAC;QAClB,EAAE,cAAc;QAChB,IAAI,QAAQ,UAAU;YAClB;QACJ,OAAO;YACH,SAAS;YACT,OAAO;QACX;IACJ;IAEA,qBACI,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC;YAAI,WAAU;;8BACX,8OAAC;oBAAG,WAAU;8BAAwC;;;;;;8BACtD,8OAAC;oBAAK,UAAU;oBAAc,WAAU;;sCACpC,8OAAC;4BACG,MAAK;4BACL,WAAW;4BACX,SAAS;4BACT,WAAW,CAAC,oGAAoG,EAAE,QAAQ,mBAAmB,2CAA2C;4BACxL,OAAO;4BACP,UAAU,CAAA;gCAAO,OAAO,EAAE,MAAM,CAAC,KAAK;gCAAG,SAAS;4BAAQ;4BAC1D,aAAY;;;;;;wBAEf,uBAAS,8OAAC;4BAAE,WAAU;sCAAmC;;;;;;sCAC1D,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAO,MAAK;oCAAS,SAAS;oCAAS,WAAU;8CAAuC;;;;;;8CACzF,8OAAC;oCAAO,MAAK;oCAAS,WAAU;8CAAoE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM5H;AAEA,MAAM,uBAAuB,CAAC,EAAE,OAAO,EAA2B;IAC9D,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IAEnC,mDAAmD;IACnD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;QACrC,YAAY;QACZ,gBAAgB;QAChB,gBAAgB;IACpB;IAEA,MAAM,aAAa;QACf,uEAAuE;QACvE,SAAS;QACT,WAAW;YAAQ,SAAS;YAAQ;QAAW,GAAG;IACtD;IAEA,qBACI,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC;YAAI,WAAU;;8BACX,8OAAC;oBAAG,WAAU;;sCAA4D,8OAAC,mNAAO;4BAAC,MAAM;;;;;;wBAAM;;;;;;;8BAE/F,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;;8CACG,8OAAC;oCAAM,WAAU;8CAAwD;;;;;;8CACzE,8OAAC;oCAAM,MAAK;oCAAO,OAAO,SAAS,UAAU;oCAAE,UAAU,CAAA,IAAK,YAAY;4CAAE,GAAG,QAAQ;4CAAE,YAAY,EAAE,MAAM,CAAC,KAAK;wCAAC;oCAAI,WAAU;;;;;;;;;;;;sCAEtI,8OAAC;;8CACG,8OAAC;oCAAM,WAAU;8CAAwD;;;;;;8CACzE,8OAAC;oCAAM,MAAK;oCAAO,OAAO,SAAS,cAAc;oCAAE,UAAU,CAAA,IAAK,YAAY;4CAAE,GAAG,QAAQ;4CAAE,gBAAgB,EAAE,MAAM,CAAC,KAAK;wCAAC;oCAAI,WAAU;;;;;;;;;;;;sCAE9I,8OAAC;;8CACG,8OAAC;oCAAM,WAAU;8CAAwD;;;;;;8CACzE,8OAAC;oCAAM,MAAK;oCAAO,OAAO,SAAS,cAAc;oCAAE,UAAU,CAAA,IAAK,YAAY;4CAAE,GAAG,QAAQ;4CAAE,gBAAgB,EAAE,MAAM,CAAC,KAAK;wCAAC;oCAAI,WAAU;;;;;;;;;;;;;;;;;;8BAIlJ,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAO,SAAS;4BAAS,WAAU;sCAA2F;;;;;;sCAC/H,8OAAC;4BAAO,SAAS;4BAAY,WAAU;sCAClC,QAAQ,WAAW;;;;;;;;;;;;;;;;;;;;;;;AAM5C;AAEA,wBAAwB;AACxB,MAAM,gBAAgB,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,SAAS,EAAqE;IACvH,MAAM,EAAE,MAAM,YAAY,EAAE,GAAG,IAAA,yKAAM,EAAC,iBAAiB;IACvD,MAAM,WAAW,cAAc,QAAQ,EAAE;IACzC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAkD,CAAC;IACnF,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAS;IAC7D,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IAEjD,MAAM,YAAY,CAAC;QACf,QAAQ,CAAA;YACJ,MAAM,WAAW,IAAI,CAAC,QAAQ,EAAE,CAAC;YACjC,OAAO;gBACH,GAAG,IAAI;gBACP,CAAC,QAAQ,EAAE,CAAC,EAAE;oBACV;oBACA,KAAK,WAAW,SAAS,GAAG,GAAG,IAAI;gBACvC;YACJ;QACJ;IACJ;IAEA,MAAM,YAAY,CAAC,IAAY;QAC3B,QAAQ,CAAA;YACJ,MAAM,WAAW,IAAI,CAAC,GAAG;YACzB,IAAI,CAAC,UAAU,OAAO;YACtB,MAAM,SAAS,SAAS,GAAG,GAAG;YAC9B,IAAI,UAAU,GAAG;gBACb,MAAM,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,GAAG,MAAM,GAAG;gBAC7B,OAAO;YACX;YACA,OAAO;gBAAE,GAAG,IAAI;gBAAE,CAAC,GAAG,EAAE;oBAAE,GAAG,QAAQ;oBAAE,KAAK;gBAAO;YAAE;QACzD;IACJ;IAEA,MAAM,YAAY,OAAO,MAAM,CAAC;IAChC,MAAM,QAAQ,UAAU,MAAM,CAAC,CAAC,KAAK,OAAS,MAAO,OAAO,KAAK,OAAO,CAAC,KAAK,IAAI,KAAK,GAAG,EAAG;IAE7F,MAAM,mBAAmB,SAAS,MAAM,CAAC,CAAC,IAAW,mBAAmB,SAAS,EAAE,QAAQ,KAAK;IAEhG,MAAM,kBAAkB,CAAC;QACrB,OAAQ;YACJ,KAAK;gBAAQ,qBAAO,8OAAC,sNAAQ;oBAAC,MAAM;;;;;;YACpC,KAAK;gBAAS,qBAAO,8OAAC,gNAAM;oBAAC,MAAM;;;;;;YACnC,KAAK;gBAAS,qBAAO,8OAAC,gNAAM;oBAAC,MAAM;;;;;;YACnC;gBAAS,qBAAO,8OAAC,gNAAM;oBAAC,MAAM;;;;;;QAClC;IACJ;IAEA,MAAM,eAAe;QACjB,IAAI,UAAU,MAAM,KAAK,GAAG;QAC5B,gBAAgB;QAEhB,IAAI;YACA,MAAM,QAAQ,UAAU,GAAG,CAAC,CAAA,OAAQ,CAAC;oBACjC,IAAI,KAAK,OAAO,CAAC,EAAE;oBACnB,MAAM,KAAK,OAAO,CAAC,IAAI;oBACvB,OAAO,OAAO,KAAK,OAAO,CAAC,KAAK;oBAChC,KAAK,KAAK,GAAG;oBACb,MAAM;gBACV,CAAC;YAED,MAAM,MAAM,MAAM,MAAM,qBAAqB;gBACzC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBACjB;oBACA,eAAe;oBACf;gBACJ;YACJ;YAEA,IAAI,CAAC,IAAI,EAAE,EAAE;gBACT,MAAM,YAAY,MAAM,IAAI,IAAI;gBAChC,MAAM,IAAI,MAAM,UAAU,KAAK,IAAI;YACvC;YACA;QACJ,EAAE,OAAO,OAAY;YACjB,QAAQ,KAAK,CAAC,iBAAiB;YAC/B,MAAM,4BAA4B,CAAC,MAAM,OAAO,IAAI,eAAe;QACvE,SAAU;YACN,gBAAgB;QACpB;IACJ;IAEA,qBACI,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC;YAAI,WAAU;;8BAEX,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAG,WAAU;8CAA+B;;;;;;8CAC7C,8OAAC;oCAAO,SAAS;oCAAS,WAAU;8CAAkC,cAAA,8OAAC,iMAAC;wCAAC,MAAM;;;;;;;;;;;;;;;;;sCAInF,8OAAC;4BAAI,WAAU;sCACV;gCAAC;gCAAO;gCAAQ;gCAAS;6BAAQ,CAAC,GAAG,CAAC,CAAA,oBACnC,8OAAC;oCAEG,SAAS,IAAM,kBAAkB;oCACjC,WAAW,CAAC;oCACR,EAAE,mBAAmB,MAAM,4BAA4B,gDAAgD;8CAE1G;mCALI;;;;;;;;;;sCAWjB,8OAAC;4BAAI,WAAU;sCACV,iBAAiB,GAAG,CAAC,CAAC,kBACnB,8OAAC;oCAEG,SAAS,IAAM,UAAU;oCACzB,WAAU;;sDAEV,8OAAC;4CAAI,WAAU;;8DACX,8OAAC;oDAAI,WAAU;8DACV,gBAAgB,EAAE,QAAQ;;;;;;8DAE/B,8OAAC;oDAAK,WAAU;8DAAkD,EAAE,QAAQ;;;;;;;;;;;;sDAEhF,8OAAC;4CAAG,WAAU;sDAAyE,EAAE,IAAI;;;;;;sDAC7F,8OAAC;4CAAE,WAAU;;gDAAmC;gDAAI,OAAO,EAAE,KAAK,EAAE,cAAc;;;;;;;;mCAX7E,EAAE,EAAE;;;;;;;;;;;;;;;;8BAkBzB,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAI,WAAU;;8CACX,8OAAC,sOAAY;oCAAC,MAAM;oCAAI,WAAU;;;;;;8CAClC,8OAAC;oCAAG,WAAU;;wCAAuB;wCAAY,UAAU,MAAM;wCAAC;;;;;;;;;;;;;sCAGtE,8OAAC;4BAAI,WAAU;sCACV,UAAU,MAAM,KAAK,kBAClB,8OAAC;gCAAE,WAAU;0CAAiD;;;;;2EAE9D,UAAU,GAAG,CAAC,CAAA,qBACV,8OAAC;oCAA0B,WAAU;;sDACjC,8OAAC;4CAAI,WAAU;;8DACX,8OAAC;oDAAK,WAAU;8DAAkD,KAAK,OAAO,CAAC,IAAI;;;;;;8DACnF,8OAAC;oDAAK,WAAU;;wDAAmC;wDAAI,CAAC,OAAO,KAAK,OAAO,CAAC,KAAK,IAAI,KAAK,GAAG,EAAE,cAAc;;;;;;;;;;;;;sDAEjH,8OAAC;4CAAI,WAAU;;8DACX,8OAAC;oDAAO,SAAS,IAAM,UAAU,KAAK,OAAO,CAAC,EAAE,EAAE,CAAC;oDAAI,WAAU;8DAA2D,cAAA,8OAAC,6MAAK;wDAAC,MAAM;;;;;;;;;;;8DACzI,8OAAC;oDAAK,WAAU;8DAAgD,KAAK,GAAG;;;;;;8DACxE,8OAAC;oDAAO,SAAS,IAAM,UAAU,KAAK,OAAO,CAAC,EAAE,EAAE;oDAAI,WAAU;8DAA2D,cAAA,8OAAC,0MAAI;wDAAC,MAAM;;;;;;;;;;;;;;;;;;mCARrI,KAAK,OAAO,CAAC,EAAE;;;;;;;;;;sCAerC,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAI,WAAU;;sDACX,8OAAC;4CAAK,WAAU;sDAAiB;;;;;;sDACjC,8OAAC;4CAAK,WAAU;;gDAA6C;gDAAI,MAAM,cAAc;;;;;;;;;;;;;8CAEzF,8OAAC;oCACG,SAAS;oCACT,UAAU,UAAU,MAAM,KAAK,KAAK;oCACpC,WAAU;8CAET,eAAe,iBAAiB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO7D;AAEe,SAAS;IACpB,MAAM,EAAE,MAAM,UAAU,EAAE,MAAM,EAAE,GAAG,IAAA,yKAAM,EAAC,eAAe,SAAS;QAAE,iBAAiB;IAAK;IAC5F,MAAM,SAAS,YAAY,QAAQ,EAAE;IAErC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAgB;IAC5D,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAkB;IAC1D,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAM;IAC1D,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAS;IACzD,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,iNAAQ,EAAC;IAC7D,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAkB,SAAS,8BAA8B;IAEvG,yBAAyB;IACzB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IAEjD,MAAM,gBAAgB,OAAO,IAAI,CAAC,CAAC,IAAW,EAAE,EAAE,KAAK;IAEvD,MAAM,iBAAiB,CAAC;QACpB,OAAQ;YACJ,KAAK;gBAAa,OAAO;YACzB,KAAK;gBAAU,OAAO;YACtB,KAAK;gBAAU,OAAO;YACtB,KAAK;gBAAY,OAAO;YACxB,KAAK;gBAAe,OAAO;YAC3B;gBAAS,OAAO;QACpB;IACJ;IAEA,MAAM,eAAe,OAAO,QAA0B;QAClD,IAAI,CAAC,YAAY;QACjB,sEAAsE;QACtE,MAAM,YAAY,gBAAgB,YAAY,gBAAgB;QAC9D,MAAM,OAAO,WAAW,UAAU;YAC9B,cAAc,aAAa;YAC3B,UAAU,gBAAgB;YAC1B,aAAa,eAAe;YAC5B,YAAY,OAAO,gBAAgB,WAAW,cAAc;QAChE,IAAI,CAAC;QAEL,MAAM,MAAM,CAAC,YAAY,EAAE,WAAW,CAAC,EAAE,QAAQ,EAAE;YAC/C,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;QACzB;QACA,kBAAkB;QAClB,gBAAgB,KAAK,oBAAoB;QACzC;IACJ;IAEA,qBACI,8OAAC;QAAI,WAAU;;YAEV,sBAAsB,+BACnB,8OAAC;gBACG,YAAY,cAAc,UAAU,IAAI;gBACxC,SAAS,IAAM,sBAAsB;gBACrC,UAAU,CAAC;oBACP,eAAe;oBACf,aAAa,SAAS;oBACtB,sBAAsB;gBAC1B;;;;;;0BAKR,8OAAC;gBAAK,WAAU;;kCAEZ,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCAAI,WAAU;;0DACX,8OAAC;gDAAG,WAAU;0DAA+B;;;;;;0DAC7C,8OAAC;gDAAO,SAAS,IAAM,WAAW;gDAAO,WAAU;0DAAmI,cAAA,8OAAC,sNAAQ;oDAAC,MAAM;;;;;;;;;;;;;;;;;kDAE1M,8OAAC;wCAAI,WAAU;;0DACX,8OAAC;gDAAI,WAAU;;;;;;4CAAyC;0DACxD,8OAAC;gDAAI,WAAU;;;;;;4CAA8C;0DAC7D,8OAAC;gDAAI,WAAU;;;;;;4CAA8C;;;;;;;;;;;;;0CAGrE,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCACG,SAAS,IAAM,YAAY;wCAC3B,WAAW,CAAC;oCACJ,EAAE,aAAa,SAAS,gDAAgD,oEAAoE;gCAChJ,CAAC;;0DAEL,8OAAC,gOAAU;gDAAC,MAAM;;;;;;4CAAM;;;;;;;kDAE5B,8OAAC;wCACG,SAAS,IAAM,YAAY;wCAC3B,WAAW,CAAC;oCACJ,EAAE,aAAa,SAAS,gDAAgD,oEAAoE;gCAChJ,CAAC;;0DAEL,8OAAC,0MAAI;gDAAC,MAAM;;;;;;4CAAM;;;;;;;;;;;;;;;;;;;kCAM9B,8OAAC;wBAAI,WAAU;kCACV,aAAa,uBACV,8OAAC;4BAAI,WAAU;sCACV,OAAO,GAAG,CAAC,CAAC,sBACT,8OAAC;oCAEG,SAAS,IAAM,cAAc,MAAM,EAAE;oCACrC,WAAW,CAAC;0BACtB,EAAE,eAAe,MAAM,MAAM,EAAE;0BAC/B,EAAE,eAAe,MAAM,EAAE,GAAG,0DAA0D,GAAG;wBAC3F,CAAC;;sDAGW,8OAAC;4CAAI,WAAU;;8DACX,8OAAC;oDAAI,WAAU;;sEACX,8OAAC;4DAAK,WAAU;sEAAkC,MAAM,IAAI;;;;;;sEAC5D,8OAAC;4DAAK,WAAU;sEAAkE;;;;;;;;;;;;gDAErF,MAAM,MAAM,KAAK,0BAAY,8OAAC;oDAAI,WAAU;;;;;;;;;;;;sDAIjD,8OAAC;4CAAI,WAAU;sDACV,MAAM,MAAM,KAAK,YAAY,MAAM,aAAa,iBAC7C,8OAAC;gDACG,WAAW,MAAM,aAAa,CAAC,SAAS;gDACxC,SAAS,MAAM,aAAa,CAAC,OAAO;gDACpC,YAAY,MAAM,UAAU,IAAI;gDAChC,UAAU,MAAM,aAAa,CAAC,MAAM,KAAK;gDACzC,WAAW;oDACP,IAAI,eAAe,MAAM,EAAE,EAAE;wDACzB,MAAM;oDACV;gDACJ;gDACA,UAAU;oDACN,IAAI,eAAe,MAAM,EAAE,IAAI,CAAC,YAAY;wDACxC,cAAc,MAAM,EAAE;wDACtB,gBAAgB;oDACpB;gDACJ;;;;;qEAGJ,8OAAC;gDAAI,WAAU;;kEACX,8OAAC;wDAAI,WAAU;kEACX,cAAA,8OAAC,0MAAI;4DAAC,MAAM;;;;;;;;;;;kEAEhB,8OAAC;wDAAK,WAAU;kEAAuB,MAAM,MAAM;;;;;;;;;;;;;;;;;sDAM/D,8OAAC;4CAAI,WAAU;;8DACX,8OAAC;oDAAI,WAAU;;sEACX,8OAAC,6MAAK;4DAAC,MAAM;;;;;;sEACb,8OAAC;4DAAK,WAAU;sEAAwB,MAAM,aAAa,EAAE,gBAAgB;;;;;;;;;;;;gDAEhF,MAAM,aAAa,kBAChB,8OAAC;oDAAI,WAAU;;sEACX,8OAAC,6MAAK;4DAAC,MAAM;;;;;;sEACb,8OAAC;4DAAK,WAAU;sEACX,IAAI,KAAK,MAAM,aAAa,CAAC,SAAS,EAAE,kBAAkB,CAAC,EAAE,EAAE;gEAAE,MAAM;gEAAW,QAAQ;4DAAU;;;;;;;;;;;;;;;;;;;mCAxDhH,MAAM,EAAE;;;;;;;;;iDAiEzB,8OAAC;4BAAI,WAAU;sCACV,OAAO,GAAG,CAAC,CAAC,sBACT,8OAAC;oCAEG,SAAS,IAAM,cAAc,MAAM,EAAE;oCACrC,WAAW,CAAC;4CACJ,EAAE,eAAe,MAAM,EAAE,GAAG,kCAAkC,gCAAgC;wCAClG,CAAC;;sDAEL,8OAAC;4CAAI,WAAU;;8DACX,8OAAC;oDAAI,WAAW,CAAC,oBAAoB,EAAE,MAAM,MAAM,KAAK,WAAW,+BAC/D,MAAM,MAAM,KAAK,WAAW,iBACxB,MAAM,MAAM,KAAK,gBAAgB,iBAAiB,gBACpD;;;;;;8DACN,8OAAC;;sEACG,8OAAC;4DAAG,WAAU;sEAAgC,MAAM,IAAI;;;;;;sEACxD,8OAAC;4DAAE,WAAU;sEAAyB;;;;;;;;;;;;;;;;;;sDAI9C,8OAAC;4CAAI,WAAU;;gDACV,MAAM,MAAM,KAAK,YAAY,MAAM,aAAa,kBAC7C,8OAAC;oDACG,WAAW,MAAM,aAAa,CAAC,SAAS;oDACxC,YAAY,MAAM,UAAU,IAAI;;;;;;8DAGxC,8OAAC;oDAAI,WAAU;;sEACX,8OAAC,6MAAK;4DAAC,MAAM;;;;;;sEACb,8OAAC;4DAAK,WAAU;sEAAuB,MAAM,aAAa,EAAE,gBAAgB;;;;;;;;;;;;;;;;;;;mCA1B/E,MAAM,EAAE;;;;;;;;;;;;;;;;;;;;;0BAqCrC,8OAAC;gBAAM,WAAU;0BACZ,gBACG,qBAAqB;8BACrB;;sCACI,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAI,WAAU;;sDACX,8OAAC;;8DACG,8OAAC;oDAAG,WAAU;8DAAiC,cAAc,IAAI;;;;;;8DACjE,8OAAC;oDAAE,WAAU;8DAAyB;;;;;;;;;;;;sDAE1C,8OAAC;4CAAO,SAAS,IAAM,cAAc;4CAAO,WAAU;sDAAkC,cAAA,8OAAC,iMAAC;gDAAC,MAAM;;;;;;;;;;;;;;;;;8CAErG,8OAAC;oCAAI,WAAU;;sDACX,8OAAC;4CAAI,WAAW,CAAC,2CAA2C,EAAE,eAAe,cAAc,MAAM,EAAE,cAAc,CAAC;sDAC7G,cAAc,MAAM;;;;;;wCAExB,cAAc,MAAM,KAAK,0BAAY,8OAAC;4CAAK,WAAU;sDAA6C;;;;;;;;;;;;;;;;;;sCAI3G,8OAAC;4BAAI,WAAU;;gCAEV,cAAc,MAAM,KAAK,6BACtB,8OAAC;oCAAI,WAAU;;sDACX,8OAAC;4CAAM,WAAU;sDAAwD;;;;;;sDACzE,8OAAC;4CAAI,WAAU;;8DACX,8OAAC;oDACG,MAAK;oDACL,aAAY;oDACZ,OAAO,gBAAgB,YAAY;oDACnC,WAAU;oDACV,UAAU,OAAO;wDACb,MAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;wDAC5B,gBAAgB;wDAChB,kBAAkB;wDAElB,+BAA+B;wDAC/B,IAAI,MAAM,MAAM,GAAG,GAAG;4DAClB,MAAM,UAAU,MAAM,aAAa;4DACnC,IAAI,QAAQ,MAAM,GAAG,GAAG,kBAAkB,OAAO,CAAC,EAAE;wDACxD;oDACJ;;;;;;gDAEH,gCACG,8OAAC;oDAAI,WAAU;;sEACX,8OAAC,6MAAK;4DAAC,MAAM;;;;;;wDAAM;;;;;;;;;;;;;;;;;;;8CAOvC,8OAAC;oCAAI,WAAU;;sDACX,8OAAC;4CACG,SAAS,IAAM,sBAAsB;4CACrC,UAAU,cAAc,MAAM,KAAK;4CACnC,WAAU;;8DAEV,8OAAC,0MAAI;oDAAC,MAAM;oDAAI,WAAU;;;;;;8DAC1B,8OAAC;oDAAK,WAAU;8DAAqC;;;;;;;;;;;;sDAEzD,8OAAC;4CACG,SAAS;gDACL,IAAI,CAAC,YAAY;gDACjB,MAAM,MAAM,CAAC,YAAY,EAAE,WAAW,MAAM,CAAC,EAAE;oDAAE,QAAQ;gDAAO;gDAChE;4CACJ;4CACA,UAAU,cAAc,MAAM,KAAK,YAAY,cAAc,MAAM,KAAK;4CACxE,WAAU;;8DAEV,8OAAC,6MAAK;oDAAC,MAAM;oDAAI,WAAU;;;;;;8DAC3B,8OAAC;oDAAK,WAAU;8DACX,cAAc,aAAa,EAAE,WAAW,WAAW,WAAW;;;;;;;;;;;;sDAGvE,8OAAC;4CACG,SAAS;gDACL,IAAI,CAAC,cAAc,aAAa,EAAE;gDAClC,kCAAkC;gDAClC,gBAAgB;4CACpB;4CACA,UAAU,cAAc,MAAM,KAAK;4CACnC,WAAU;;8DAEV,8OAAC,gNAAM;oDAAC,MAAM;oDAAI,WAAU;;;;;;8DAC5B,8OAAC;oDAAK,WAAU;8DAAqC;;;;;;;;;;;;;;;;;;8CAI7D,8OAAC;oCACG,SAAS,IAAM,gBAAgB;oCAC/B,WAAU;;sDAEV,8OAAC,gPAAc;4CAAC,MAAM;;;;;;sDACtB,8OAAC;4CAAK,WAAU;sDAAsB;;;;;;;;;;;;8CAG1C,8OAAC;oCAAG,WAAU;8CAAiE;;;;;;8CAC/E,8OAAC;oCAAI,WAAU;8CACX,cAAA,8OAAC;wCACG,SAAS,IAAM,gBAAgB;wCAC/B,UAAU,cAAc,MAAM,KAAK;wCACnC,WAAU;kDAEV,cAAA,8OAAC;4CAAI,WAAU;;8DACX,8OAAC;oDAAI,WAAU;8DAA6C,cAAA,8OAAC,gNAAM;wDAAC,MAAM;;;;;;;;;;;8DAC1E,8OAAC;oDAAK,WAAU;8DAA4D;;;;;;;;;;;;;;;;;;;;;;8CAKxF,8OAAC;oCACG,SAAS,IAAM,gBAAgB;oCAC/B,UAAU,cAAc,MAAM,KAAK;oCACnC,WAAU;;sDAEV,8OAAC,mNAAO;4CAAC,MAAM;;;;;;wCAAM;;;;;;;gCAIxB,cAAc,MAAM,KAAK,YAAY,cAAc,aAAa,kBAC7D,8OAAC;oCAAI,WAAU;8CACX,cAAA,8OAAC;wCAAI,WAAU;;0DACX,8OAAC;gDAAK,WAAU;0DAAuB;;;;;;0DACvC,8OAAC;gDACG,WAAW,cAAc,aAAa,CAAC,SAAS;gDAChD,YAAY,cAAc,UAAU,IAAI;;;;;;;;;;;;;;;;;;;;;;;;mCAQhE,sCAAsC;8BACtC,8OAAC;;;;;;;;;;YAIR,gBAAgB,+BACb,8OAAC;gBACG,OAAO;gBACP,SAAS,IAAM,gBAAgB;gBAC/B,WAAW,OAAO,QAAQ,MAAM,OAAO;oBACnC,IAAI;wBACA,gDAAgD;wBAChD,MAAM,UAAU,MAAM,MAAM,CAAC,YAAY,EAAE,cAAc,EAAE,CAAC,KAAK,CAAC,EAAE;4BAAE,QAAQ;wBAAO;wBACrF,MAAM,WAAW,MAAM,QAAQ,IAAI;wBAEnC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,OAAO,EAAE;4BAClC,MAAM,IAAI,MAAM,SAAS,KAAK,IAAI;wBACtC;wBAEA,MAAM,YAAY,SAAS,IAAI,EAAE;wBAEjC,wCAAwC;wBACxC,MAAM,WAAW,MAAM,MAAM,qBAAqB;4BAC9C,QAAQ;4BACR,SAAS;gCAAE,gBAAgB;4BAAmB;4BAC9C,MAAM,KAAK,SAAS,CAAC;gCACjB;gCACA,eAAe;gCACf,OAAO,MAAM,0CAA0C;4BAC3D;wBACJ;wBAEA,MAAM,YAAY,MAAM,SAAS,IAAI;wBACrC,QAAQ,GAAG,CAAC,yBAAyB,YAAY,QAAQ;wBAEzD,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,UAAU,OAAO,EAAE;4BACpC,8BAA8B;4BAC9B,MAAM,SAAS,UAAU,OAAO,GAC1B,KAAK,SAAS,CAAC,UAAU,OAAO,IAChC,UAAU,KAAK,IAAI;4BACzB,MAAM,IAAI,MAAM;wBACpB;wBAEA,MAAM;wBACN,gBAAgB;wBAChB,cAAc;wBACd,MAAM,CAAC,uBAAuB,EAAE,MAAM,cAAc,GAAG,gBAAgB,CAAC;oBAC5E,EAAE,OAAO,GAAQ;wBACb,QAAQ,KAAK,CAAC,mBAAmB;wBACjC,MAAM,EAAE,OAAO,IAAI;oBACvB;gBACJ;;;;;;YAIP,gBAAgB,+BACb,8OAAC;gBACG,aAAa;gBACb,QAAQ;gBACR,SAAS,IAAM,gBAAgB;gBAC/B,WAAW,OAAO;oBACd,IAAI;wBACA,MAAM,MAAM,MAAM,MAAM,wBAAwB;4BAC5C,QAAQ;4BACR,SAAS;gCAAE,gBAAgB;4BAAmB;4BAC9C,MAAM,KAAK,SAAS,CAAC;gCAAE,aAAa,cAAc,EAAE;gCAAE,WAAW;4BAAS;wBAC9E;wBAEA,IAAI,CAAC,IAAI,EAAE,EAAE;4BACT,MAAM,MAAM,MAAM,IAAI,IAAI;4BAC1B,MAAM,IAAI,KAAK,IAAI;4BACnB;wBACJ;wBAEA,MAAM,UAAU,eAAe;wBAC/B,gBAAgB;wBAChB,cAAc;oBAClB,EAAE,OAAO,GAAG;wBACR,QAAQ,KAAK,CAAC,mBAAmB;wBACjC,MAAM;oBACV;gBACJ;;;;;;YAIP,yBACG,8OAAC;gBACG,UAAS;gBACT,SAAS,IAAM,WAAW;gBAC1B,WAAW;oBAAQ,WAAW;oBAAQ,gBAAgB;gBAAO;;;;;;YAGpE,8BAAgB,8OAAC;gBAAqB,SAAS,IAAM,gBAAgB;;;;;;YAErE,gBAAgB,eAAe,+BAC5B,8OAAC;gBACG,WAAW,cAAc,aAAa,CAAC,EAAE;gBACzC,SAAS,IAAM,gBAAgB;gBAC/B,WAAW;oBAAQ,gBAAgB;oBAAQ;gBAAU;;;;;;;;;;;;AAKzE"}}]
}