(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78894,e=>{"use strict";let s=(0,e.i(75254).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>s],78894)},3281,e=>{"use strict";let s=(0,e.i(75254).default)("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);e.s(["Printer",()=>s],3281)},72520,e=>{"use strict";let s=(0,e.i(75254).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>s],72520)},45759,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(83599),l=e.i(78894),i=e.i(3281),n=e.i(72520);let r=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),d=e=>fetch(e).then(e=>e.json());function c(){let{data:e,mutate:c}=(0,a.default)("/api/reports/shift",d),o=e?.data,[x,h]=(0,t.useState)(1),[m,b]=(0,t.useState)(0),[p,j]=(0,t.useState)(""),[u,f]=(0,t.useState)(!1);if(!e)return(0,s.jsx)("div",{className:"p-10 text-slate-500",children:"Loading Report Module..."});let N=!!o,g=o?Number(o.openingCash)+Number(o.cashSales):0,v=m-g,y=async()=>{f(!0);try{if(!(await fetch("/api/reports/shift/close",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shiftId:o.shiftId,actualCash:m,varianceReason:p})})).ok)throw Error("Failed to close shift");h(4),c()}catch(e){alert("Error closing shift"),console.error(e)}finally{f(!1)}};return(0,s.jsxs)("div",{className:"flex min-h-screen bg-[#050a07]",children:[(0,s.jsxs)("div",{className:"w-64 bg-[#0f1a14] border-r border-[#1e3328] p-6 hidden md:block print:hidden",children:[(0,s.jsx)("h1",{className:"text-xl font-bold text-[#22c55e] mb-8",children:"BilliardPOS"}),(0,s.jsxs)("nav",{className:"space-y-2",children:[(0,s.jsx)("a",{href:"/dashboard",className:"block p-3 rounded text-slate-400 hover:text-white hover:bg-[#1e3328]",children:"Dashboard"}),(0,s.jsx)("a",{href:"/reports",className:"block p-3 rounded bg-[#22c55e]/10 text-[#22c55e] font-bold",children:"Reports"})]})]}),(0,s.jsx)("main",{className:"flex-1 p-8",children:N||4===x?(0,s.jsxs)("div",{className:"max-w-3xl mx-auto",children:[4!==x&&(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8 print:hidden",children:[(0,s.jsxs)("div",{className:`flex items-center gap-2 ${x>=1?"text-[#22c55e]":"text-slate-600"}`,children:[(0,s.jsx)("div",{className:"size-8 rounded-full border-2 flex items-center justify-center font-bold border-current",children:"1"}),(0,s.jsx)("span",{className:"font-bold hidden sm:inline",children:"Overview"})]}),(0,s.jsx)("div",{className:"h-0.5 flex-1 bg-[#1e3328] mx-4"}),(0,s.jsxs)("div",{className:`flex items-center gap-2 ${x>=2?"text-[#eab308]":"text-slate-600"}`,children:[(0,s.jsx)("div",{className:"size-8 rounded-full border-2 flex items-center justify-center font-bold border-current",children:"2"}),(0,s.jsx)("span",{className:"font-bold hidden sm:inline",children:"Cash Count"})]}),(0,s.jsx)("div",{className:"h-0.5 flex-1 bg-[#1e3328] mx-4"}),(0,s.jsxs)("div",{className:`flex items-center gap-2 ${x>=3?"text-white":"text-slate-600"}`,children:[(0,s.jsx)("div",{className:"size-8 rounded-full border-2 flex items-center justify-center font-bold border-current",children:"3"}),(0,s.jsx)("span",{className:"font-bold hidden sm:inline",children:"Review"})]})]}),1===x&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-[#16261d] p-6 rounded-xl border border-[#1e3328]",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"Ringkasan Shift Berjalan"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-slate-400 text-sm",children:"Shift ID"}),(0,s.jsxs)("p",{className:"text-white font-mono",children:["#",o?.shiftId]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-slate-400 text-sm",children:"Dibuka"}),(0,s.jsx)("p",{className:"text-white font-mono",children:new Date(o?.openedAt).toLocaleTimeString()})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-slate-400 text-sm",children:"Kas Awal"}),(0,s.jsxs)("p",{className:"text-white font-mono",children:["Rp ",Number(o?.openingCash).toLocaleString()]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-slate-400 text-sm",children:"Penjualan Tunai (Sistem)"}),(0,s.jsxs)("p",{className:"text-[#22c55e] font-bold font-mono",children:["Rp ",Number(o?.cashSales).toLocaleString()]})]})]})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsxs)("button",{onClick:()=>h(2),className:"bg-[#22c55e] hover:bg-[#16a34a] text-black px-6 py-3 rounded-lg font-bold flex items-center gap-2",children:["Mulai Tutup Shift ",(0,s.jsx)(n.ArrowRight,{size:20})]})})]}),2===x&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-[#16261d] p-6 rounded-xl border border-[#1e3328]",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:"Hitung Uang Fisik (Cash Count)"}),(0,s.jsx)("p",{className:"text-slate-400 text-sm mb-6",children:"Silakan hitung total uang tunai yang ada di laci kasir saat ini."}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-slate-500 text-xs font-bold uppercase mb-2",children:"Total Uang di Laci"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 font-bold",children:"Rp"}),(0,s.jsx)("input",{type:"number",autoFocus:!0,className:"w-full bg-black border border-[#1e3328] rounded-lg py-4 pl-12 pr-4 text-3xl text-white font-mono focus:border-[#22c55e] outline-none",value:m||"",onChange:e=>b(Number(e.target.value))})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("button",{onClick:()=>h(1),className:"text-slate-400 hover:text-white font-medium",children:"Kembali"}),(0,s.jsxs)("button",{onClick:()=>h(3),disabled:m<=0,className:"bg-[#eab308] hover:bg-yellow-500 text-black px-6 py-3 rounded-lg font-bold flex items-center gap-2 disabled:opacity-50",children:["Lanjut: Review Selisih ",(0,s.jsx)(n.ArrowRight,{size:20})]})]})]}),3===x&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-[#16261d] p-6 rounded-xl border border-[#1e3328]",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-white mb-6",children:"Review & Validasi"}),(0,s.jsxs)("div",{className:"bg-[#050a07] border border-[#1e3328] rounded-lg p-4 space-y-3 mb-6",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-slate-400",children:"Total System (Start + Sales)"}),(0,s.jsxs)("span",{className:"text-white font-mono",children:["Rp ",g.toLocaleString()]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-slate-400",children:"Actual Cash (Input)"}),(0,s.jsxs)("span",{className:"text-white font-mono",children:["Rp ",m.toLocaleString()]})]}),(0,s.jsx)("div",{className:"h-px bg-[#1e3328] my-2"}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-lg font-bold text-white",children:"Variance (Selisih)"}),(0,s.jsxs)("span",{className:`text-xl font-bold font-mono ${0===v?"text-[#22c55e]":"text-red-500"}`,children:[v>0?"+":"","Rp ",v.toLocaleString()]})]})]}),0!==v&&(0,s.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 p-4 rounded-lg mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-red-500 mb-2 font-bold",children:[(0,s.jsx)(l.AlertTriangle,{size:20}),(0,s.jsx)("span",{children:"Terjadi Selisih!"})]}),(0,s.jsx)("p",{className:"text-sm text-slate-300 mb-3",children:"Mohon berikan alasan untuk selisih ini sebelum menutup shift."}),(0,s.jsx)("textarea",{className:"w-full bg-black/50 border border-red-500/30 rounded p-3 text-white text-sm focus:border-red-500 outline-none",placeholder:"Contoh: Salah kembalian, uang hilang, dll...",rows:3,value:p,onChange:e=>j(e.target.value)})]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("button",{onClick:()=>h(2),className:"text-slate-400 hover:text-white font-medium",children:"Kembali Hitung"}),(0,s.jsxs)("button",{onClick:y,disabled:0!==v&&p.length<5||u,className:"bg-[#22c55e] hover:bg-[#16a34a] text-black px-6 py-3 rounded-lg font-bold flex items-center gap-2 disabled:opacity-50",children:[u?"Memproses...":"Konfirmasi & Tutup Shift"," ",(0,s.jsx)(r,{size:20})]})]})]}),4===x&&(0,s.jsxs)("div",{className:"text-center py-10",children:[(0,s.jsx)("div",{className:"size-20 bg-[#22c55e]/20 text-[#22c55e] rounded-full flex items-center justify-center mx-auto mb-6",children:(0,s.jsx)(r,{size:48})}),(0,s.jsx)("h2",{className:"text-3xl font-bold text-white mb-2",children:"Shift Berhasil Ditutup!"}),(0,s.jsx)("p",{className:"text-slate-400 mb-8 max-w-md mx-auto",children:"Laporan Z-Report telah dibuat. Silakan cetak laporan ini untuk arsip fisik."}),(0,s.jsxs)("div",{className:"flex justify-center gap-4 print:hidden",children:[(0,s.jsxs)("button",{onClick:()=>{window.print()},className:"bg-[#eab308] hover:bg-yellow-500 text-black px-6 py-3 rounded-lg font-bold flex items-center gap-2 shadow-lg shadow-yellow-500/20",children:[(0,s.jsx)(i.Printer,{size:20})," Cetak Z-Report"]}),(0,s.jsx)("a",{href:"/dashboard",className:"bg-[#1e3328] hover:bg-[#22c55e] hover:text-black text-white px-6 py-3 rounded-lg font-bold flex items-center gap-2",children:"Kembali ke Dashboard"})]}),(0,s.jsxs)("div",{className:"hidden print:block mt-10 text-left border p-4 font-mono text-black",children:[(0,s.jsx)("h1",{className:"text-center font-bold text-xl border-b pb-2 mb-4",children:"Z-REPORT"}),(0,s.jsxs)("p",{children:["Shift ID: #",o?.shiftId]}),(0,s.jsxs)("p",{children:["Date: ",new Date().toLocaleDateString()]}),(0,s.jsx)("hr",{className:"my-2"}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Opening"}),(0,s.jsx)("span",{children:Number(o?.openingCash).toLocaleString()})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Sales (Cash)"}),(0,s.jsx)("span",{children:Number(o?.cashSales).toLocaleString()})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Total Expected"}),(0,s.jsx)("span",{children:g.toLocaleString()})]}),(0,s.jsx)("hr",{className:"my-2"}),(0,s.jsxs)("div",{className:"flex justify-between font-bold",children:[(0,s.jsx)("span",{children:"ACTUAL COUNT"}),(0,s.jsx)("span",{children:m.toLocaleString()})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Variance"}),(0,s.jsx)("span",{children:v.toLocaleString()})]}),p&&(0,s.jsxs)("p",{className:"mt-2 text-xs italic",children:["Note: ",p]}),(0,s.jsx)("hr",{className:"my-4"}),(0,s.jsx)("p",{className:"text-center text-xs",children:"** END OF REPORT **"}),(0,s.jsx)("p",{className:"text-center text-xs",children:new Date().toLocaleString()})]})]})]}):(0,s.jsx)("div",{className:"flex h-full items-center justify-center text-slate-500",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(l.AlertTriangle,{size:48,className:"mx-auto mb-4 opacity-50"}),(0,s.jsx)("h2",{className:"text-xl font-bold",children:"Tidak ada Shift Aktif"}),(0,s.jsx)("p",{children:"Buka shift baru dari Dashboard untuk memulai."}),(0,s.jsx)("a",{href:"/dashboard",className:"text-[#22c55e] hover:underline mt-4 block",children:"Kembali ke Dashboard"})]})})})]})}e.s(["default",()=>c],45759)}]);