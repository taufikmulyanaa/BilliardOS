{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Lenovo/Documents/BilliardOS/app/src/components/auth-provider.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { createContext, useContext, useEffect, useState } from 'react';\r\nimport useSWR from 'swr';\r\nimport { useRouter, usePathname } from 'next/navigation';\r\n\r\ninterface User {\r\n    id: number;\r\n    username: string;\r\n    role: string;\r\n    fullName: string;\r\n}\r\n\r\ninterface AuthContextType {\r\n    user: User | null;\r\n    loading: boolean;\r\n    login: (data: any) => Promise<void>;\r\n    logout: () => Promise<void>;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType>({\r\n    user: null,\r\n    loading: true,\r\n    login: async () => { },\r\n    logout: async () => { },\r\n});\r\n\r\nconst fetcher = (url: string) => fetch(url).then((res) => res.json());\r\n\r\nexport const AuthProvider = ({ children }: { children: React.ReactNode }) => {\r\n    const { data, error, mutate } = useSWR('/api/auth/me', fetcher, {\r\n        shouldRetryOnError: false,\r\n        revalidateOnFocus: false,\r\n    });\r\n\r\n    const router = useRouter();\r\n    const pathname = usePathname();\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if (data !== undefined || error) {\r\n            setLoading(false);\r\n        }\r\n    }, [data, error]);\r\n\r\n    useEffect(() => {\r\n        if (!loading && !data?.user && pathname !== '/login') {\r\n            router.push('/login');\r\n        }\r\n        if (!loading && data?.user && pathname === '/login') {\r\n            router.push('/dashboard');\r\n        }\r\n    }, [data, loading, pathname, router]);\r\n\r\n    const login = async (credentials: any) => {\r\n        const res = await fetch('/api/auth/login', {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify(credentials),\r\n        });\r\n\r\n        if (res.ok) {\r\n            mutate(); // Revalidate user\r\n            router.push('/dashboard');\r\n        } else {\r\n            throw await res.json();\r\n        }\r\n    };\r\n\r\n    const logout = async () => {\r\n        await fetch('/api/auth/logout', { method: 'POST' });\r\n        mutate(null, false); // Clear user data\r\n        router.push('/login');\r\n    };\r\n\r\n    return (\r\n        <AuthContext.Provider value={{ user: data?.user || null, loading, login, logout }}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useAuth = () => useContext(AuthContext);\r\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;;;AAJA;;;;AAoBA,MAAM,4BAAc,IAAA,8KAAa,EAAkB;IAC/C,MAAM;IACN,SAAS;IACT,OAAO,WAAc;IACrB,QAAQ,WAAc;AAC1B;AAEA,MAAM,UAAU,CAAC,MAAgB,MAAM,KAAK,IAAI,CAAC,CAAC,MAAQ,IAAI,IAAI;AAE3D,MAAM,eAAe,CAAC,EAAE,QAAQ,EAAiC;;IACpE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,IAAA,4KAAM,EAAC,gBAAgB,SAAS;QAC5D,oBAAoB;QACpB,mBAAmB;IACvB;IAEA,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,WAAW,IAAA,oJAAW;IAC5B,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;kCAAC;YACN,IAAI,SAAS,aAAa,OAAO;gBAC7B,WAAW;YACf;QACJ;iCAAG;QAAC;QAAM;KAAM;IAEhB,IAAA,0KAAS;kCAAC;YACN,IAAI,CAAC,WAAW,CAAC,MAAM,QAAQ,aAAa,UAAU;gBAClD,OAAO,IAAI,CAAC;YAChB;YACA,IAAI,CAAC,WAAW,MAAM,QAAQ,aAAa,UAAU;gBACjD,OAAO,IAAI,CAAC;YAChB;QACJ;iCAAG;QAAC;QAAM;QAAS;QAAU;KAAO;IAEpC,MAAM,QAAQ,OAAO;QACjB,MAAM,MAAM,MAAM,MAAM,mBAAmB;YACvC,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;QACzB;QAEA,IAAI,IAAI,EAAE,EAAE;YACR,UAAU,kBAAkB;YAC5B,OAAO,IAAI,CAAC;QAChB,OAAO;YACH,MAAM,MAAM,IAAI,IAAI;QACxB;IACJ;IAEA,MAAM,SAAS;QACX,MAAM,MAAM,oBAAoB;YAAE,QAAQ;QAAO;QACjD,OAAO,MAAM,QAAQ,kBAAkB;QACvC,OAAO,IAAI,CAAC;IAChB;IAEA,qBACI,6LAAC,YAAY,QAAQ;QAAC,OAAO;YAAE,MAAM,MAAM,QAAQ;YAAM;YAAS;YAAO;QAAO;kBAC3E;;;;;;AAGb;GAnDa;;QACuB,4KAAM;QAKvB,kJAAS;QACP,oJAAW;;;KAPnB;AAqDN,MAAM,UAAU;;IAAM,OAAA,IAAA,2KAAU,EAAC;AAAW;IAAtC"}},
    {"offset": {"line": 119, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Lenovo/Documents/BilliardOS/app/src/components/sidebar.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport Link from 'next/link';\r\nimport { usePathname } from 'next/navigation';\r\nimport {\r\n    Gamepad2, LayoutGrid, Users, Calendar,\r\n    ShoppingBag, FileText, LogOut, Settings\r\n} from 'lucide-react';\r\nimport { useAuth } from './auth-provider';\r\n\r\nexport function Sidebar() {\r\n    const pathname = usePathname();\r\n    const { logout } = useAuth();\r\n\r\n    const menuItems = [\r\n        { label: 'Dashboard', icon: LayoutGrid, path: '/dashboard' },\r\n        { label: 'Meja & Billing', icon: Gamepad2, path: '/tables' },\r\n        { label: 'Membership', icon: Users, path: '/members' },\r\n        { label: 'POS & Menu', icon: ShoppingBag, path: '/pos' },\r\n        { label: 'Reservasi', icon: Calendar, path: '/reservations' },\r\n        { label: 'Laporan', icon: FileText, path: '/reports' },\r\n    ];\r\n\r\n    return (\r\n        <aside className=\"w-64 bg-[#0f1a14] border-r border-[#1e3328] flex flex-col shrink-0 z-20 h-screen\">\r\n            {/* Brand */}\r\n            <div className=\"p-6 border-b border-[#1e3328] flex items-center gap-3\">\r\n                <div className=\"size-10 bg-[#22c55e] rounded-lg flex items-center justify-center transform rotate-3 shadow-[0_0_15px_rgba(34,197,94,0.4)]\">\r\n                    <Gamepad2 size={24} className=\"text-black\" />\r\n                </div>\r\n                <div>\r\n                    <h1 className=\"text-xl font-bold text-white tracking-tight\">Billiard<span className=\"text-[#22c55e]\">OS</span></h1>\r\n                    <p className=\"text-[10px] text-slate-400 font-mono tracking-widest uppercase\">Management System</p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Navigation */}\r\n            <nav className=\"flex-1 p-4 space-y-1 overflow-y-auto\">\r\n                {menuItems.map((item) => {\r\n                    const isActive = pathname.startsWith(item.path);\r\n                    return (\r\n                        <Link\r\n                            key={item.path}\r\n                            href={item.path}\r\n                            className={`flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 group\r\n                ${isActive\r\n                                    ? 'bg-[#22c55e] text-black shadow-lg shadow-[#22c55e]/20'\r\n                                    : 'text-slate-400 hover:text-white hover:bg-[#16261d]'\r\n                                }\r\n              `}\r\n                        >\r\n                            <item.icon size={20} className={isActive ? 'text-black' : 'group-hover:text-[#22c55e] transition-colors'} />\r\n                            {item.label}\r\n                        </Link>\r\n                    );\r\n                })}\r\n            </nav>\r\n\r\n            {/* Footer */}\r\n            <div className=\"p-4 border-t border-[#1e3328]\">\r\n                <div className=\"bg-[#16261d] rounded-xl p-4 mb-4 border border-[#1e3328]\">\r\n                    <div className=\"flex items-center gap-3 mb-3\">\r\n                        <div className=\"size-8 rounded-full bg-slate-700\"></div>\r\n                        <div className=\"overflow-hidden\">\r\n                            <div className=\"text-sm font-bold text-white truncate\">Staff</div>\r\n                            <div className=\"text-xs text-slate-500 truncate\">Cashier</div>\r\n                        </div>\r\n                    </div>\r\n                    <button\r\n                        onClick={() => logout()}\r\n                        className=\"w-full flex items-center justify-center gap-2 text-xs font-bold text-[#ef4444] bg-[#ef4444]/10 hover:bg-[#ef4444]/20 py-2 rounded transition-colors\"\r\n                    >\r\n                        <LogOut size={14} /> Keluar\r\n                    </button>\r\n                </div>\r\n                <div className=\"text-center text-[10px] text-slate-600\">\r\n                    v1.0.0 â€¢ BilliardOS\r\n                </div>\r\n            </div>\r\n        </aside>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;;;AATA;;;;;AAWO,SAAS;;IACZ,MAAM,WAAW,IAAA,oJAAW;IAC5B,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,oJAAO;IAE1B,MAAM,YAAY;QACd;YAAE,OAAO;YAAa,MAAM,mOAAU;YAAE,MAAM;QAAa;QAC3D;YAAE,OAAO;YAAkB,MAAM,6NAAQ;YAAE,MAAM;QAAU;QAC3D;YAAE,OAAO;YAAc,MAAM,gNAAK;YAAE,MAAM;QAAW;QACrD;YAAE,OAAO;YAAc,MAAM,sOAAW;YAAE,MAAM;QAAO;QACvD;YAAE,OAAO;YAAa,MAAM,yNAAQ;YAAE,MAAM;QAAgB;QAC5D;YAAE,OAAO;YAAW,MAAM,6NAAQ;YAAE,MAAM;QAAW;KACxD;IAED,qBACI,6LAAC;QAAM,WAAU;;0BAEb,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAI,WAAU;kCACX,cAAA,6LAAC,6NAAQ;4BAAC,MAAM;4BAAI,WAAU;;;;;;;;;;;kCAElC,6LAAC;;0CACG,6LAAC;gCAAG,WAAU;;oCAA8C;kDAAQ,6LAAC;wCAAK,WAAU;kDAAiB;;;;;;;;;;;;0CACrG,6LAAC;gCAAE,WAAU;0CAAiE;;;;;;;;;;;;;;;;;;0BAKtF,6LAAC;gBAAI,WAAU;0BACV,UAAU,GAAG,CAAC,CAAC;oBACZ,MAAM,WAAW,SAAS,UAAU,CAAC,KAAK,IAAI;oBAC9C,qBACI,6LAAC,0KAAI;wBAED,MAAM,KAAK,IAAI;wBACf,WAAW,CAAC;gBACxB,EAAE,WACoB,0DACA,qDACL;cACnB,CAAC;;0CAEa,6LAAC,KAAK,IAAI;gCAAC,MAAM;gCAAI,WAAW,WAAW,eAAe;;;;;;4BACzD,KAAK,KAAK;;uBAVN,KAAK,IAAI;;;;;gBAa1B;;;;;;0BAIJ,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAI,WAAU;;;;;;kDACf,6LAAC;wCAAI,WAAU;;0DACX,6LAAC;gDAAI,WAAU;0DAAwC;;;;;;0DACvD,6LAAC;gDAAI,WAAU;0DAAkC;;;;;;;;;;;;;;;;;;0CAGzD,6LAAC;gCACG,SAAS,IAAM;gCACf,WAAU;;kDAEV,6LAAC,uNAAM;wCAAC,MAAM;;;;;;oCAAM;;;;;;;;;;;;;kCAG5B,6LAAC;wBAAI,WAAU;kCAAyC;;;;;;;;;;;;;;;;;;AAMxE;GAvEgB;;QACK,oJAAW;QACT,oJAAO;;;KAFd"}}]
}